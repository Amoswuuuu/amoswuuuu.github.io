<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Amos&#39;Blog</title>
  
  <subtitle>恒者行远，思者常新。</subtitle>
  <link href="https://blog.amoswu.top/atom.xml" rel="self"/>
  
  <link href="https://blog.amoswu.top/"/>
  <updated>2026-01-30T07:08:16.000Z</updated>
  <id>https://blog.amoswu.top/</id>
  
  <author>
    <name>Amos</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>简明 Book Searcher 使用教程</title>
    <link href="https://blog.amoswu.top/83e2.html"/>
    <id>https://blog.amoswu.top/83e2.html</id>
    <published>2023-02-24T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:16.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>自建 Book Searcher 地址： <a href="https://book.amoswu.cn/">https://book.amoswu.cn</a></p><p>Index version : 0.9.0</p></blockquote><p><img src="https://img.amoswu.top/post/yHRL.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/yHRL.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="Book-Searcher-简介"><a href="#Book-Searcher-简介" class="headerlink" title="Book Searcher 简介"></a>Book Searcher 简介</h2><div class="story post-story"><p>Book Searcher 是 Z-library 的一个民间项目之一。这个项目是在 Z-library 被封之后诞生的，它的前身是 <strong><a href="https://annas-archive.org/">Anna’s Archive</a>**，国内网友将 Anna’s Archive 数据库做成索引，通过搜索 IPFS ID 继而获得相应结果的下载链接。起初这个项目的名叫 **zLib Searcher</strong>，后来改名成了 Book Searcher。</p><blockquote><p>项目开源地址： <a href="https://github.com/book-searcher-org/book-searcher">https://github.com/book-searcher-org/book-searcher</a></p></blockquote></div><h2 id="IPFS-简介"><a href="#IPFS-简介" class="headerlink" title="IPFS 简介"></a>IPFS 简介</h2><div class="story post-story"><p>IPFS的全称是 InterPlanetary File System ，即星际文件系统。它是一个点对点（P2P）的网络超媒体协议。它的目标是成为更快、更安全、更开放的下一代互联网，当然这不是它的终极目标，终极目标是取代现在的 HTTP ，创建一个完全去中心化的网络。</p><blockquote><p>官网：<a href="https://ipfs.io/">https://ipfs.io</a></p></blockquote></div><h2 id="Book-Searcher-使用方法"><a href="#Book-Searcher-使用方法" class="headerlink" title="Book Searcher 使用方法"></a>Book Searcher 使用方法</h2><div class="story post-story"><h3 id="1-打开以下任意网址"><a href="#1-打开以下任意网址" class="headerlink" title="1. 打开以下任意网址"></a>1. 打开以下任意网址</h3><ul><li><a href="https://book.amoswu.cn/">https://book.amoswu.cn</a></li><li><a href="https://zlib.awesc.com/">https://zlib.awesc.com</a></li><li><a href="https://zlib.knat.network/">https://zlib.knat.network</a></li></ul><h3 id="2-点击右上角⚙️设置图标，输入-IPFS-网关地址，点击保存"><a href="#2-点击右上角⚙️设置图标，输入-IPFS-网关地址，点击保存" class="headerlink" title="2. 点击右上角⚙️设置图标，输入 IPFS 网关地址，点击保存"></a>2. 点击右上角⚙️设置图标，输入 IPFS 网关地址，点击保存</h3><p>直接复制下列地址即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https://cloudflare-ipfs.com</span><br><span class="line">https://dweb.link</span><br><span class="line">https://ipfs.io</span><br><span class="line">https://dw.oho.im</span><br><span class="line">https://gateway.pinata.cloud</span><br><span class="line">https://ipfs.best-practice.se</span><br></pre></td></tr></table></figure><p>ps: 如果哪天上述地址都不可用了，你还可以使用下面的 IPFS 网关检查工具来替代，尽量选择延迟较低的。</p><p><a href="https://ipfs.github.io/public-gateway-checker">https://ipfs.github.io/public-gateway-checker</a></p><p><a href="https://ipfs-checker.1kbtool.com/">https://ipfs-checker.1kbtool.com</a></p><h3 id="3-任意搜索你想搜的书籍"><a href="#3-任意搜索你想搜的书籍" class="headerlink" title="3. 任意搜索你想搜的书籍"></a>3. 任意搜索你想搜的书籍</h3></div><h2 id="其他搜索引擎推荐"><a href="#其他搜索引擎推荐" class="headerlink" title="其他搜索引擎推荐"></a>其他搜索引擎推荐</h2><div class="story post-story"><p><a href="https://bk.hallowlib.org/">https://bk.hallowlib.org</a></p><p><a href="https://clibrary.cn/">https://clibrary.cn</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;自建 Book Searcher 地址： &lt;a href=&quot;https://book.amoswu.cn/&quot;&gt;https://book.amoswu.cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Index version : 0.9.0&lt;/p&gt;
&lt;/blockqu</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.amoswu.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="教程" scheme="https://blog.amoswu.top/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="2023" scheme="https://blog.amoswu.top/tags/2023/"/>
    
  </entry>
  
  <entry>
    <title>免费正版图书期刊阅读方法分享</title>
    <link href="https://blog.amoswu.top/73a3.html"/>
    <id>https://blog.amoswu.top/73a3.html</id>
    <published>2022-06-23T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/7HcQP.png" class="lazyload" data-srcset="https://img.amoswu.top/post/7HcQP.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><blockquote><p>万般皆下品，唯有读书高。</p></blockquote><p>近年来，随着移动互联网的兴起，越来越多的信息通过互联网来到我们面前。随着信息量的指数级增长，越来越多人想要跳出信息茧房，主动出击，获取自己想要的信息。阅读出版发行物，是其中一个比较靠谱的信息来源。但是，大多数出版物都是需要付费的产品，对于想随时翻看，尽可能多地触及更多种类的读者来说是个不小的门槛。今天，我就给大家介绍一种免费可行的方法，让大家在手机APP、小程序、微信以及电脑网页等多种客户端随时随地阅读自己想看的出版物。</p><p>首先，我们先来认识一下这个方法的载体——博看书苑。</p><h2 id="博看书苑简介"><a href="#博看书苑简介" class="headerlink" title="博看书苑简介"></a>博看书苑简介</h2><div class="story post-story"><p>博看书苑数字阅读系统主要收录涉及党政、时事、军事、管理、财经、文摘、文学、艺术、情感、家庭、健康、时尚、娱乐、科技、教育、教学等40多类4000多种主流畅销人文期刊。超过4000多家期刊社达成正式合作，基本涵盖全部人文畅销类期刊，是现今最大最全的人文畅销期刊数据库，全新上线的图书版块包括30000多册近五年出版的图书，报纸版块包括超过200种网络主流报纸。博看在全国拥有1000多万的读者，以符合读者阅读习惯、以在线翻页的原貌版为基础，同时提供文本版等多种阅读形式。支持PC端，APP端、微信端和触摸大屏阅读系统[1]。</p><p>看完介绍，我们继续了解一下它的多个客户端访问入口。</p></div><h2 id="多端访问入口"><a href="#多端访问入口" class="headerlink" title="多端访问入口"></a>多端访问入口</h2><div class="story post-story"><p>PC：请直接访问  <a href="http://zq5.bookan.com.cn/#/login">http://zq5.bookan.com.cn/#/login</a></p><p>APP：下载地址 <a href="https://download.bookan.com.cn/">https://download.bookan.com.cn</a></p><p>微信小程序： 微信搜一搜 “<strong>博看书苑</strong>”</p><p>接下来，就是具体的操作步骤</p></div><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><div class="story post-story"><ol><li>以PC为例，打开上述<a href="http://zq5.bookan.com.cn/#/login">链接</a>；</li><li>注册账号后，输入<strong>机构授权码</strong>（见下文）；</li></ol><p><img src="https://img.amoswu.top/post/Bcz5B.png" class="lazyload" data-srcset="https://img.amoswu.top/post/Bcz5B.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><ol start="3"><li>使用这个账号，开始你的阅读之旅吧~</li></ol><p><img src="https://img.amoswu.top/post/iXWwv.png" class="lazyload" data-srcset="https://img.amoswu.top/post/iXWwv.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="以华中师范大学图书馆为例"></p><p>▲ 以华中科技大学图书馆为例</p></div><h2 id="【重要】授权码获取"><a href="#【重要】授权码获取" class="headerlink" title="【重要】授权码获取"></a>【重要】授权码获取</h2><div class="story post-story"><h3 id="各省市图书馆授权码"><a href="#各省市图书馆授权码" class="headerlink" title="各省市图书馆授权码"></a>各省市图书馆授权码</h3><p>浙江图书馆：<code>zjlib</code></p><p>上海图书馆：<code>shlib</code></p><p>四川图书馆：<code>sclib</code></p><p>安微图书馆：<code>ahst</code></p><p>山东图书馆：<code>sdlib</code></p><p>山西图书馆：<code>sxlib</code></p><p>甘肃图书馆：<code>gzlib</code></p><p>新疆图书馆：<code>xjlib</code></p><p>武汉图书馆：<code>whlib</code></p><p>随州图书馆：<code>szlib</code></p><p>镇江图书馆：<code>zjst</code></p><p>梧州图书馆：<code>wzlib</code></p><p>兴义市图书馆：<code>xyslib</code></p><h3 id="各高校图书馆授权码"><a href="#各高校图书馆授权码" class="headerlink" title="各高校图书馆授权码"></a>各高校图书馆授权码</h3><blockquote><p>获取方法：</p><p>搜索引擎搜索关键词  <code>博看 site: edu.cn</code></p></blockquote><p>武汉大学图书馆：<code>whu</code></p><p>吉林大学图书馆：<code>jlulib</code></p><p>四川大学图书馆：<code>scu</code></p><p>河南大学图书馆：<code>hndx</code></p><p>南华大学图书馆：<code>usc</code></p><p>沈阳大学图书馆：<code>sydxlib</code></p><p>广西大学图书馆：<code>gxulib</code></p><p>华中科技大学图书馆：<code>lib</code></p><p>中国药科大学图书馆：<code>cpuedu</code></p><p>中国科学技术大学图书馆：<code>zkdlib</code></p></div><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><div class="story post-story"><p>[1] 中国药科大学图书馆 - <a href="http://lib.cpu.edu.cn/59/62/c1171a88418/page.htm">博看书苑数字阅读系统</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/7HcQP.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/7HcQP.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.amoswu.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="教程" scheme="https://blog.amoswu.top/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="2022" scheme="https://blog.amoswu.top/tags/2022/"/>
    
  </entry>
  
  <entry>
    <title>Qt程序中优雅的打包方案</title>
    <link href="https://blog.amoswu.top/3ed5.html"/>
    <id>https://blog.amoswu.top/3ed5.html</id>
    <published>2021-03-30T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/tzgCO.png" class="lazyload" data-srcset="https://img.amoswu.top/post/tzgCO.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1"></p><blockquote><p>Qt程序打包，没有想象中那么复杂。</p></blockquote><h2 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h2><div class="story post-story"><p>在使用 Qt C++ 发布生成 <code>*.exe</code> 时，需要复制大量 <code>dll</code> 动态链接库文件，这一点相信每一个 Qt 开发者都经历过。除了手动复制，能不能有一种更优雅的解决方案呢？</p></div><h2 id="问题调研"><a href="#问题调研" class="headerlink" title="问题调研"></a>问题调研</h2><div class="story post-story"><p>在当前的主流语言中，打包方式可谓是大道至简。使用 C++ 时，你可以通过 Visual Studio 自带的打包插件完成打包；使用 Python 时，你可以借助 PyInstaller 这样的打包工具执行命令完成打包； 使用 Golang 时，你可以借助它自带的打包工具执行命令完成打包…</p><p>Qt 官方为了解决这一问题，早就在 Qt 安装时内置一个一键打包程序 —— <code>wideployqt.exe</code>。</p></div><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><div class="story post-story"><h3 id="windeployqt-exe-使用教程"><a href="#windeployqt-exe-使用教程" class="headerlink" title="windeployqt.exe 使用教程"></a>windeployqt.exe 使用教程</h3><h4 id="1-准备文件"><a href="#1-准备文件" class="headerlink" title="1. 准备文件"></a>1. 准备文件</h4><ul><li>一个 release 模式下编译好的 exe；</li><li>其他非系统库；</li><li>exe 启动时读取的目录或文件等。</li></ul><p>准备好上述文件后，将它们拷贝至一个新建的文件夹中，文件夹路径和命名不能包含中文。</p><p><img src="https://img.amoswu.top/post/JSNU0.png" class="lazyload" data-srcset="https://img.amoswu.top/post/JSNU0.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210402115944384"></p><h4 id="2-启动-Qt-对应编译器的控制台程序"><a href="#2-启动-Qt-对应编译器的控制台程序" class="headerlink" title="2. 启动 Qt 对应编译器的控制台程序"></a>2. 启动 Qt 对应编译器的控制台程序</h4><p>我使用的 MinGW 5.3.0 ， 故选择图中这个控制台程序。</p><p>​                                              <img src="https://img.amoswu.top/post/DTGYN.png" class="lazyload" data-srcset="https://img.amoswu.top/post/DTGYN.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210402133306270">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </p><h4 id="3-在控制台打开编译好的-exe-所在路径"><a href="#3-在控制台打开编译好的-exe-所在路径" class="headerlink" title="3.在控制台打开编译好的 exe 所在路径"></a>3.在控制台打开编译好的 exe 所在路径</h4><p><img src="https://img.amoswu.top/post/9N146.png" class="lazyload" data-srcset="https://img.amoswu.top/post/9N146.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210402133627859"></p><h4 id="4-输入打包命令开始打包"><a href="#4-输入打包命令开始打包" class="headerlink" title="4. 输入打包命令开始打包"></a>4. 输入打包命令开始打包</h4><p>打开对应路径后，输入下方的打包命令，即可开始打包。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">windeployqt [exe文件名]</span><br></pre></td></tr></table></figure><p><img src="https://img.amoswu.top/post/TxuZc.png" class="lazyload" data-srcset="https://img.amoswu.top/post/TxuZc.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210402133900186"></p><p>稍等片刻，打开文件夹你会看到，所有的 dll 库已经拷贝完成了，我们可以打开 exe 试一试打包是否成功。</p><p><img src="https://img.amoswu.top/post/evUzB.png" class="lazyload" data-srcset="https://img.amoswu.top/post/evUzB.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210402134034013"></p></div><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><div class="story post-story"><p>[1] 新浪博客 - <a href="http://blog.sina.com.cn/s/blog_a6fb6cc90101fer8.html">Qt之打包发布（NSIS详解）</a></p><p>[2] CSDN - <a href="https://blog.csdn.net/sinat_36264666/article/details/73305712">教你使用windeployqt工具来进行Qt的打包发布</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/tzgCO.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/tzgCO.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="随笔" scheme="https://blog.amoswu.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>Qt程序中优雅的日志方案</title>
    <link href="https://blog.amoswu.top/f624.html"/>
    <id>https://blog.amoswu.top/f624.html</id>
    <published>2021-03-30T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/OxADm.png" class="lazyload" data-srcset="https://img.amoswu.top/post/OxADm.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><blockquote><p>一个完整的软件（系统）都要有一套优雅的日志方案。</p></blockquote><h2 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h2><div class="story post-story"><p>在使用Qt开发软件（系统）过程中，出于多种目的，开发者难免需要记录程序运行过程中的一些状态信息，也就是我们常说的日志。Qt 中的日志模块（<code>qInstallMessageHandler</code>）配置繁杂，对于日志设计新手来说很不友好，虽然官方给出了Demo，但其繁杂程度依旧不减。</p><p>使用<code>Golang</code>、<code>Python</code>等语言开发过程序的开发者，应该都听说过 <code>Loguru</code>，它是在流行语言领域优雅日志方案的佼佼者。在Qt C++ 开发中有没有<code>Loguru</code>或者和它媲美的日志方案呢？</p></div><h2 id="问题调研"><a href="#问题调研" class="headerlink" title="问题调研"></a>问题调研</h2><div class="story post-story"><p>在寻找好的日志记录方案前，有必要先了解清楚两个问题，我们为什么要记录日志？日志记录的要素有哪些？</p><h3 id="为什么要记录日志？"><a href="#为什么要记录日志？" class="headerlink" title="为什么要记录日志？"></a>为什么要记录日志？</h3><h4 id="1-开发调试"><a href="#1-开发调试" class="headerlink" title="1.开发调试"></a>1.开发调试</h4><p>目的是开发期调试程序使用，这种日志量比较大，且没有什么实质性的意义，只应该出现在开发期，而<strong>不应该在项目上线之后输出</strong>。</p><h4 id="2-记录用户行为"><a href="#2-记录用户行为" class="headerlink" title="2.记录用户行为"></a>2.记录用户行为</h4><p>这种类型的日志，记录用户的操作行为，用于大数据分析，比如监控、风控、推荐等等。这种日志，一般是给其他团队分析使用，而且可能是多个团队，因此一般会有一定的格式要求，开发者应该按照这个格式来记录，便于其他团队的使用。当然，要记录哪些行为、操作，一般也是约定好的，因此，开发者主要是执行的角色。</p><h4 id="3-记录程序运行情况"><a href="#3-记录程序运行情况" class="headerlink" title="3.记录程序运行情况"></a>3.记录程序运行情况</h4><p>记录程序的运行状况，特别是非预期的行为、异常情况，这种日志，主要是给开发、维护人员使用。什么时候记录，记录什么内容，完全取决于开发人员，开发者具有高度自主性。</p><h4 id="4-记录系统、机器状况"><a href="#4-记录系统、机器状况" class="headerlink" title="4.记录系统、机器状况"></a>4.记录系统、机器状况</h4><p>比如网络请求、系统CPU、内存、IO使用情况等等，这种日志主要是给运维人员使用，生成各种更直观的展现形式，配合预警系统，在系统出问题时及时预警。</p><h3 id="日志记录的要素有哪些？"><a href="#日志记录的要素有哪些？" class="headerlink" title="日志记录的要素有哪些？"></a>日志记录的要素有哪些？</h3><p>每条日志都可以被当作一个<strong>事件（event）</strong>，记录了该事件发生时各种信息，这些信息大概有以下几类。</p><h4 id="1-时间"><a href="#1-时间" class="headerlink" title="1.时间"></a>1.时间</h4><p>这个时间通常是指<strong>事件发生的时间</strong>，并不是日志被打印的时间。它通常用标准时间或时间戳的形式输出。</p><h3 id="2-位置"><a href="#2-位置" class="headerlink" title="2.位置"></a>2.位置</h3><p>这个位置一般有<strong>模块位置、文件位置、函数位置、代码所在行</strong>等等，根据敏感程度的不同，我们输出位置的级别也不同。</p><h3 id="3-级别"><a href="#3-级别" class="headerlink" title="3.级别"></a>3.级别</h3><p>级别也就是日志的重要程度，主要用于不<strong>同的环境（测试、生产）下，打印不同级别的日志；不同级别的日志产生不同级别的监控报警。</strong></p><h3 id="4-内容"><a href="#4-内容" class="headerlink" title="4.内容"></a>4.内容</h3><p>内容也就是我们<strong>要展示</strong>给日志阅读者和使用者<strong>的信息</strong>，要简明扼要地描述这个模块、函数、文件等发生了什么事情。</p><h3 id="5-唯一标识"><a href="#5-唯一标识" class="headerlink" title="5.唯一标识"></a>5.唯一标识</h3><p>在大型集群系统、分布式系统中，为了快速定位日志输出点，我们需要唯一标识作为日志的主体。</p><h3 id="6-格式化"><a href="#6-格式化" class="headerlink" title="6.格式化"></a>6.格式化</h3><p>将上述的信息按照固定的格式打印出来，或输出到文件中，就是日志的格式化。这样做的目的不仅仅是方便阅读，还能方便后期编写日志解析程序。</p><h3 id="7-其他"><a href="#7-其他" class="headerlink" title="7.其他"></a>7.其他</h3><p>根据程序、业务等特点，还可以在日志中记录（包括但不限于）：<code>错误次数</code>、<code>处理进度</code>、<code>IP地址</code>等等。</p></div><h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><div class="story post-story"><p>明白了上述内容，我们可以在遵循 <code>使用框架或模块</code>、<code>不能出错</code>、<code>避免敏感信息</code>、<code>合理归档分类</code>等原则的情况下，选择一个合适的框架来达到我们的目的。</p><h3 id="Easylogging"><a href="#Easylogging" class="headerlink" title="Easylogging++"></a>Easylogging++</h3><p>如同 Loguru 一样，在 Qt C++ 中也可以有很优雅的日志方案，它就是集简单、轻量、高效、可配置等优点于一身的 **Easylogging++**。</p><p>虽然也有 C++ 版本的 Loguru ，但它的功能显然对 Qt 的支持不是很友好。于是我们选用了通用性较强的 Easylogging++ 来达到我们的目的。</p><h4 id="入门知识"><a href="#入门知识" class="headerlink" title="入门知识"></a>入门知识</h4><h5 id="日志等级"><a href="#日志等级" class="headerlink" title="日志等级"></a>日志等级</h5><p>常用的日志等级，由高到低，依次为 Error 、 Debug 、 Warning 、 Info 。</p><h5 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">LOG</span>(日志等级) &lt;&lt;  “日志内容”;</span><br></pre></td></tr></table></figure><h5 id="支持的-Qt-变量类型"><a href="#支持的-Qt-变量类型" class="headerlink" title="支持的 Qt 变量类型"></a>支持的 Qt 变量类型</h5><table><thead><tr><th>*</th><th>*</th><th>*</th><th>*</th><th>*</th><th>*</th></tr></thead><tbody><tr><td><code>QString</code></td><td><code>QByteArray</code></td><td><code>QLatin</code></td><td><code>QList</code></td><td><code>QVector</code></td><td><code>QQueue</code></td></tr><tr><td><code>QSet</code></td><td><code>QPair</code></td><td><code>QMap</code></td><td><code>QMultiMap</code></td><td><code>QHash</code></td><td><code>QMultiHash</code></td></tr><tr><td><code>QLinkedList</code></td><td><code>QStack</code></td><td><code>QChar</code></td><td><code>q[u]int[64]</code></td><td></td><td></td></tr></tbody></table><h4 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h4><h5 id="1）下载或克隆-Easylogging-仓库源码"><a href="#1）下载或克隆-Easylogging-仓库源码" class="headerlink" title="1）下载或克隆 Easylogging++ 仓库源码"></a>1）下载或克隆 Easylogging++ 仓库源码</h5><p>Github地址： <a href="https://github.com/amrayn/easyloggingpp">https://github.com/amrayn/easyloggingpp</a></p><h5 id="2）-原生-C-方式使用"><a href="#2）-原生-C-方式使用" class="headerlink" title="2） 原生 C++ 方式使用"></a>2） 原生 C++ 方式使用</h5><ol><li><p>将 <code>src</code> 文件夹下的 <code>easylogging++.cc</code> 和 <code>easylogging++.h</code>拷贝到要应用的项目目录；</p></li><li><p>初始化并输出一条日志</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  *.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入头文件并初始化</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;easylogging++.h&quot;</span></span></span><br><span class="line">INITIALIZE_EASYLOGGINGPP</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出日志</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span>* argv[])</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;This is a log generated by Easylogging++.&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>注意事项</p><ul><li>所有要输出的变量类型必须为标准 C++ 格式</li><li>初始化必须在 <code>*.cpp</code>文件中进行</li></ul></li></ol><h5 id="3）Qt-调用方式"><a href="#3）Qt-调用方式" class="headerlink" title="3）Qt 调用方式"></a>3）Qt 调用方式</h5><ol><li><p>将 <code>src</code> 文件夹下的 <code>easylogging++.cc</code> 和 <code>easylogging++.h</code>拷贝到要应用的项目目录；</p></li><li><p>配置 <code>*.pro</code> 文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// *.pro</span><br><span class="line"></span><br><span class="line">// 写入配置</span><br><span class="line">DEFINES += ELPP_QT_LOGGING    \</span><br><span class="line">          ELPP_FEATURE_ALL \</span><br><span class="line">          ELPP_STL_LOGGING   \</span><br><span class="line">          ELPP_STRICT_SIZE_CHECK ELPP_UNICODE \</span><br><span class="line">          ELPP_MULTI_LOGGER_SUPPORT \</span><br><span class="line">          ELPP_THREAD_SAFE</span><br><span class="line">          </span><br></pre></td></tr></table></figure></li><li><p>初始化并输出一条日志</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入头文件并初始化</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;easylogging++.h&quot;</span></span></span><br><span class="line">INITIALIZE_EASYLOGGINGPP</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;logdemo.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_logdemo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LogDemo::<span class="built_in">LogDemo</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QWidget</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::LogDemo)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">InitLogger</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LogDemo::~<span class="built_in">LogDemo</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 日志初始化</span></span><br><span class="line"><span class="comment"> * @brief LogDemo::InitLogger</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LogDemo::InitLogger</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString s = <span class="string">&quot;This is a log generated by Easylogging++.&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>注意事项</p><ul><li><code>*.pro</code>必须加入相应配置</li><li>所有要输出的变量类型可以为 受支持的Qt格式或标准 C++ 格式</li><li>初始化必须在 <code>*.cpp</code>文件中进行</li></ul></li></ol><h4 id="更多拓展"><a href="#更多拓展" class="headerlink" title="更多拓展"></a>更多拓展</h4><ul><li>独立配置文件</li><li>自定义 Logger</li><li>多线程</li><li>导出成动态链接库</li><li>…</li></ul></div><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><div class="story post-story"><p>[1] 知乎专栏 - <a href="https://zhuanlan.zhihu.com/p/45496501">记录日志有哪些好的技巧？</a></p><p>[2] 静觅 - <a href="https://cuiqingcai.com/7776.html">Python 中更优雅的日志记录方案 loguru</a></p><p>[3] Github - <a href="https://github.com/amrayn/easyloggingpp">Easyloggingpp</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/OxADm.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/OxADm.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="随笔" scheme="https://blog.amoswu.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>从零开始搭建NTP服务</title>
    <link href="https://blog.amoswu.top/2956.html"/>
    <id>https://blog.amoswu.top/2956.html</id>
    <published>2021-03-23T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/YXGUn.png" class="lazyload" data-srcset="https://img.amoswu.top/post/YXGUn.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="0x01-NTP-简介"><a href="#0x01-NTP-简介" class="headerlink" title="0x01. NTP 简介"></a>0x01. NTP 简介</h2><div class="story post-story"><p>NTP(Network Time Protocol) 的全称是 <strong>网络时间协议</strong> ，它是用来使计算机时间同步化的一种协议，它可以使计算机对其服务器或时钟源做同步化，它可以提供高精准度的时间校正（LAN上与标准时间差小于1ms，WAN上是几十毫秒）。</p></div><h2 id="0x02-Windows-时间服务简介"><a href="#0x02-Windows-时间服务简介" class="headerlink" title="0x02. Windows 时间服务简介"></a>0x02. Windows 时间服务简介</h2><div class="story post-story"><p>从Windows2000开始，所有的Microsoft Windows 操作系统都内置了 Windows时间服务（即W32Time），它具有将计算机时钟与NTP服务器同步的能力。</p><blockquote><p>Windows 10 和 Windows Server 2016 中的时间同步已大幅改善。 在合理的操作条件下，可将系统配置为维持 1ms（毫秒）的精度或更高的精度（相对于 UTC）。</p><p>——From <a href="https://docs.microsoft.com/zh-cn/windows-server/networking/windows-time-service/windows-time-service-top">Microsoft</a></p></blockquote></div><h2 id="0x03-Win-NTP-服务器详细搭建步骤"><a href="#0x03-Win-NTP-服务器详细搭建步骤" class="headerlink" title="0x03. Win NTP 服务器详细搭建步骤"></a>0x03. Win NTP 服务器详细搭建步骤</h2><div class="story post-story"><h4 id="Step-1-打开-Windows-注册表"><a href="#Step-1-打开-Windows-注册表" class="headerlink" title="Step 1. 打开 Windows 注册表"></a>Step 1. 打开 Windows 注册表</h4><p>按下 <code>Windows键 + R</code> 或 打开 <code>运行</code>，输入  <code>regedit</code>后点击确定。</p><p><img src="https://img.amoswu.top/post/gAYDp.png" class="lazyload" data-srcset="https://img.amoswu.top/post/gAYDp.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-2-找到指定路径-1"><a href="#Step-2-找到指定路径-1" class="headerlink" title="Step 2. 找到指定路径 -1"></a>Step 2. 找到指定路径 -1</h4><p>依次展开至 <code>Config</code> 路径，或直接在路径输入框复制下方路径后回车跳转。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算机\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W32Time\Config</span><br></pre></td></tr></table></figure><p><img src="https://img.amoswu.top/post/SCEQb.png" class="lazyload" data-srcset="https://img.amoswu.top/post/SCEQb.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-3-修改指定的值-1"><a href="#Step-3-修改指定的值-1" class="headerlink" title="Step 3. 修改指定的值 -1"></a>Step 3. 修改指定的值 -1</h4><p>在右侧找到 <code>AnnounceFlags</code>，双击，将它的 <code>数值数据</code> 改为 <code>5</code>，单击确定。</p><p> <img src="https://img.amoswu.top/post/vDZb8.png" class="lazyload" data-srcset="https://img.amoswu.top/post/vDZb8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-4-找到指定路径-2"><a href="#Step-4-找到指定路径-2" class="headerlink" title="Step 4.找到指定路径 -2"></a>Step 4.找到指定路径 -2</h4><p>依次展开至 <code>NtpServer</code> 路径，或直接在路径输入框复制下方路径后回车跳转。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算机\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpServer</span><br></pre></td></tr></table></figure><p><img src="https://img.amoswu.top/post/DAMHo.png" class="lazyload" data-srcset="https://img.amoswu.top/post/DAMHo.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-5-修改指定的值-2"><a href="#Step-5-修改指定的值-2" class="headerlink" title="Step 5. 修改指定的值 -2"></a>Step 5. 修改指定的值 -2</h4><p>在右侧找到 <code>Enabled</code>，双击，将它的 <code>数值数据</code> 改为 <code>1</code>，单击确定。</p><p> <img src="https://img.amoswu.top/post/woe9R.png" class="lazyload" data-srcset="https://img.amoswu.top/post/woe9R.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-6-启动-W32Time-服务"><a href="#Step-6-启动-W32Time-服务" class="headerlink" title="Step 6. 启动 W32Time 服务"></a>Step 6. 启动 W32Time 服务</h4><p>按下 <code>Windows键 + R</code> 或 打开 <code>运行</code>，输入  <code>services.msc</code> 后点击确定；</p><p><img src="https://img.amoswu.top/post/32jkF.png" class="lazyload" data-srcset="https://img.amoswu.top/post/32jkF.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>找到 <code>Windows Time</code> 服务项，双击，将它的 <code>启动类型</code> 设置为 <code>自动</code>，单击确定。</p><p><img src="https://img.amoswu.top/post/FhB9p.png" class="lazyload" data-srcset="https://img.amoswu.top/post/FhB9p.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h4 id="Step-7-重启-W32Time-服务"><a href="#Step-7-重启-W32Time-服务" class="headerlink" title="Step 7. 重启 W32Time 服务"></a>Step 7. 重启 W32Time 服务</h4><p>按下 <code>Windows键 + X + A</code> 或  以管理员身份运行 <code>cmd.exe</code> ，依次输入  <code>net stop w32time  </code>和   <code>net start w32time</code> 后点击确定；</p><p><img src="https://img.amoswu.top/post/Ep7Tq.png" class="lazyload" data-srcset="https://img.amoswu.top/post/Ep7Tq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>按下 <code>Windows键 + R</code> 或 打开 <code>运行</code>，输入  <code>cmd</code> 后点击确定；</p><p><img src="https://img.amoswu.top/post/y5U6n.png" class="lazyload" data-srcset="https://img.amoswu.top/post/y5U6n.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>在弹出的窗口中，输入 <code>netstat -an</code> ，回车，在输出的文本中可以看到  <code>UDP  0.0.0.0:123     *:*</code>  ，说明 NTP 服务搭建成功。</p><p><img src="https://img.amoswu.top/post/Wroc9.png" class="lazyload" data-srcset="https://img.amoswu.top/post/Wroc9.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div><h2 id="0x04-Windows-和-Linux-下-NTP-对时服务的使用"><a href="#0x04-Windows-和-Linux-下-NTP-对时服务的使用" class="headerlink" title="0x04. Windows 和 Linux 下 NTP 对时服务的使用"></a>0x04. Windows 和 Linux 下 NTP 对时服务的使用</h2><div class="story post-story"><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="Step-1-打开-Internet时间-设置"><a href="#Step-1-打开-Internet时间-设置" class="headerlink" title="Step 1.打开 Internet时间 设置"></a>Step 1.打开 Internet时间 设置</h4><p>在任务栏右下角单击<code>时间</code>，继续单击 <code>日期和时间设置</code> ；</p><p><img src="https://img.amoswu.top/post/PO4RT.png" class="lazyload" data-srcset="https://img.amoswu.top/post/PO4RT.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>在弹出的窗口中，点击 <code>添加不同时区的时钟</code> ；</p><p><img src="https://img.amoswu.top/post/jtcdf.png" class="lazyload" data-srcset="https://img.amoswu.top/post/jtcdf.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>在弹出的窗口中，单击 <code>Internet时间</code> 选项卡，单击 <code>更改设置</code> 按钮； </p><p><img src="https://img.amoswu.top/post/PlICV.png" class="lazyload" data-srcset="https://img.amoswu.top/post/PlICV.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>在弹出的窗口中，输入搭建好NTP服务的主机地址，单击 <code>立即更新</code> 。</p><p><img src="https://img.amoswu.top/post/Ekmut.png" class="lazyload" data-srcset="https://img.amoswu.top/post/Ekmut.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p>在终端输入命令 <code>sudo ntpdate 192.168.10.123</code> ，输入密码，出现类似 <code>step time server 192.168.10.123 offset -1231.354535 sec</code>  字样即表示成功。</p><blockquote><p>参考链接：</p><p>[1] Microsoft - <a href="https://docs.microsoft.com/zh-cn/windows-server/networking/windows-time-service/windows-time-service-top">Windows 时间服务 (W32Time)</a></p><p>[2] Github - <a href="https://github.com/microsoft/W32Time">microsoft/W32Time</a></p></blockquote></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/YXGUn.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/YXGUn.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.amoswu.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="教程" scheme="https://blog.amoswu.top/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>10分钟搞定装机入门知识</title>
    <link href="https://blog.amoswu.top/e182.html"/>
    <id>https://blog.amoswu.top/e182.html</id>
    <published>2021-03-10T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/20210311/2.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><div class="story post-story"><p>随着疫情防控进入了常态化，越来越多的人需要把家里的“老古董”电脑进行一轮升级换代。有的是适应居家办公的需求，有的是适应居家上网课的需求，还有的是适应居家娱乐的需求······总而言之，这些需求的实现都需要一定的装机知识储备。</p><p>本文将站在电脑小白的角度，向你科普一些装机必备的入门知识，将尽量避免使用专业术语和行业黑话，只为助你提高装机效率。</p><blockquote><p>为了尽量保证此次分享的严谨性，我将主要讨论Windows平台的机器，Linux、MacOS等暂时不在此次的讨论范围。我将从主要部件中央处理器、内存、硬盘、独立显卡、主板、电源、显示器、声卡等方面一一展开。</p></blockquote></div><h2 id="一、中央处理器-CPU"><a href="#一、中央处理器-CPU" class="headerlink" title="一、中央处理器 CPU"></a>一、中央处理器 CPU</h2><div class="story post-story"><p>中央处理器（CPU）是一台电脑的核心部件。很大程度上，一台电脑的好用与否和CPU有着不可分割的关系。目前主流的Windows平台的CPU厂商有两个，分别是<strong>Intel</strong>和<strong>AMD</strong>。</p><h3 id="Intel"><a href="#Intel" class="headerlink" title="Intel"></a>Intel</h3><p><img src="https://img.amoswu.top/post/20210311/3.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><ol><li>目前 Intel 在售的系列主要有两个，一个是消费级（家用级）的 <strong>Core</strong>（酷睿）系列，另一个是专业级（服务器级） <strong>Xeon</strong>（至强）系列。但从同一代产品来说， Xeon 的性能远高于 Core ，<strong>至强之于酷睿，好比高铁之于火车</strong>。当然，价格也是与性能成正比的。</li><li>我们继续聊消费级的 Core 系列，它共有四条产品线，分别是 <strong>入门级的i3、主流级的i5、高端级的i7</strong>和<strong>旗舰级的i9</strong>，它们的主频通常情况下是数字越大，主频越高的。主频，我们可以简单理解为计算机执行运算的速度。简单说，处理器代数等条件相同的情况下，<strong>数字越大越好</strong>。</li><li>在售卖方面，CPU 的包装方式有<strong>盒装</strong>和<strong>散装</strong>两种。这两种方式对于CPU本身没有差别，差别主要集中在<strong>质保</strong>和<strong>有无散热器</strong>等方面。也就是说，同等选择下，有钱你可以买个放心，选择盒装CPU，否则就选散装CPU。选散装朋友也不需要担心会买到假货、山寨货，毕竟CPU的生产制造工艺十分复杂，仿制成本非常高。</li><li>常见的CPU后缀，我整理了一张图，大家可以按图索骥。</li></ol><p><img src="https://img.amoswu.top/post/20210311/4.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p><img src="https://img.amoswu.top/post/20210311/5.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><ol><li>AMD 家的 CPU 目前在售的热门系列是 Ryzen（锐龙）系列，它也对标 Intel 的产品线设置了 <strong>入门级的R3、主流级的R5、高端级的R7、旗舰级的R9以及线程撕裂者</strong>。</li><li>AMD 处理器的市场份额虽不如 Intel，但是AMD在消费级CPU领域的产品还是很有诚意的。</li><li>AMD CPU 在选择时尽量选择有 <strong>X</strong> 后缀版。</li></ol><p>另外，还有一个小技巧分享给你，购买 CPU 前可以在 百度贴吧搜索ID <strong>秋刀鱼半藏</strong>，或搜索 <strong>AMD吧、笔记本吧、Intel吧</strong>，查看最新的**<u>CPU天梯图</u>**。</p></div><h2 id="二、内存-Memory"><a href="#二、内存-Memory" class="headerlink" title="二、内存 Memory"></a>二、内存 Memory</h2><div class="story post-story"><p><img src="https://img.amoswu.top/post/20210311/6.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>内存的全称叫“<strong>随机存取器</strong>”，英文表达是 “<strong>Random Access Memory</strong>”，也简称为 <strong>RAM</strong>。顾名思义， 内存会在断电后丢失数据。内存在电脑的硬件系统中扮演的是桥梁的作用，执行程序时它会暂存程序，CPU 取用数据时它也会暂存数据。它的存在是为了提高电脑硬件系统的整体运行效率，打个比方就是，我们在吃饭时都会从锅中盛到碗里吃，这里的锅就是硬盘，碗就是内存。</p><p><strong>内存的好坏会直接决定电脑的运行速度</strong>，因此选择合适的内存也是装机的关键。区分内存的好坏，广义上讲，有三大指标：<strong>内存代数、内存频率、内存容量</strong>。</p><ol><li>目前主流的内存代数有 DDR3 和 DDR4，不久的将来要普及的 DDR5 也将是更好的选择。<strong>其他指标相同的情况下，代数越高越好</strong>。目前市场上多数都是标准电压内存（也叫“标压内存”），当然受到低压CPU的影响，市场上也还存在一些低压内存，它们的显著标志是带“<strong>L</strong>”，如<strong>DDR3L</strong>，这类内存如果新装机的话是<strong>极度不推荐的</strong>。</li><li>内存频率是<strong>衡量内存速度</strong>的直观指标。<strong>其他指标相同的情况下，频率越高越好</strong>。</li><li>内存容量也是我们常说的内存大小，<strong>容量越大，系统会越流畅，多开程序也就不会卡顿</strong>。这就好比碗越大，盛下的菜和饭种类越多一样。值得注意的是，内存容量在32位操作系统中会受到限制，原因是32位操作系统支持的最大内存容量是<strong>3.9G</strong>，所以推荐大家使用 <strong>64 位操作系统</strong>。</li></ol></div><h2 id="三、硬盘-Disk"><a href="#三、硬盘-Disk" class="headerlink" title="三、硬盘 Disk"></a>三、硬盘 Disk</h2><div class="story post-story"><blockquote><p>硬盘是计算机最主要的存储设备。硬盘（港台称之为硬碟，英文名：Hard Disk Drive， 简称HDD 全名温彻斯特式硬盘）由一个或者多个铝制或者玻璃制的碟片组成。这些碟片外覆盖有铁磁性材料。</p><p>——来自 百度百科</p></blockquote><p>目前市面上常见的硬盘有两类，分别是 <strong>机械硬盘(HDD) 、固态硬盘(SSD)</strong> 。它们各有优缺点，下面我们展开来讲一讲。</p><p><img src="https://img.amoswu.top/post/20210311/7.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="7"></p><p>先来说一说机械硬盘，它是诞生最早的一种硬盘，一直被沿用至今。故它的英文名字沿用了硬盘的英文名字 Hard Disk Drive ，简称 HDD。</p><blockquote><p>机械硬盘通常由一个或者多个铝制或者玻璃制成的磁性碟片，磁头，转轴，控制电机，磁头控制器，数据转换器，接口和缓存等几个部分组成。</p><p>——来自 百度百科</p></blockquote><ol><li>机械硬盘的优点主要有<strong>容量大、价格低</strong>等，缺点显而易见噪音大、散热差、存取速度慢、重量大等等。</li><li>机械硬盘有五个特征指标，硬盘尺寸通常受限于硬盘所搭载的平台类型。</li><li>容量，也就是我们常说的存储空间大小。值得注意的是，现在大多数厂商为了方便计数，将原来的 <strong>1TB = 1024GB 默认成了  1TB  = 1000GB</strong>。</li><li>接口类型是受限于电脑主板的一个指标，现在消费级主板多为 SATA 3.0 接口，服务器级多为 SAS 接口。</li><li>转速，即硬盘碟片的转动速度，单位通常是 转/分钟 (rpm)，也是机械硬盘的一大指标，这个指标<strong>与噪音成正比，在一定程度上也与性能成正比</strong>。</li></ol><p><img src="https://img.amoswu.top/post/20210311/8.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="8"></p><p>固态硬盘是用固态电子存储芯片阵列制成的硬盘，从字面意思理解，我们可以知道它的存储介质是固态颗粒。</p><blockquote><p>固态驱动器（Solid State Disk或Solid State Drive，简称SSD），俗称固态硬盘。因为台湾英语里把固体电容称为Solid而得名。SSD由控制单元和存储单元（FLASH芯片、DRAM芯片）组成。</p><p>—— 来自 百度百科</p></blockquote><ol><li>固态硬盘有很多优点，常见的有存取速度快、噪音小、方便携带等等，最显而易见的缺点是价格相较于机械硬盘要高一些。</li><li>固态硬盘广义上的主要指标有两个，分别是存储容量和接口类型。细分还有主控类型、缓存颗粒类型、闪存芯片类型等等不在我们此次的讨论范围。</li><li>目前常见的固态硬盘接口有6类，按带宽（存取速度）排序 SATA &lt;= mSATA  &lt;= M.2-SATA &lt;= U.2 &lt;= PCIE &lt;= NVMe 。</li></ol><p>综合上述两种类型来说，固态硬盘有着无可比拟的读写速度，在固态硬盘上运行的操作系统流畅度远高于在机械硬盘上运行的操作系统，但<strong>机械硬盘具有文件可恢复的良好特性</strong>。</p><p>机械硬盘数据的可恢复性是由它的内部结构决定的。通常情况下，我们在执行删除操作时，机械硬盘中的数据只是被<strong>标记为删除状态</strong>，这样既是出于提高速度考虑，也是为了避免数据被误删考虑。也就是说，我们在使用机械硬盘时，<strong>只要删过的磁盘没有被重新覆盖，那么数据在理论上都是可恢复的</strong>。这也就好比是盛过一种饭的碗，总能通过化学分析等手段，找到这种饭的化学成分一样。只要你不将碗刷干净（完全擦除硬盘）或用这个碗盛别的饭（重新存入别的数据），总有办法分析出它的成分（找回你的数据） 。</p><p>当然，机械硬盘由于内部是机械结构，<strong>在磁头与磁盘反复接触的过程中难免会出现磨损，一旦出现磨损扇区，会出现物理坏道（好比光盘上的划痕）</strong>，从而导致存取时间变长，甚至数据丢失。这就是之前的电脑时间一长会出现卡顿、蓝屏、死机等现象的原因。</p><p>为了同时兼具机械硬盘和固态硬盘的优点，我们在装机时常常选用混合硬盘的方案，也就是 <strong>固态硬盘 + 机械硬盘</strong>的方案。固态硬盘安装操作系统、必要的软件、游戏等等，机械硬盘用于存储其他数据、资料。</p></div><h2 id="四、独立显卡-Display-Card"><a href="#四、独立显卡-Display-Card" class="headerlink" title="四、独立显卡 Display Card"></a>四、独立显卡 Display Card</h2><div class="story post-story"><blockquote><p>显卡（Video card、Display card、Graphics card、Video adapter）是个人计算机基础的组成部分之一，将计算机系统需要的显示信息进行转换驱动显示器，并向显示器提供逐行或隔行扫描信号，控制显示器的正确显示，是连接显示器和个人计算机主板的重要组件，是“人机”的重要设备之一，其内置的并行计算能力现阶段也用于深度学习等运算。</p></blockquote><p>显卡大致可以分为两类，一类是核心显卡或集成显卡（简称“<strong>核显</strong>”或“<strong>集显</strong>”），它们都与CPU集成在了一起，主要功能就是输出显示信号；另一类是独立显卡（简称“<strong>独显</strong>”），它们都独立于CPU之外，主要功能除了输出显示信号外，还能单独进行运算和3D渲染等等。</p><p>核显的性能我们就不介绍了，毕竟它是随着CPU迭代而迭代的。</p><p>我们重点来说一下独显，独显按用途分类也有两大类，一类是给绘图和3D渲染设计的专业显卡；另一类是为游戏娱乐而设计的娱乐显卡，也叫消费级显卡。</p><p>一张显卡由GPU、风扇、电容等部件组成，其核心部件是GPU（显示核心），是显卡的心脏，相当于CPU在电脑中的作用。现在的GPU生产公司只有两家：NVIDIA和AMD，这两家公司在生产出一块GPU之后会对其进行命名，比如 GTX960、GTX970、GTX1080Ti等，再交付给下游的显卡制造商（比如影驰，七彩虹）去组装成显卡，这类显卡被称之为“<strong>非公版显卡</strong>”，在出售时会在“显卡核心型号”前加上自己厂商的名称作为前缀，用于和其他厂商进行区分。</p><p>目前的独显品牌市场可谓是“二分天下”，一边是以英伟达(NVIDA)为首的<strong>N卡</strong>阵营，另一边是以AMD为首的<strong>A卡</strong>阵营。我们从两大品牌的角度展开说一说。</p><p><img src="https://img.amoswu.top/post/20210311/9.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/9.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="9"></p><p>英伟达显卡的产品线比较直观，这也让大众更容易接受它的产品。一般来说，N卡有五个重要指标，</p><ol><li>GeForce / Quadro 区别显卡用途，普通家用推荐 <strong>GeForce</strong>；</li><li>GT / GTX / RTX 区别显卡级别 ，普通家用GTX 和 RTX 都可以；</li><li>10 / 20 / 30 代表显卡代数；</li><li>代数后面紧跟着的是中低高端的区别以及是否为增强版的标志；</li><li>最后是显存的大小。</li></ol><p><img src="https://img.amoswu.top/post/20210311/10.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/10.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="10"></p><p>由于AMD的显卡产品线比较复杂，如果简单分享的话，我建议你购买 RX系列，并参考显卡天梯图与同性能的N卡进行比较。</p><p>显卡天梯图，可以百度贴吧——<strong>显卡吧</strong>搜索ID “<strong>秋刀鱼半藏</strong>”查看。</p></div><h2 id="五、主板-Motherboard"><a href="#五、主板-Motherboard" class="headerlink" title="五、主板 Motherboard"></a>五、主板 Motherboard</h2><div class="story post-story"><p><img src="https://img.amoswu.top/post/20210311/11.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210311/11.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="11"></p><ol><li><p>主板也是电脑的重要组成部分，它为CPU、内存、硬盘、显卡、键盘、鼠标、显示器等部件提供了一个安装平台，让这些部件联系在一起。因为要与CPU配对，所以<strong>主板也分为Intel主板和AMD主板</strong>。同时由于不同代CPU针脚的不同，<strong>选购主板时还要选择与之配对的某系主板</strong>。比如6系7系对应LGA 1155针脚的2代3代CPU，8系对应LGA 1150针脚4代5代CPU，100系和200系对应LGA 1151针脚6代7代CPU，300系对应就8代CPU。</p></li><li><p>高端主板和低端主板的差距在于做工用料，BIOS设计，功能性（超频）和拓展性（更多接口），<strong>但即使是最低端的主板基本该有的接口都会有</strong>，几乎不会出现低端主板没有显卡槽的情况。</p></li><li><p><strong>主板属于有功能性但没性能的组件，</strong>主板的高端低端并不会对CPU性能产生影响，也不会对显卡性能产生影响。所以主板不像CPU，GPU那样有性能天梯图。选购主板时可根据自己的预算，可以选择像华硕，技嘉，微星这样的一线大公司，也可以选择其他二线公司做的主板。如果非得加一个区别的话，或许<strong>大厂有预算更新BIOS系统</strong>能算一个吧。</p></li></ol><p>可以选择H系这样的入门主板，也可以选择B系这样的高性价比主板，只要主板本身质量过关，能适配上，接口够用，不需要超频，任何一款主板都行。考虑空间和散热可以选择大板，不考虑可以选择小板。<strong>高端主板和低端主板我们可以用高端轿车和普通轿车来类比。</strong></p></div><h2 id="六、-电源、显示器等"><a href="#六、-电源、显示器等" class="headerlink" title="六、 电源、显示器等"></a>六、 电源、显示器等</h2><div class="story post-story"><p>电源是一台电脑的供电中心。台式机的电源一般在机箱内部，呈方盒状，一端有多个电线出口。笔记本的电源由电池和充电器两部分组成，电池的用料差别不大，但充电器随着充电技术的发展一直在迭代，从最初的“板砖”型笨重的充电器，逐渐过渡到了现在的 Type-C接口的氮化镓便携充电器。</p><p>台式机电源的选配一般是把电脑内部的各组件额定功耗值相加，再留有一部分冗余功率后确定的。原则上<strong>不要让电脑的实际最大使用功率超过电源额定功率的70%</strong></p><p>显示器的选择是一个比较大的课题，今天就简单科普一些主流参数，大家可以作为参考。说到显示器，无非有<strong>尺寸、面板类型、分辨率、屏幕色域、响应时间、刷新率</strong>等参数，一般情况下，IPS面板，分辨率1080P以上，72%NTSC色域以上 / 85sRGB色域以上，响应时间小于等于6ms，刷新率60Hz以上的显示器几乎可以覆盖80%以上的使用需求。</p><p>除了电源和显示器，还有其他特殊需求的组件，如独立声卡、无线网卡等等，鉴于篇幅有限，这一次就不再一一讨论了。</p></div><h2 id="七、一点忠告"><a href="#七、一点忠告" class="headerlink" title="七、一点忠告"></a>七、一点忠告</h2><div class="story post-story"><p><strong>配置电脑存在“边际效应”，</strong>从低端升级到中端带来的效益是非常明显的，但如果从中端升级到高端带来的效益就会逐渐变小，这时你需要花很大的价钱才能提升少量的性能；</p><p><strong>配置电脑也存在“木桶效应”，</strong>一台电脑就是一个复杂的硬件系统，它的性能是所有硬件共同决定的，如果某一硬件的性能特别低，势必会影响其他硬件的发挥。</p><p>以上，就是装机那些事儿的所有内容，如果你读完还有这方面的疑问，欢迎留在下方的评论区，我们一起讨论~</p><blockquote><p>参考链接：</p><p>1.博客 - <a href="http://www.runningcheese.com/pc">装机不求人，10 分钟电脑配置挑选速成攻略</a></p><p>2.Intel - <a href="https://ark.intel.com/content/www/us/en/ark/products/series/202986/11th-generation-intel-core-i7-processors.html">11th Generation Intel® Core™ i7 Processors</a></p><p>3.知乎 - <a href="https://zhuanlan.zhihu.com/p/254736009">2021 CPU Intel、AMD选购推荐 笔记本（怎么选，性能怎么区分，快速入门）*一月更新</a></p><p>4.知乎 - <a href="https://zhuanlan.zhihu.com/p/75932522">硬盘有哪些分类？分别有什么作用</a></p></blockquote></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/20210311/2.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/20210311/2.png&quot; srcset=&quot;d</summary>
      
    
    
    
    <category term="科普" scheme="https://blog.amoswu.top/categories/%E7%A7%91%E6%99%AE/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="科普" scheme="https://blog.amoswu.top/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>Golang 环境配置小记</title>
    <link href="https://blog.amoswu.top/53c2.html"/>
    <id>https://blog.amoswu.top/53c2.html</id>
    <published>2021-03-08T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/20210309/1.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1"></p><blockquote><p>Go 编程语言是一个开源项目，它使程序员更具生产力。</p><p>Go 语言具有很强的表达能力，它简洁、清晰而高效。得益于其并发机制，用它编写的程序能够非常有效地利用多核与联网的计算机，其新颖的类型系统则使程序结构变得灵活而模块化。 Go 代码编译成机器码不仅非常迅速，还具有方便的垃圾收集机制和强大的运行时反射机制。 它是一个快速的、静态类型的编译型语言，感觉却像动态类型的解释型语言。</p><p>—— From Golang Blog</p></blockquote><h2 id="0x00-安装环境"><a href="#0x00-安装环境" class="headerlink" title="0x00. 安装环境"></a>0x00. 安装环境</h2><div class="story post-story"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS   - Windows 10 Home x64 20H2</span><br><span class="line">Mem  - 16GB</span><br></pre></td></tr></table></figure></div><h2 id="0x01-下载-amp-安装"><a href="#0x01-下载-amp-安装" class="headerlink" title="0x01.下载&amp;安装"></a>0x01.下载&amp;安装</h2><div class="story post-story"><h3 id="1-下载源"><a href="#1-下载源" class="headerlink" title="1. 下载源"></a>1. 下载源</h3><p>国内源 <code>https://studygolang.com/dl</code></p><p>国际源  <code>http://docs.studygolang.com/doc/install</code></p><h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h3><ol><li>下载完成后，双击 <code>.msi</code>安装包，安装到自己想要的路径；</li><li>在 cmd 中输入 <code>go version</code>，输出当前 golang 版本则安装成功。</li></ol><p><img src="https://img.amoswu.top/post/20210309/2.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309221913230"></p></div><h2 id="0x02-环境配置"><a href="#0x02-环境配置" class="headerlink" title="0x02. 环境配置"></a>0x02. 环境配置</h2><div class="story post-story"><h3 id="1-环境变量配置"><a href="#1-环境变量配置" class="headerlink" title="1. 环境变量配置"></a>1. 环境变量配置</h3><ol><li><p>新建 <code>GoPath</code>目录，在此目录下新建三个文件夹 <code>bin</code> <code>pkg</code> <code>src</code>；</p></li><li><p>新建系统环境变量  <code>GOBIN</code> <code>GOPATH</code> <code>GOROOT</code> ，它们对应的路径分别是： <code>GoPath目录下的bin文件夹</code> <code>GoPath路径</code> <code>Go安装路径</code>；</p><p><img src="https://img.amoswu.top/post/20210309/3.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309220721987"></p></li><li><p>添加 系统环境变量下 <code>Path</code> 的值为 <code>%GOROOT%bin</code></p><p><img src="https://img.amoswu.top/post/20210309/4.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309221459238"></p></li><li><p>重启，或管理员权限打开两个CMD，一个输入 <code>set PATH=C:</code>，另一个输入 <code>echo %PATH%</code>，在输出的路径中可以看到刚才的四个路径；</p></li><li><p>在 cmd 中输入 <code>go env</code> ，对应红框位置路径为刚刚设置的即可。</p><p><img src="https://img.amoswu.top/post/20210309/5.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309222202763"></p></li></ol><h3 id="2-配置镜像源"><a href="#2-配置镜像源" class="headerlink" title="2. 配置镜像源"></a>2. 配置镜像源</h3><p>在 cmd 中输入， <code>go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/</code></p><p><img src="https://img.amoswu.top/post/20210309/6.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309222339330"></p><h3 id="3-配置-GoLand"><a href="#3-配置-GoLand" class="headerlink" title="3. 配置 GoLand"></a>3. 配置 GoLand</h3><ol><li><p>安装后，打开<code>GoLand</code>并选择你的项目目录(或者是一个空目录，即将写代码的目录)，</p></li><li><p>依次点击<code>file -&gt; setting -&gt; Go</code>，点击<code>GOROOT</code>,选择你的 GoLand 位置所在，如下图<img src="https://img.amoswu.top/post/20210309/7.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309225349688"></p></li><li><p>点击 <code>GOPATH</code> ，选择你的项目目录，如下图</p><p><img src="https://img.amoswu.top/post/20210309/8.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309225444795"></p></li><li><p>在刚才创建的<code>src</code>目录下新建一个文件夹，可以是项目的名称，然后创建一个名为<code>main.go</code>的文件，代码如下</p><p><img src="https://img.amoswu.top/post/20210309/9.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/9.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309230218614"></p></li></ol><p>这里发生了一个小插曲，运行代码后发现编译器找不到包。</p><p><strong>原因分析：</strong><br>编译器没有去<code>GOPATH</code>下找包。</p><blockquote><p>gomod 和 gopath 两个包管理方案，并且相互不兼容，在 gopath 查找包，按照 goroot 和多 gopath 目录下 src/xxx 依次查找。在 gomod 下查找包，解析 go.mod 文件查找包，mod 包名就是包的前缀，里面的目录就后续路径了。在 gomod 模式下，查找包就不会去 gopath 查找，只是 gomod 包缓存在 gopath/pkg/mod 里面。</p><p>——From CSDN</p></blockquote><p><strong>解决方案：</strong></p><p>设置<code>GO111MODULE</code>为<code>off</code>即可。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> env -w GO111MODULE=off</span><br></pre></td></tr></table></figure><p><img src="https://img.amoswu.top/post/20210309/10.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210309/10.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210309230522762"></p><p>运行成功，配置结束~ ✌</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/20210309/1.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/20210309/1.png&quot; srcset=&quot;d</summary>
      
    
    
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="Golang" scheme="https://blog.amoswu.top/tags/Golang/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Markdown 从零开始</title>
    <link href="https://blog.amoswu.top/c456.html"/>
    <id>https://blog.amoswu.top/c456.html</id>
    <published>2021-03-03T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/20210304/X7sHT.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/X7sHT.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><blockquote><p><a href="http://zh.wikipedia.org/wiki/Markdown">Markdown</a> 是一种轻量级的「标记语言」，它的优点很多，自2004年被 John Gruber 发明以来，它已经发展成了世界上最受欢迎的标记语言之一。它也被越来越多的写作爱好者，撰稿者广泛使用。看到这里请不要被「标记」、「语言」所迷惑，Markdown 的语法十分简单。常用的标记符号也不超过十个，所以它的学习成本极低。</p></blockquote><h2 id="认识-Markdown"><a href="#认识-Markdown" class="headerlink" title="认识 Markdown"></a>认识 Markdown</h2><div class="story post-story"><p>正如前言所说，<strong>Markdown 是一种标记语言</strong>。所谓标记语言，字面意思可以理解为把我们写下的文字标记成统一的样式。说人话就是，它可以让使用者不用关注排版、样式、各种设置等繁琐操作，让使用者真正专注于书写。</p><p>既然是一种语言，它就会有特定的编辑器（专业术语也叫IDE）。Markdown 编辑器发展到现在已经不再是单一系统或单一形式的存在了。从 Windows 、Linux 再到 MacOS，从 Web、桌面客户端到手机 APP ，到处都有 Markdown 的身影，可以说是<strong>随时随地 Markdown</strong>。</p></div><h2 id="学习-Markdown-的理由"><a href="#学习-Markdown-的理由" class="headerlink" title="学习 Markdown 的理由"></a>学习 Markdown 的理由</h2><div class="story post-story"><p>当你可以通过按下界面中的按钮来设置文本格式时，为什么还要使用 Markdown 来书写呢？大家目前公认的使用 Markdown 而不是 word 类编辑器的原因有：</p><ul><li><strong>Markdown 无处不在。</strong>StackOverflow、CSDN、掘金、简书、GitBook、有道云笔记、V2EX、光谷社区、微信公众号等。主流的代码托管平台，如 GitHub、GitLab、BitBucket、Coding、Gitee 等等，都支持 Markdown 语法，很多开源项目的 README、开发文档、帮助文档、Wiki 等都用 Markdown 写作。大型互联网公司的内部文档管理系统，如阿里语雀、字节跳动飞书文档等等，都是使用 Markdown 作为书写载体进而达到知识的统一管理；</li><li><strong>Markdown 是纯文本可移植的。</strong>几乎可以使用任何应用程序打开包含 Markdown 格式的文本文件。如果你不喜欢当前使用的 Markdown 编辑器了，则可以将 Markdown 文件导入任意一个你喜欢的 Markdown 编辑器中；</li><li><strong>Markdown 是独立于平台的</strong>。你可以在运行任何操作系统的任何设备上创建 Markdown 格式的文本，无论是 PC 、移动 APP 甚至 Web 网页 ；</li><li><strong>Markdown 能适应未来的变化。</strong>即使你正在使用的编辑器将来会在某个时刻不能使用了，你仍然可以使用文本编辑器读取 Markdown 格式的文本。当涉及需要无限期保存的书籍、大学论文和其他里程碑式的文件时，这是一个重要的考虑因素；</li><li>······</li></ul><p>简单说，我个人认为使用 Markdown 写作的理由有五个：</p><ol><li><strong>简单易学</strong>——学习成本低，结合可视化编辑器十分钟就能上手；</li><li><strong>专注写作</strong>——可以让我只关心于写作内容；</li><li><strong>轻松导出</strong>——方便导出其他的文档格式；</li><li><strong>格式多样</strong>——导出格式多种多样111，如 PDF、HTML、Word、EPUB等等；</li><li><strong>方便管理</strong>——不必纠结于文档格式和保存形式，方便统一管理。</li></ol></div><h2 id="Markdown-的原理"><a href="#Markdown-的原理" class="headerlink" title="Markdown 的原理"></a>Markdown 的原理</h2><div class="story post-story"><p>在使用 Markdown 格式书写时，文本内容存储在带有 <code>.md</code> 或 <code>.markdown</code> 扩展名的纯文本文件中。那然后呢？你的 Markdown 格式的文件如何转换为 HTML 或可打印的文档呢？</p><p>简单来说，你需要一个能够处理 Markdown 文件的 <em>Markdown 应用程序</em>。有许多应用程序可供选择，从简单的脚本到类似于 Microsoft Word 的桌面应用程序。尽管它们在视觉上有所不同，但所有应用程序都执行相同的操作。像 <a href="https://markdown.com.cn/editor/">在线 Markdown 编辑器</a> 一样，它们都是将 Markdown 格式的文本转换为 HTML，以便可以在 Web 浏览器中显示。</p><p>Markdown 应用程序使用一种称为 <em>Markdown 处理器</em>（也通常称为“解析器”或“实现”）的东西将获取到的 Markdown 格式的文本输出为 HTML 格式。此时，可以在 Web 浏览器中查看你的文档，或者将其与样式表组合并打印。你可以在下图看到此过程的直观表示。</p><p><strong>注意：</strong> Markdown 应用程序和处理器是两个单独的组件。为了简洁起见，在下图中，我将它们组合为一个元素（即 “Markdown应用程序”）。</p><p><img src="https://img.amoswu.top/post/20210304/mvYzU.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/mvYzU.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div><h2 id="Markdown-编辑器推荐"><a href="#Markdown-编辑器推荐" class="headerlink" title="Markdown 编辑器推荐"></a>Markdown 编辑器推荐</h2><div class="story post-story"><p>对于一下编辑器，直接搜索引擎搜索安装即可。</p><h3 id="Windows-平台"><a href="#Windows-平台" class="headerlink" title="Windows 平台"></a>Windows 平台</h3><ul><li>Typora</li><li>Vditor</li><li>Vs Code</li><li>Atom</li><li>Vim</li><li>Sublime Text</li><li>Notepad++</li></ul><h3 id="Linux-平台"><a href="#Linux-平台" class="headerlink" title="Linux 平台"></a>Linux 平台</h3><ul><li>Typora</li><li>Vditor</li><li>UberWriter</li><li>GNU Emacs</li><li>Atom</li><li>Vim</li></ul><h3 id="MacOS-iOS"><a href="#MacOS-iOS" class="headerlink" title="MacOS | iOS"></a>MacOS | iOS</h3><ul><li>Mou</li><li>iA Writer</li><li>Ulysses</li><li>Writer Pro</li><li>Typora</li></ul><h3 id="Web-在线使用"><a href="#Web-在线使用" class="headerlink" title="Web 在线使用"></a>Web 在线使用</h3><ul><li>印象笔记</li><li>有道云笔记</li><li>语雀</li><li>StackEdit</li><li>Dillinger</li></ul><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><ul><li>麻雀记</li><li>纯纯写作</li><li>言叶</li><li>Markdrop</li></ul></div><h2 id="十分钟入门"><a href="#十分钟入门" class="headerlink" title="十分钟入门"></a>十分钟入门</h2><div class="story post-story"><blockquote><p>说明：</p><ul><li>教程验证环境——</li></ul><p><code>操作系统（OS） - Windows10 Home 20H2 x64</code>  </p><p><code>编辑器（IDE） - Typora v0.9.96</code></p><ul><li>教程全文遵循 Markdown <a href="https://github.github.com/gfm/?utm_source=ld246.com">GFM 语法规范</a>，如果和其他规范有差别，请以 Github 官方发布的规范为准。</li><li>以下为源代码模式写作教程，如果你认为此种方式学习仍然比较困难，我推荐你使用 <code>Typora</code> 这类编辑器，可以图形化操作，直接右击鼠标点击你想要写的格式即可。</li></ul></blockquote><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p><img src="https://img.amoswu.top/post/20210304/HuRYr.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/HuRYr.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>标题是每篇文章都需要也是最常用的格式，在 Markdown 中，如果一段文字被定义为标题，只要在这段文字前加 <code>#</code> 号即可。</p><p><code># 一级标题</code></p><p><code>## 二级标题</code></p><p><code>### 三级标题</code></p><p>以此类推，总共<strong>六级</strong>标题，建议在井号后加一个空格，这是最标准的 Markdown 语法。</p><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p><img src="https://img.amoswu.top/post/20210304/jQzBqpng" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/jQzBqpng" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>熟悉 HTML 的同学肯定知道有序列表与无序列表的区别，在 Markdown 下，列表的显示只需要在文字前加上 <code>-</code> 或 <code>*</code> 即可变为无序列表，有序列表则直接在文字前加 <code>1.</code> <code>2.</code> <code>3.</code> 符号要和文字之间加上一个字符的空格。</p><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p><img src="https://img.amoswu.top/post/20210304/bVpxN.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/bVpxN.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>如果你需要引用一小段别处的句子，那么就要用引用的格式。</p><p><code>&gt; 例如这样</code></p><p>只需要在文本前加入 <code>&gt;</code> 这种尖括号（大于号）即可</p><h3 id="图片与链接"><a href="#图片与链接" class="headerlink" title="图片与链接"></a>图片与链接</h3><p><img src="https://img.amoswu.top/post/20210304/NmFES.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/NmFES.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>插入链接与插入图片的语法很像，区别在一个 <code>!</code>号</p><p>插入图片的地址需要图床，这里推荐 <code>PicGo</code> + <code>Github / 七牛云</code>的形式，生成URL地址即可。</p><p>如果是内网，只需将图片和 Markdown 文件放到同一级目录后插入图片即可。</p><h3 id="粗体与斜体"><a href="#粗体与斜体" class="headerlink" title="粗体与斜体"></a>粗体与斜体</h3><p>Markdown 的粗体和斜体也非常简单，用两个 <code>*</code> 包含一段文本就是粗体的语法，用一个 <code>*</code> 包含一段文本就是斜体的语法。</p><p>例如：<strong>这里是粗体</strong> <em>这里是斜体</em></p><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p>表格是我觉得 Markdown 比较累人的地方，例子如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">| Tables        | Are           | Cool  |</span><br><span class="line"></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">| ------------- |:-------------:| -----:|</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">| col 3 is      | right-aligned | $1600 |</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">| col 2 is      | centered      |   $12 |</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">| zebra stripes | are neat      |    $1 |</span></span><br></pre></td></tr></table></figure><p>这种语法生成的表格如下：</p><table><thead><tr><th>Tables</th><th>Are</th><th>Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td>right-aligned</td><td>$1600</td></tr><tr><td>col 2 is</td><td>centered</td><td>$12</td></tr><tr><td>zebra stripes</td><td>are neat</td><td>$1</td></tr></tbody></table><h3 id="代码框"><a href="#代码框" class="headerlink" title="代码框"></a>代码框</h3><p><img src="https://img.amoswu.top/post/20210304/ao68S.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20210304/ao68S.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p><p>如果你是个程序猿，需要在文章里优雅的引用代码框，在 Markdown 下实现也非常简单，只需要用两个 <code>``</code>  把中间的代码包裹起来，如   <code>code</code>。编辑代码过程中，使用 <code>tab</code> 键即可缩进。</p><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>分割线的语法只需要另起一行，连续输入三个星号 <code>***</code> 即可。</p><hr><p>好了，看到这里你就可以安心使用 Markdown 简单书写你想写的一切东西了。不过，我还要提醒你的是，这只是其中最简单的部分，如果你想了解更多，欢迎查询相关资料进行进阶学习。</p><p>*<em>部分图片来源于网络</em></p><blockquote><p>参考内容：</p><p>[1] 少数派 - <a href="https://sspai.com/post/25137">认识与入门 Markdown</a></p><p>[2] 链滴- <a href="https://ld246.com/article/1583129520165">Markdown 使用指南 - 基础语法</a></p><p>[3] Daring Fireball-<a href="https://daringfireball.net/projects/markdown/">Daring Fireball: Markdown</a></p><p>[4] Github - <a href="https://github.github.com/gfm/">GitHub Flavored Markdown Spec</a></p></blockquote></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/20210304/X7sHT.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/20210304/X7sHT.png&quot; s</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.amoswu.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%95%99%E7%A8%8B/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="2021" scheme="https://blog.amoswu.top/tags/2021/"/>
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="Markdown" scheme="https://blog.amoswu.top/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>使用计算机有感</title>
    <link href="https://blog.amoswu.top/f5cf.html"/>
    <id>https://blog.amoswu.top/f5cf.html</id>
    <published>2020-11-19T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/DdEXq.png" class="lazyload" data-srcset="https://img.amoswu.top/post/DdEXq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><blockquote><p>最近在收听万维钢老师的《精英日课4》，听到“像高手一样使用你的计算机”这一节时，有一些感触，于是我将它发到了评论区，今天抽时间同步到我的博客。</p></blockquote><p>作为重度“折腾”计算机的爱好者，从高中开始收集各种计算机工具，至今也折腾了上千个工具了。听完万老师这一讲，下面我以Windows操作系统为例，分享几点我的计算机“折腾”经历和看法。</p><h3 id="1-用键盘，别用鼠标"><a href="#1-用键盘，别用鼠标" class="headerlink" title="1.用键盘，别用鼠标"></a>1.用键盘，别用鼠标</h3><p>这一点我非常赞同。用久了计算机之后，我越来越习惯于将双手放置于键盘之上，而不是一只手在键盘上一只手在鼠标上。在这里分享两点小技巧，希望能为同学们消除一些使用键盘的障碍。</p><h4 id="【启动软件】"><a href="#【启动软件】" class="headerlink" title="【启动软件】"></a>【启动软件】</h4><p>使用Wox + Everything 或按下 Window + R 输入“软件英文名.exe”，键盘搞定所有软件、工具的启动；</p><h4 id="【快捷键】"><a href="#【快捷键】" class="headerlink" title="【快捷键】"></a>【快捷键】</h4><p>除了文中提到的快捷键外，你还可以开拓更多的快捷键，如 Ctrl + A 全选，PageUp/PageDown 上一页/下一页，Home/End 移动到开头/结尾，F2 重命名，F11 浏览器全屏（看得到电子书时我都这样打开全屏）……当然这些远远不够，你还可以使用搜索引擎搜索关键字“软件名 + 快捷键 ”来解锁更多快捷键；</p><h3 id="2-把事情自动化"><a href="#2-把事情自动化" class="headerlink" title="2.把事情自动化"></a>2.把事情自动化</h3><p>这个部分想说的有很多，今天先给非计算机背景的同学分享两点实用小技巧。</p><h4 id="【1】在线收集表或许是你最简单的自动化工具。"><a href="#【1】在线收集表或许是你最简单的自动化工具。" class="headerlink" title="【1】在线收集表或许是你最简单的自动化工具。"></a>【1】在线收集表或许是你最简单的自动化工具。</h4><p>目前，我们工作和学习过程中难免会遇到收集各种各样信息的情况，我认为，任何信息的收集都能被规范化、自动化。使用腾讯文档、石墨文档、金数据等在线收集工具，他们已经将复杂的逻辑“折叠”进了简单的操作中，而我们只需转发一个链接。</p><h4 id="【2】Excel-公式或许是你数据处理的好帮手。"><a href="#【2】Excel-公式或许是你数据处理的好帮手。" class="headerlink" title="【2】Excel 公式或许是你数据处理的好帮手。"></a>【2】Excel 公式或许是你数据处理的好帮手。</h4><p>收集完信息，我们要处理的是许许多多的数据，难免需要用到Excel这样的工具，好在有公式可以帮我们剩下大量的重复一个动作的时间。还有，Python + Excel 会有更好的效果哦~</p><h3 id="3-建立自己的系统"><a href="#3-建立自己的系统" class="headerlink" title="3.建立自己的系统"></a>3.建立自己的系统</h3><p>这也是我近半年来一直研究的问题。目前，我的解决方案是：非敏感信息——幕布+语雀+印象笔记，每周同步至本地NAS；敏感信息——密码-bitwarden，云文件、文档-NextCloud，这两部分全部存放于本地NAS。文件分享——个人CDN、快传（文叔叔，奶牛快传等等）、天翼云盘。<br>另外，文档书写方面，我现在是重度Markdown爱好者，期待知识城邦能尽快支持Markdown啊~</p><h3 id="4-把所有东西放在“云”上"><a href="#4-把所有东西放在“云”上" class="headerlink" title="4.把所有东西放在“云”上"></a>4.把所有东西放在“云”上</h3><p>这里的云就有很多了，我用的最熟练的还是自建个人云（NAS）方案，能WebDav搞定的，绝不让信息流到其他地方。</p><h3 id="5-要折腾"><a href="#5-要折腾" class="headerlink" title="5.要折腾"></a>5.要折腾</h3><p>听到这里的时候，我非常感慨。大学期间，帮老师同学修电脑的时候，发现好多人都知道自己的电脑用起来不顺手，却又不去改造它。我的观点和万老师一样，要主动折腾，而不是被动使用。<br>这几年，我对计算机软硬件的折腾有很多，以至于一出现打开PPT不播放、播放视频不全屏、垃圾软件充斥整个电脑这些现象时就会引起我的不舒适。<br>同时，我也在改变这些现象时做了一些努力，如：在知识城邦以ppt的形式推荐好用的工具、在公司建立内网专用软件工具拓展库等等。</p><p>今天说的有点多，如果得到的同学们有这方面的疑惑，欢迎一起探讨~</p><blockquote><p>今天就说到这里，在最后我附上我的得到学生证。如果你也是“我辈中人”，很期待与你交流。</p></blockquote><p><img src="https://img.amoswu.top/post/8Yovz.png" class="lazyload" data-srcset="https://img.amoswu.top/post/8Yovz.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/DdEXq.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/DdEXq.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="随笔" scheme="https://blog.amoswu.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="新知识" scheme="https://blog.amoswu.top/tags/%E6%96%B0%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>浅谈互联网下载查毒</title>
    <link href="https://blog.amoswu.top/f455.html"/>
    <id>https://blog.amoswu.top/f455.html</id>
    <published>2020-09-15T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><div class="story post-story"><p>在互联网经过几十年的发展后，信息爆炸的时代真正地到来了。每天我们需要处理、识别、使用不同来源的信息，这些信息就像花园里自然生长的花草，有的长，有的短，有的营养丰富，有的剧毒无比。</p><p>网络病毒，就是致使美丽的“花草”中毒的根源。网络病毒，广义上被认为可以通过网络传播，同时破坏某些网络组件（服务器、客户端、交换机和路由器）的病毒；狭义上则被认为是局限于网络范围内的病毒。网络病毒多在微软开发并维护的<strong>Windows操作系统</strong>中传播。</p><p>网络病毒从不同角度有着不同的分类方式。从功能来分，可以分为<strong>木马病毒</strong>和<strong>蠕虫病毒</strong>。其中木马病毒属于一种后门程序，有的为了窃取用户隐私数据（如社交应用的账号密码、游戏账号等等），有的则为了破坏计算机及计算机内的数据，木马病毒危害能力没有蠕虫病毒来的迅猛。蠕虫病毒传播途径很广，它可以利用操作系统和程序的漏洞主动发起攻击，它还可以主动发送计算机的漏洞模块数据，从而感染局域网或者互联网内的所有计算机。从传播途径来分，有邮件型病毒和漏洞型病毒。</p><p>在简单了解了计算机病毒的来源、危害及传播途径之后，我们应该树立起“防毒”意识，主动查毒，发现一个上报一个。</p></div><h2 id="从下载文件谈起"><a href="#从下载文件谈起" class="headerlink" title="从下载文件谈起"></a>从下载文件谈起</h2><div class="story post-story"><p>身处中国，我们应感到荣幸。在国家层面很早就建立起了防火墙，也就是我们熟知的GFW，这样可以过滤大量的不良信息、有毒文件等等。在国内互联网飞速发展的背景下，我们国家涌现出了一大批优秀的安全技术攻坚团队，他们不断迭代自己的产品，并将其免费提供给大众使用，这些安全产品守护了每一台设备的安全。</p><p>今天，我就从一个具体而又常见的实例说一说如何避免下载文件带来的病毒威胁。</p><p>日常生活中，使用电脑下载互联网上的文件是我们最常用的操作之一。我们下载文件的习惯大概可以分为两类，一类是从安全软件自带的应用商店进行下载和安装，这些常见的应用商店有360软件中心、腾讯应用中心等等；另一类是通过网络地址下载，这里的地址种类大概有软件官网、下载站、网盘、即时通讯软件等等。 </p><h3 id="两类下载来源安全性如何？"><a href="#两类下载来源安全性如何？" class="headerlink" title="两类下载来源安全性如何？"></a>两类下载来源安全性如何？</h3><p>先说第一类，这类下载来源的大多数软件都是安全的，这里的大多数用数字表示约为99%。也就是说，正常下，没问题。</p><p>再说第二类，通过这类方式下载文件的原因其实有很多，比如电脑中没有第一类软件，第一类软件里没有要下载的文件，想下破解版软件，自己写的软件等等。这类来源相对复杂，这里面可以肯定的是<strong>只要是官网下载的100%是安全的</strong>，前提是找到真正的官网！！！</p><h3 id="如何提高下载来源的安全性？"><a href="#如何提高下载来源的安全性？" class="headerlink" title="如何提高下载来源的安全性？"></a>如何提高下载来源的安全性？</h3><p>说了这么多，还是存在很大一部分不安全的因素。读到这里，你可能心生疑问，这些因素难道不能一股脑解决吗？</p><p>可以解决。通过下载后的压缩包查毒这种方式，可以避免99%的互联网文件病毒。当然，查毒方式不能太单一， 必须集合了多个国家不同版本的病毒库才会有效。</p><h3 id="有什么具体推荐？"><a href="#有什么具体推荐？" class="headerlink" title="有什么具体推荐？"></a>有什么具体推荐？</h3><p>这里推荐两个在线查毒网站，操作都很简单，将下载好的压缩文件点击上传，等待片刻即可获得具有唯一MD5编号的查毒报告。</p><ol><li> <strong>Virustotal</strong> <a href="https://www.virustotal.com/">https://www.virustotal.com/</a> 全球最大的在线查毒网站，几十个国家不同团队的病毒库作为核心检测源，最大支持单次上传500M文件。</li></ol><p><img src="https://img.amoswu.top/post/jdR7G.png" class="lazyload" data-srcset="https://img.amoswu.top/post/jdR7G.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>左上角的0表示该文件威胁为0，安全。</p><ol start="2"><li><strong>腾讯哈勃</strong> <a href="https://habo.qq.com/">https://habo.qq.com/</a> 国内最好用的在线查毒网站，依托腾讯的强大数据处理能力，最大支持单词上传30M文件（普通用户）。</li></ol><p><img src="https://img.amoswu.top/post/pt8za.png" class="lazyload" data-srcset="https://img.amoswu.top/post/pt8za.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>未发现风险和轻度风险表示可以使用。</p></div><h2 id="网络安全无小事"><a href="#网络安全无小事" class="headerlink" title="网络安全无小事"></a>网络安全无小事</h2><div class="story post-story"><p>信息时代正扑面而来，网络安全是每一个使用互联网的人都应该守护的准则。如果你在使用互联网过程中发现病毒或疑似病毒，你可以通过一下平台提交你的发现。</p><ol><li>国家信息安全漏洞共享平台  <a href="https://www.cnvd.org.cn/">https://www.cnvd.org.cn/</a></li><li>金山网络-可疑文件上报  <a href="http://www.ijinshan.com/virus_report/">http://www.ijinshan.com/virus_report/</a></li><li>360杀毒-样本上报  <a href="http://sampleup.sd.360.cn/index.php">http://sampleup.sd.360.cn/index.php</a></li></ol><p>如果你想了解最新最全面的病毒资讯，可以访问如下链接获取。</p><ol><li>国家互联网应急中心  <a href="https://www.cert.org.cn/">https://www.cert.org.cn/</a></li><li>网络安全威胁信息共享平台 <a href="https://share.anva.org.cn/index">https://share.anva.org.cn/index</a></li></ol><blockquote><p>相关参考：</p><p>[1]. 百度百科-<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E7%97%85%E6%AF%92/2436546?fr=aladdin">网络病毒词条</a></p></blockquote></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;p&gt;在互联网经过几十年的发展后，信息爆炸的时代真正地到来了。每天我们需要处理、识别、</summary>
      
    
    
    
    <category term="科普" scheme="https://blog.amoswu.top/categories/%E7%A7%91%E6%99%AE/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
  </entry>
  
  <entry>
    <title>10年Qt开发经验总结</title>
    <link href="https://blog.amoswu.top/6ae9.html"/>
    <id>https://blog.amoswu.top/6ae9.html</id>
    <published>2020-09-08T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>这段时间，学习量陡升。遇到的问题也是五花八门，越来越多，有的在搜索引擎可以找到答案，有的则需要痛苦地耗费很长时间才能寻到一丝解决方法，还有的直接就找不到答案。这也让我更加坚定地要将自己所学所遇的知识、问题，所踩过的坑都要记录下来，利己也利他。<br>            废话不多说了，今天要带来的是一篇万字长文，是一位有着10多年 Qt 开发经验的大佬在他的博客、Github、Gitee上分享过的一篇经验贴。<br>我用了一天的时间将其中的经验重新排版、整理，对自己遇到过的坑也进行了相应的更新，形成此篇。后续我也会将遇到的新问题、新坑一并更新到这里。这个既是经验贴，也是避坑指南，愿读到此篇的你，Qt 编程道路一路平坦~</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最近一次更新时间：2020-09-09 18:00</span><br></pre></td></tr></table></figure><hr><blockquote><p> 原文地址 <a href="https://gitee.com/feiyangqingyun/qtkaifajingyan/blob/master/README.md">Gitee ‧ 飞扬青云</a></p><p> 最近更新  2020/09/04 09:07</p></blockquote><p>﻿###  一、开发经验总结</p><ol><li><p>当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。</p></li><li><p>定时器是个好东西，学会好使用它，有时候用<code>QTimer::singleShot</code>可以解决意想不到的问题。</p></li><li><p>打开 Qt Creator，在构建套件的环境中增加<code>MAKEFLAGS=-j8</code>，可以不用每次设置多线程编译。珍爱时间和生命。新版的 Qt Creator 已经默认就是<code>j8</code>。</p></li><li><p>如果你想顺利用 QtCreator 部署安卓程序，首先你要在 AndroidStudio 里面配置成功，把坑全部趟平。</p></li><li><p>很多时候找到 Qt 对应封装的方法后，记得多看看该函数的重载，多个参数的，你会发现不一样的世界，有时候会恍然大悟，原来Qt已经帮我们封装好了。</p></li><li><p>绘制平铺背景<code>QPainter::drawTiledPixmap</code>,绘制圆角矩形<code>QPainter::drawRoundedRect()</code>,而不是 <del>QPainter::drawRoundRect()</del> 。</p></li><li><p>Qt5 增强了很多安全性验证，如果出现<code>setGeometry: Unable to set geometry</code>，请将该控件的可见移到加入布局之后。</p></li></ol><ol start="8"><li><p>对 QLCDNumber 控件设置样式，需要将 QLCDNumber 的 <code>segmentstyle</code> 设置为 <code>flat</code> 。</p></li><li><p>使用弱属性机制，可以存储临时的值用于传递判断。可以通过<code>widget-&gt;dynamicPropertyNames()</code>列出所有弱属性名称，然后通过<code>widget-&gt;property(&quot;name&quot;)</code>取出对应的弱属性的值。</p></li><li><p>在开发时, 无论是出于维护的便捷性, 还是节省内存资源的考虑, 都应该有一个 qss 文件来存放所有的样式表, 而不应该将 setStyleSheet 写的到处都是。如果是初学阶段或者测试阶段可以直接 UI 上右键设置样式表，正式项目还是建议统一到一个 qss 样式表文件比较好，统一管理。</p></li><li><p>如果出现 <code>Z-order assignment: is not a valid widget.</code> 错误提示，用记事本打开对应的 ui 文件，找到<code>&lt;zorder&gt;&lt;/zorder&gt;</code> 为空的地方，删除即可。</p></li><li><p>善于利用 QComboBox 的 <code>addItem</code> 的第二个参数设置用户数据，可以实现很多效果，使用<code>itemData</code> 取出来。</p></li><li><p>如果用了 webengine 模块，发布程序的时候要带上 <code>QtWebEngineProcess.exe</code> + <code>translations</code>文件夹 + <code>resources</code>文件夹。</p></li><li><p>默认 Qt 是一个窗体一个句柄，如果要让每个控件都拥有独立的句柄，设置下 <code>a.setAttribute(Qt::AA_NativeWindows)</code> 。</p></li><li><p>可以对整体的指示器设置样式，例如 <code>*::down-arrow,*::menu-indicator&#123;&#125;  *::up-arrow:disabled</code>,<code>*::up-arrow:off&#123;&#125;</code>。</p></li><li><p>嵌入式 linux 运行 Qt 程序  Qt4 写法：<code>./HelloQt -qws &amp;</code>   Qt5写法：<code>./HelloQt --platform xcb</code>。</p></li><li><p>Qt Creator 软件的配置文件存放在：<code>C:\Users\Administrator\AppData\Roaming\QtProject</code>，有时候如果发现出问题了，将这个文件夹删除后打开 Qt Creator 自动重新生成即可。</p></li><li><p>QMediaPlayer 是个壳，依赖本地解码器，视频这块默认基本上就播放个 MP4 ，如果要支持其他格式需要下载 <code>k-lite</code> 或者 <code>LAV Filters</code> 安装即可（WIN上，其他系统上自行搜索）。如果需要做功能强劲的播放器，初学者建议用 <code>vlc</code>、<code>mpv</code>，终极大法用 <code>ffmpeg</code>。</p></li><li><p>获取标题栏高度：<code>style()-&gt;pixelMetric(QStyle::PM_TitleBarHeight);</code> PM_TitleBarHeight 点进去你会发现新大陆。</p></li><li><p>清空数据表并重置自增ID，<code>sql = truncate table table_name</code>。</p></li><li><p>如果运行程序出现 <code>Fault tolerant heap shim applied to current process. This is usually due to previous crashes.</code> 错误。</p><blockquote><p><strong>办法</strong>：打开注册表，找到<code>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows  NT\CurrentVersion\AppCompatFlags\Layers\</code>，选中<code>Layers</code>键值，从右侧列表中删除自己的那个程序路径即可。</p></blockquote></li><li><p>Qt 内置了 <code>QFormLayout</code> 表单布局用于自动生成标签 + 输入框的组合的表单界面。</p></li><li><p>qml 播放视频在 linux 需要安装 libpulse-dev , <code>sudo apt-get install libpulse-dev</code>。</p></li><li><p>可以直接继承 QSqlQueryModel 实现自定义的 QueryModel ，比如某一列字体颜色，占位符，其他样式等，重写 <code>QVariant CustomSqlModel::data(const QModelIndex &amp;index, int role) const</code> 。</p></li><li><p>QPushButton 左对齐文字，需要设置样式表 <code>QPushButton&#123;text-align:left;&#125;</code> 。</p></li><li><p>多种预定义变量 <code>#if (defined webkit) || (defined webengine)</code>，去掉生成空的debug 和 release 目录 <code>CONFIG -= debug_and_release</code>。</p></li><li><p>新版的 Qtcreator 增强了语法检查，会弹出很多警告提示等，可以在插件列表中关闭 clang 打头的几个即可，<code>Help &gt;&gt; About Plugins</code> 。也可以设置代码检查级别，<code>Tools &gt;&gt; Options  &gt;&gt; C++  &gt;&gt; Code Model</code> 。</p></li><li><p>如果需要指定无边框窗体，但是又需要保留操作系统的边框特性，可以自由拉伸边框，可以使用 <code>setWindowFlags(Qt::CustomizeWindowHint)</code> 。</p></li><li><p>有时候在界面上加了弹簧，需要动态改变弹簧对应的拉伸策略，对应方法为 <code>changeSize</code>，很多人会选择使用 set 开头去找，找不到的。</p></li><li><p>在使用 QFile 的过程中，不建议频繁的打开文件写入然后再关闭文件，比如：间隔 5ms 输出日志，IO性能瓶颈很大，这种情况建议先打开文件不要关闭，等待合适的时机，可以在析构函数中或者日期变了需要重新变换日志文件的时候关闭文件。不然短时间内大量的打开关闭文件会很卡，文件越大越卡。</p></li><li><p>如果程序打包好以后弹出提示 <code>This application failed to start because it could not find or load the Qt platform plugin</code> 一般都是因为 platforms 插件目录未打包或者打包错了的原因导致的。</p></li><li><p>非常不建议 tr 中包含中文，尽管现在的新版Qt支持中文到其他语言的翻译，但是很不规范，也不知道 TMD 是谁教的，tr的本意是包含英文，然后翻译到其他语言比如中文，现在大量的初学者滥用 tr ，<strong>如果没有翻译的需求，禁用 tr ，tr 需要开销的，Qt默认会认为他需要翻译，会额外进行特殊处理</strong>。</p><blockquote><p>建议进行中文兼容时使用如下代码：</p><ol><li><code>QString s = QString::fromUtf8(&quot;这是一个 UTF-8 的字符串 &quot;);</code>；</li><li><code>QString s = QStringLiteral(&quot;这是一个 UTF-8 的字符串 &quot;);</code>。</li></ol></blockquote></li><li><p>很多人 Qt 和 Qt Creator 傻傻分不清楚，经常问 Qt 什么版本结果发一个 Qt Creator 的版本过来，Qt Creator 是使用 Qt 编写的集成开发环境 IDE ，和宇宙第一的 Visual Studio 一样，他可以是 msvc 编译器的（ WIN 对应的 Qt 集成安装环境中自带的 Qt Cerator 是 msvc 的），也可以是 mingw 编译的，还可以是gcc的。如果是自定义控件插件，需要集成到Qt Creator中，必须保证该插件的动态库文件（dll或者so等文件）对应的编译器和Qt版本以及位数和Qt Creator的版本完全一致才行，否则基本不大可能集成进去。特别注意的是Qt集成环境安装包中的Qt版本和Qt Creator版本未必完全一致，必须擦亮眼睛看清楚，有些是完全一致的。</p></li><li><p>超过两处相同处理的代码，建议单独写成函数。代码尽量规范精简，比如 <code>if(a == 123)</code> 要写成 <code>if (123 == a)</code>，值在前面，再比如 <code>if (ok == true)</code> 要写成 <code>if (ok)</code>，<code>if (ok == false)</code> 要写成 <code>if (!ok)</code>等。</p></li><li><p>很多人问Qt嵌入式平台用哪个好，这里统一回答（当前时间节点2018年）：<code>imx6 + 335x</code>比较稳定，性能高就用 <code>RK3288 RK3399</code>，便宜的话就用<code>全志H3</code>，玩一玩可以用<code>树莓派、香橙派</code>。</p></li><li><p>对于大段的注释代码，建议用 <code>#if 0 #endif</code> 将代码块包含起来，而不是将该段代码选中然后全部 // ，下次要打开这段代码的话，又需要重新选中一次取消，如果采用的是 #if 0则只要把0改成1即可，效率大大提升。</p></li><li><p>Qt打包发布，有很多办法，Qt5 以后提供了打包工具 <code>windeployqt</code>（ linux上为<code>linuxdeployqt</code>，mac上为 <code>macdeployqt</code> ）可以很方便的将应用程序打包，使用下来发现也不是万能的，有时候会多打包一些没有依赖的文件，有时候又会忘记打包一些插件尤其是用了 qml 的情况下，而且不能识别第三方库，比如程序依赖 ffmpeg ，则对应的库需要自行拷贝，终极大法就是将你的可执行文件复制到Qt安装目录下的 bin 目录，然后整个一起打包，挨个删除不大可能依赖的组件，直到删到正常运行为止。</p></li><li><p>Qt中的动画，底层用的是 <code>QElapsedTimer</code> 定时器来完成处理，比如产生一些指定规则算法的数据，然后对属性进行处理。</p></li><li><p>不要把 d 指针看的很玄乎，其实就是在类的实现文件定义了一个私有类，用来存放局部变量，个人建议在做一些小项目时，没有太大必要引入这种机制，会降低代码可读性，增加复杂性，新手接受项目后会看的很懵逼。</p></li><li><p>很多人在绘制的时候，设置画笔以为就只可以设置个单调的颜色，其实<code>QPen</code>还可以设置<code>brush</code>，这样灵活性就提高不知道多少倍，比如设置 QPen 的 brush 以后，可以使用各种渐变，比如绘制渐变颜色的进度条和文字等，而不再是单调的一种颜色。</p><blockquote><p>示例：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">QPen pen;  <span class="comment">// creates a default pen</span></span><br><span class="line"></span><br><span class="line">pen.<span class="built_in">setStyle</span>(Qt::DashDotLine);</span><br><span class="line">pen.<span class="built_in">setWidth</span>(<span class="number">3</span>);</span><br><span class="line">pen.<span class="built_in">setBrush</span>(Qt::green);</span><br><span class="line">pen.<span class="built_in">setCapStyle</span>(Qt::RoundCap);</span><br><span class="line">pen.<span class="built_in">setJoinStyle</span>(Qt::RoundJoin);</span><br><span class="line"></span><br><span class="line">painter.<span class="built_in">setPen</span>(pen);</span><br></pre></td></tr></table></figure></blockquote></li><li><p>很多控件都带有 viewport ，比如 QTextEdit / QTableWidget / QScrollArea，有时候对这些控件直接处理的时候发现不起作用，需要对其 <code>viewport()</code> 设置才行，比如设置滚动条区域背景透明，需要使用 <code>scrollArea-&gt;viewport()-&gt;setStyleSheet(&quot;background-color:transparent;&quot;);</code> 而不是 <code>scrollArea-&gt;setStyleSheet(&quot;QScrollArea&#123;background-color:transparent;&#125;&quot;);</code> 。</p></li><li><p>有时候设置了鼠标跟踪 setMouseTracking 为真，如果该窗体上面还有其他控件，当鼠标移到其他控件上面的时候，父类的鼠标移动事件MouseMove识别不到了，此时需要用到HoverMove 事件，需要先设置 <code>setAttribute(Qt::WA_Hover, true);</code> 。</p></li><li><p>在我们使用 QList、QStringList、QByteArray 等链表或者数组的过程中，如果只需要取值，而不是赋值，强烈建议使用 <code>at()</code> 取值而不是 <code>[]</code> 操作符，在官方书籍<strong>《C++ GUI Qt 4编程（第二版）》</strong>的书中有特别的强调说明，此教材的原作者据说是Qt开发的核心人员编写的，所以还是比较权威，至于使用 at() 与使用 [] 操作符速度效率的比较，网上也有网友做过此类对比。</p><blockquote><p>原文在书的212页，这样描述的：</p><p>Qt对所有的容器和许多其他类都使用隐含共享，隐含共享是Qt对不希望修改的数据决不进行复制的保证，为了使隐含共享的作用发挥得最好，可以采用两个新的编程习惯。第一种习惯是对于一个（非常量的）向量或者列表进行只读存取时，使用 at() 函数而不用 [] 操作符，因为Qt的容器类不能辨别 [] 操作符是否将出现在一个赋值的左边还是右边，他假设最坏的情况出现并且强制执行深层赋值，而 at() 函数则不被允许出现在一个赋值的左边。</p></blockquote></li><li><p>安全的删除 Qt 的对象类，强烈建议使用 <code>deleteLater</code> 而不是 <code>delete</code> ，因为deleteLater会选择在合适的时机进行释放，而delete会立即释放，很可能会出错崩溃。如果要批量删除对象集合，可以用 <code>qDeleteAll</code> ，比如 <code>qDeleteAll(btns)</code> 。</p></li><li><p>在 QTableView 控件中，如果需要自定义的列按钮、复选框、下拉框等其他模式显示，可以采用自定义委托 QItemDelegate 来实现，如果需要禁用某列，则在自定义委托的重载createEditor 函数返回0即可。自定义委托对应的控件在进入编辑状态的时候出现，如果想一直出现，则需要重载paint函数用 <code>drawPrimitive</code> 或者 <code>drawControl</code> 来绘制。</p></li><li><p>将 <code>QApplication::style()</code> 对应的 <code>drawPrimitive</code> 、<code>drawControl</code>、<code>drawItemText</code>、<code>drawItemPixmap</code>等几个方法用熟悉了，再结合<code>QStyleOption</code>属性，可以玩转各种自定义委托，还可以直接使用paint函数中的painter进行各种绘制，各种牛逼的表格、树状列表、下拉框等，绝对屌炸天。<code>QApplication::style()-&gt;drawControl</code> 的第4个参数如果不设置，则绘制出来的控件不会应用样式表。</p></li><li><p>心中有坐标，万物皆 painter，强烈建议在学习自定义控件绘制的时候，将 <code>qpainter.h</code> 头文件中的函数全部看一遍、试一遍、理解一遍，这里边包含了所有Qt内置的绘制的接口，对应的参数都试一遍，你会发现很多新大陆，会大大激发你的绘制的兴趣，犹如神笔马良一般，策马崩腾遨游代码绘制的世界。</p></li><li><p>理论上串口和网络收发数据都是默认异步的，操作系统自动调度，完全不会卡住界面，网上那些说收发数据卡住界面主线程的都是扯几把蛋，真正的耗时是在运算以及运算后的处理，而不是收发数据，在一些小数据量运算处理的项目中，一般不建议动用线程去处理，线程需要调度开销的，不要什么东西都往线程里边扔，线程不是万能的。只有当真正需要将一些很耗时的操作比如编码解码等，才需要移到线程处理。</p></li><li><p>在构造函数中获取控件的宽高很可能是不正确的，需要在控件首次显示以后再获取才是正确的，控件是在首次显示以后才会设置好正确的宽高值，记住是在首次显示以后，而不是构造函数或者程序启动好以后，如果程序启动好以后有些容器控件比如 QTabWidget 中的没有显示的页面的控件，你去获取宽高很可能也是不正确的，万无一失的办法就是首次显示以后去获取。</p></li><li><p>数据库处理一般建议在主线程，如果非要在其他线程，务必记得打开数据库也要在那个线程，即在那个线程使用数据库就在那个线程打开，不能打开数据库在主线程，执行 sql 在子线程，很可能出问题。</p></li><li><p>Qt中的 QString 和 const char * 之间转换，最好用 toStdString().c_str() 而不是 toLocal8Bit().constData() ，比如在 setProperty 中如果用后者，字符串中文就会不正确，英文正常。</p></li><li><p>Qt 的信号槽机制非常牛逼，也是 Qt 的独特的核心功能之一，有时候我们在很多窗体中传递信号来实现更新或者处理，如果窗体层级比较多，比如窗体 A 的父类是窗体 B ，窗体 B 的父类是窗体 C ，窗体 C 有个子窗体 D ，如果窗体 A 一个信号要传递给窗体 D ，问题来了，必须先经过窗体 B 中转到窗体 C 再到窗体 D 才行，这样的话各种信号关联信号的 connect 会非常多而且管理起来比较乱，可以考虑增加一个全局的单例类 AppEvent ，公共的信号放这里，然后窗体A对应信号绑定到 AppEvent ，窗体 D 绑定 AppEvent 的信号到对应的槽函数即可，干净清爽整洁。</p></li><li><p>QTextEdit 右键菜单默认英文的，如果想要中文显示，加载 widgets.qm 文件即可，一个 Qt 程序中可以安装多个翻译文件，不冲突。</p></li><li><p>Qt 中有个全局的焦点切换信号 <code>focusChanged</code> ，可以用它做自定义的输入法。Qt4中默认会安装输入法上下文，比如在main函数打印 <code>a.inputContext</code> 会显示值，这个默认安装的输入法上下文，会拦截两个牛逼的信号 <code>QEvent::RequestSoftwareInputPanel</code> 和<code>QEvent::CloseSoftwareInputPanel</code> ，以至于就算你安装了全局的事件过滤器依然识别不到这两个信号，你只需要在 main 函数执行 <code>a.setInputContext(0)</code> 即可，意思是安装输入法上下文为空。</p></li><li><p>在 Qt5.10 以后，表格控件 QTableWidget 或者 <code>QTableView</code> 的默认最小列宽改成了<code>15</code>，以前的版本是 0 ，所以在新版的qt中，如果设置表格的列宽过小，不会应用，取的是最小的列宽。所以如果要设置更小的列宽需要重新设置 <code>ui-&gt;tableView-&gt;horizontalHeader()-&gt;setMinimumSectionSize(0);</code>。</p></li><li><p>Qt 支持所有的界面控件比如 <code>QPushButton</code>、<code>QLineEdit</code> 自动关联 on_控件名_信号(参数) 信号槽，比如按钮的单击信号 on_pushButton_clicked()，然后直接实现槽函数即可。</p></li><li><p><code>setPixmap</code> 是最糟糕的贴图方式，一般只用来简单的不是很频繁的贴图，频繁的建议<code>painter</code> 绘制，默认双缓冲，在高级点用 <code>opengl</code> 绘制，利用 GPU 。</p></li><li><p>如果需要在尺寸改变的时候不重绘窗体，则设置属性即可 <code>this-&gt;setAttribute(Qt::WA_StaticContents, true);</code> 这样可以避免可以避免对已经显示区域的重新绘制。</p></li><li><p>默认程序中获取焦点以后会有虚边框，如果看着觉得碍眼不舒服可以去掉，设置样式即可：<code>setStyleSheet(&quot;*&#123;outline:0px;&#125;&quot;);</code>。</p></li><li><p>从 Qt4 转到 Qt5 ，有些类的方法已经废弃或者过时了，如果想要在 Qt5 中启用 Qt4 的方法，比如 QHeadView 的 setMovable，可以在你的 <code>pro</code> 或者 <code>pri</code> 文件中加上一行即可：<code>DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0</code> 。</p></li><li><p><strong>QString 的 <code>replace</code> 函数会改变原字符串，切记，他在返回替换后的新字符串的同时也会改变原字符串，我的乖乖！</strong></p></li><li><p>QGraphicsEffect 类的相关效果很炫，可以实现很多效果比如透明、渐变、阴影等，但是该<strong>类很耗 CPU</strong>，如果不是特别需要一般不建议用，就算用也是要用在该部件后期不会发生频繁绘制的场景，不然会让你哭晕在厕所。</p></li><li><p>巧用 <code>QMetaObject::invokeMethod</code> 方法可以实现很多效果，包括同步和异步执行，比如有个应用场景是在回调中，需要异步调用一个public函数，如果直接调用的话会发现不成功，此时需要使用 <code>QMetaObject::invokeMethod(obj, &quot;fun&quot;, Qt::QueuedConnection);</code> 这种方式来就可以。<code>invokeMethod</code> 函数有很多重载参数，可以传入返回值和执行方法的参数等。</p></li><li><p>Qt5 中的信号是 public 的，可以在需要的地方直接 emit 即可，而在Qt4中信号是 protected的，不能直接使用，需要定义一个 public 函数来 emit 。</p></li><li><p>Qt5.15 版本开始官方不再提供安装包，只提供源码，可以自行编译或者在线安装，估计每次编译各种版本太麻烦，更多的是为了统计收集用户使用信息比如通过在线安装，后期可能会逐步加大商业化力度。</p></li><li><p>很多初学者甚至几年工作经验的人，对多线程有很深的误解和滥用，尤其是在串口和网络通信这块，什么都往多线程里面丢，一旦遇到界面卡，就把数据收发啥的都搞到多线程里面去，殊不知绝大部分时候那根本没啥用，因为没找到出问题的根源。</p></li></ol><ul><li>如果你没有使用 wait*** 函数的话，大部分的界面卡都出在数据处理和展示中，比如传过来的是一张图片的数据，你需要将这些数据转成图片，这个肯定是耗时的；</li><li>还有就是就收到的数据曲线绘制出来，如果过于频繁或者间隔过短，肯定会给 UI 造成很大的压力的，最好的办法是解决如何不要频繁绘制 UI 比如合并数据一起绘制等；</li><li>如果是因为绘制 UI 造成的卡，那多线程也是没啥用的，因为 UI 只能在主线程；</li><li>串口和网络的数据收发默认都是异步的，由操作系统调度的，如果数据处理复杂而且数据量大，你要做的是<strong>将数据处理放到多线程中</strong>；</li><li>如果没有严格的数据同步需求，根本不需要调用 wait*** 之类的函数来立即发送和接收数据，实际需求中大部分的应用场景其实异步收发数据就足够了；</li><li>有严格数据同步需求的场景还是放到多线程会好一些，不然你 wait*** 就卡在那边了；</li><li>多线程是需要占用系统资源的，理论上来说，如果线程数量超过了 CPU 的核心数量，其实多线程调度可能花费的时间更多，各位在使用过程中要权衡利弊；</li></ul><ol start="67"><li>MSVC编译器的选择说明</li></ol><ul><li>如果是32位的 Qt 则编译器选择 x86 开头的</li><li>如果是64位的 Qt 则编译器选择 amd64 开头的</li><li>具体是看安装的 Qt 构建套件版本以及目标运行平台的系统位数和架构</li><li>一般现在的电脑默认以64位的居多，选择 amd64 即可</li><li>如果用户需要兼容32位的系统则建议选择32位的 Qt ，这样即可在32位也可以在64位系统运行</li><li>诸葛大佬补充：x86 / x64 都是编译环境和运行环境相同，没有或。带下划线的就是交叉编译，前面是编译环境，后面是运行环境。</li></ul><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>x86</td><td>32/64位系统上编译在32/64位系统上运行</td></tr><tr><td>x86_amd64</td><td>32/64位系统上编译在64位系统上运行</td></tr><tr><td>x86_arm</td><td>32/64位系统上编译在arm系统上运行</td></tr><tr><td>amd64</td><td>64位系统上编译在64位系统上运行</td></tr><tr><td>amd64_x86</td><td>64位系统上编译在32/64位系统上运行</td></tr><tr><td>amd64_arm</td><td>64位系统上编译在arm系统上运行</td></tr></tbody></table><ol start="68"><li><p>Qt默认不支持大资源文件，比如添加了字体文件，需要 pro 文件开启 <code>CONFIG += resources_big</code> 。</p></li><li><p>运行文件附带调试输出窗口 <code>CONFIG += console pro</code>。</p></li><li><p>可以在 pro 文件中写上标记版本号 + ico 图标（Qt5才支持）</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VERSION  = <span class="number">2020.10</span><span class="number">.25</span></span><br><span class="line">RC_ICONS = main0.ico</span><br></pre></td></tr></table></figure><ol start="71"><li>管理员运行程序，限定在MSVC编译器。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QMAKE_LFLAGS += /MANIFESTUAC:<span class="string">&quot;level=&#x27;requireAdministrator&#x27; uiAccess=&#x27;false&#x27;&quot;</span> #以管理员运行</span><br><span class="line">QMAKE_LFLAGS += /SUBSYSTEM:WINDOWS,<span class="string">&quot;5.01&quot;</span> #VS2013 在XP运行</span><br></pre></td></tr></table></figure><ol start="72"><li>移除旧的样式</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//移除原有样式</span></span><br><span class="line"><span class="built_in">style</span>()-&gt;<span class="built_in">unpolish</span>(ui-&gt;btn);</span><br><span class="line"><span class="comment">//重新设置新的该控件的样式。</span></span><br><span class="line"><span class="built_in">style</span>()-&gt;<span class="built_in">polish</span>(ui-&gt;btn);</span><br></pre></td></tr></table></figure><ol start="73"><li>获取类的属性</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> QMetaObject *metaobject = object-&gt;<span class="built_in">metaObject</span>();</span><br><span class="line"><span class="type">int</span> count = metaobject-&gt;<span class="built_in">propertyCount</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; count; ++i) &#123;</span><br><span class="line">    QMetaProperty metaproperty = metaobject-&gt;<span class="built_in">property</span>(i);</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name = metaproperty.<span class="built_in">name</span>();</span><br><span class="line">    QVariant value = object-&gt;<span class="built_in">property</span>(name);</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; name &lt;&lt; value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="74"><li>Qt内置图标封装在QStyle中，大概七十多个图标，可以直接拿来用。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SP_TitleBarMenuButton,</span><br><span class="line">SP_TitleBarMinButton,</span><br><span class="line">SP_TitleBarMaxButton,</span><br><span class="line">SP_TitleBarCloseButton,</span><br><span class="line">SP_MessageBoxInformation,</span><br><span class="line">SP_MessageBoxWarning,</span><br><span class="line">SP_MessageBoxCritical,</span><br><span class="line">SP_MessageBoxQuestion,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="75"><li>根据操作系统位数判断加载</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">win32 &#123;</span><br><span class="line">    <span class="built_in">contains</span>(DEFINES, WIN64) &#123; DESTDIR = $$&#123;PWD&#125;/../../bin64</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; DESTDIR = $$&#123;PWD&#125;/../../bin32 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="76"><li>可以将控件 A 添加到布局，然后控件 B 设置该布局，这种灵活性大大提高了控件的组合度，比如可以在文本框左侧右侧增加一个搜索按钮，按钮设置图标即可。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton *btn = <span class="keyword">new</span> QPushButton;</span><br><span class="line">btn-&gt;<span class="built_in">resize</span>(<span class="number">30</span>, ui-&gt;lineEdit-&gt;<span class="built_in">height</span>());</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> <span class="built_in">QHBoxLayout</span>(ui-&gt;lineEdit);</span><br><span class="line">layout-&gt;<span class="built_in">setMargin</span>(<span class="number">0</span>);</span><br><span class="line">layout-&gt;<span class="built_in">addStretch</span>();</span><br><span class="line">layout-&gt;<span class="built_in">addWidget</span>(btn);</span><br></pre></td></tr></table></figure><ol start="77"><li>巧妙的使用 <code>findChildren</code> 可以查找该控件下的所有子控件。<code>findChild</code> 为查找单个。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找指定类名objectName的控件</span></span><br><span class="line">QList&lt;QWidget *&gt; widgets = parentWidget.<span class="built_in">findChildren</span>&lt;QWidget *&gt;(<span class="string">&quot;widgetname&quot;</span>);</span><br><span class="line"><span class="comment">//查找所有QPushButton</span></span><br><span class="line">QList&lt;QPushButton *&gt; allPButtons = parentWidget.<span class="built_in">findChildren</span>&lt;QPushButton *&gt;();</span><br><span class="line"><span class="comment">//查找一级子控件,不然会一直遍历所有子控件</span></span><br><span class="line">QList&lt;QPushButton *&gt; childButtons = parentWidget.<span class="built_in">findChildren</span>&lt;QPushButton *&gt;(<span class="built_in">QString</span>(), Qt::FindDirectChildrenOnly);</span><br></pre></td></tr></table></figure><ol start="78"><li>巧妙的使用 <code>inherits</code> 判断是否属于某种类。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QTimer *timer = <span class="keyword">new</span> QTimer;         <span class="comment">// QTimer inherits QObject</span></span><br><span class="line">timer-&gt;<span class="built_in">inherits</span>(<span class="string">&quot;QTimer&quot;</span>);          <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;<span class="built_in">inherits</span>(<span class="string">&quot;QObject&quot;</span>);         <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;<span class="built_in">inherits</span>(<span class="string">&quot;QAbstractButton&quot;</span>); <span class="comment">// returns false</span></span><br></pre></td></tr></table></figure><ol start="79"><li>Qt + Android 防止程序被关闭。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> defined(Q_OS_ANDROID)</span></span><br><span class="line"><span class="function">QAndroidService <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"><span class="keyword">return</span> a.<span class="built_in">exec</span>()</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">QApplication <span class="built_in">a</span>(argc, argv);</span><br><span class="line"><span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><ol start="80"><li>可以执行位置设置背景图片。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QMainWindow &gt; .QWidget &#123;</span><br><span class="line">    background-color: gainsboro;</span><br><span class="line">    background-image: <span class="built_in">url</span>(:/images/pagefold.png);</span><br><span class="line">    background-position: top right;</span><br><span class="line">    background-repeat: no-repeat</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="81"><li>判断编译器类型、编译器版本、操作系统。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GCC编译器</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __GNUC__</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __GNUC__ &gt;= 3 <span class="comment">// GCC3.0以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//MSVC编译器</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _MSC_VER</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1000 <span class="comment">// VC++4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1100 <span class="comment">// VC++5.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1200 <span class="comment">// VC++6.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1300 <span class="comment">// VC2003以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1400 <span class="comment">// VC2005以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1500 <span class="comment">// VC2008以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1600 <span class="comment">// VC2010以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1700 <span class="comment">// VC2012以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1800 <span class="comment">// VC2013以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> _MSC_VER &gt;=1900 <span class="comment">// VC2015以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Borland C++</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __BORLANDC__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Cygwin</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __CYGWIN__</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __CYGWIN32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//mingw</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __MINGW32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//windows</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WIN32    <span class="comment">//32bit</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WIN64    <span class="comment">//64bit</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WINDOWS     <span class="comment">//图形界面程序</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _CONSOLE     <span class="comment">//控制台程序</span></span></span><br><span class="line"><span class="comment">//Windows（95/98/Me/NT/2000/XP/Vista）和Windows CE都定义了</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x030a)     <span class="comment">// Windows 3.1以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x0400)     <span class="comment">// Windows 95/NT4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x0410)     <span class="comment">// Windows 98以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x0500)     <span class="comment">// Windows Me/2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x0501)     <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (WINVER &gt;= 0x0600)     <span class="comment">// Windows Vista以上</span></span></span><br><span class="line"><span class="comment">//_WIN32_WINNT 内核版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (_WIN32_WINNT &gt;= 0x0500) <span class="comment">// Windows 2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (_WIN32_WINNT &gt;= 0x0501) <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (_WIN32_WINNT &gt;= 0x0600) <span class="comment">// Windows Vista以上</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="82"><li>在 pro 中判断 Qt 版本及构建套件位数</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#打印版本信息</span><br><span class="line"><span class="built_in">message</span>(qt version: $$QT_VERSION)</span><br><span class="line">#判断当前qt版本号</span><br><span class="line">QT_VERSION = $$[QT_VERSION]</span><br><span class="line">QT_VERSION = $$<span class="built_in">split</span>(QT_VERSION, <span class="string">&quot;.&quot;</span>)</span><br><span class="line">QT_VER_MAJ = $$<span class="built_in">member</span>(QT_VERSION, <span class="number">0</span>)</span><br><span class="line">QT_VER_MIN = $$<span class="built_in">member</span>(QT_VERSION, <span class="number">1</span>)</span><br><span class="line">#下面是表示 Qt5<span class="number">.5</span></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_VER_MAJ, <span class="number">4</span>) &#123;</span><br><span class="line"><span class="built_in">greaterThan</span>(QT_VER_MIN, <span class="number">4</span>) &#123;</span><br><span class="line">#自己根据需要做一些处理</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#QT_ARCH是Qt5新增的,在Qt4上没效果</span><br><span class="line">#打印当前Qt构建套件的信息</span><br><span class="line"><span class="built_in">message</span>($$QT_ARCH)</span><br><span class="line">#表示arm平台构建套件</span><br><span class="line"><span class="built_in">contains</span>(QT_ARCH, arm) &#123;&#125;</span><br><span class="line">#表示<span class="number">32</span>位的构建套件</span><br><span class="line"><span class="built_in">contains</span>(QT_ARCH, i386) &#123;&#125;</span><br><span class="line">#表示<span class="number">64</span>位的构建套件</span><br><span class="line"><span class="built_in">contains</span>(QT_ARCH, x86_64) &#123;&#125;</span><br></pre></td></tr></table></figure><ol start="83"><li>Qt 最小化后恢复界面假死冻结，加上代码</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">showEvent</span><span class="params">(QShowEvent *e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setAttribute</span>(Qt::WA_Mapped);</span><br><span class="line">    QWidget::<span class="built_in">showEvent</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="84"><li>设置高分屏属性以便支持 2K 、4K 等高分辨率，尤其是手机 app 。必须写在 main 函数的<code>QApplication a(argc, argv);</code> 的前面。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,6,0))</span></span><br><span class="line">    QGuiApplication::<span class="built_in">setAttribute</span>(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><ol start="85"><li>Qt5 以后提供了类 <code>QScroller</code> 直接将控件滚动。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//禁用横向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;<span class="built_in">setHorizontalScrollBarPolicy</span>(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//禁用纵向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;<span class="built_in">setVerticalScrollBarPolicy</span>(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//设置横向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;<span class="built_in">setHorizontalScrollMode</span>(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置纵向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;<span class="built_in">setVerticalScrollMode</span>(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置滚动对象以及滚动方式为鼠标左键拉动滚动</span></span><br><span class="line">QScroller::<span class="built_in">grabGesture</span>(ui-&gt;listWidget, QScroller::LeftMouseButtonGesture);</span><br><span class="line"><span class="comment">//还有个QScrollerProperties可以设置滚动的一些参数</span></span><br></pre></td></tr></table></figure><ol start="86"><li>如果使用 <code>sqlite</code> 数据库不想产生数据库文件，可以创建内存数据库。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabase db = QSqlDatabase::<span class="built_in">addDatabase</span>(<span class="string">&quot;QSQLITE&quot;</span>);</span><br><span class="line">db.<span class="built_in">setDatabaseName</span>(<span class="string">&quot;:memory:&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="87"><li>Qtchart 模块从 Qt5.7 开始自带，最低编译要求 Qt5.4 。在安装的时候记得勾选，默认不勾选。使用该模块需要引入命名空间。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QChartView&gt;</span></span></span><br><span class="line">QT_CHARTS_USE_NAMESPACE</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomChart</span> : <span class="keyword">public</span> QChartView</span><br></pre></td></tr></table></figure><ol start="88"><li> QLabel 有三种设置文本的方法，掌握好 Qt 的属性系统，举一反三，可以做出很多效果。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;label-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;qproperty-text:hello;&quot;</span>);</span><br><span class="line">ui-&gt;label-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">ui-&gt;label-&gt;<span class="built_in">setText</span>(<span class="string">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="89"><li> 巧妙的用 QEventLoop 开启事件循环，可以使得很多同步获取返回结果而不阻塞界面。QEventLoop 内部新建了线程执行。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QEventLoop loop;</span><br><span class="line"><span class="built_in">connect</span>(reply, <span class="built_in">SIGNAL</span>(<span class="built_in">finished</span>()), &amp;loop, <span class="built_in">SLOT</span>(<span class="built_in">quit</span>()));</span><br><span class="line">loop.<span class="built_in">exec</span>();</span><br></pre></td></tr></table></figure><ol start="90"><li>QSqlTableModel 的 <code>rowCount</code> 方法，默认最大返回<code>256</code> ，如果超过256，可以将表格拉到底部，会自动加载剩余的，每次最大加载256条数据，如果需要打印或者导出数据，记得最好采用 sql 语句去查询，而不是使用 QSqlTableModel 的 rowCount 方法。不然永远最大只会导出256条数据。<br> 如果数据量很小，也可以采用如下方法：</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主动加载所有数据,不然获取到的行数&lt;=256</span></span><br><span class="line"><span class="keyword">while</span>(model-&gt;<span class="built_in">canFetchMore</span>()) &#123;</span><br><span class="line">    model-&gt;<span class="built_in">fetchMore</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="91"><li> 在某些 HTTP POST数据的时候，如果采用的是 <code>&amp;</code> 字符串连接的数据发送，中文解析乱码的话，需要将中文进行URL转码。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString content = <span class="string">&quot;测试中文&quot;</span>;</span><br><span class="line">QString note = content.<span class="built_in">toUtf8</span>().<span class="built_in">toPercentEncoding</span>();</span><br></pre></td></tr></table></figure><ol start="92"><li>  Qt中继承 QWidget 之后，<u><strong>样式表不起作用</strong></u>，解决办法有三个。强烈推荐方法一。</li></ol><ul><li>方法一：设置属性 <code>this-&gt;setAttribute(Qt::WA_StyledBackground, true);</code></li><li>方法二：改成继承 <code>QFrame</code> ，因为 QFrame 自带 paintEvent 函数已做了实现，在使用样式表时会进行解析和绘制。</li><li>方法三：重新实现 QWidget 的 <code>paintEvent</code> 函数时，使用 <code>QStylePainter</code> 绘制。</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QStyleOption option;</span><br><span class="line">    option.<span class="built_in">initFrom</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    <span class="built_in">style</span>()-&gt;<span class="built_in">drawPrimitive</span>(QStyle::PE_Widget, &amp;option, &amp;painter, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="93"><li> 在很多网络应用程序，需要<strong>自定义心跳包</strong>来保持连接，不然断电或者非法关闭程序，对方识别不到，需要进行超时检测，但是有些程序没有提供心跳协议，此时需要启用系统层的保活程序，此方法适用于<code>TCP连接</code>。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> fd = tcpSocket-&gt;<span class="built_in">socketDescriptor</span>();</span><br><span class="line"><span class="type">int</span> keepAlive = <span class="number">1</span>;      <span class="comment">//开启keepalive属性,缺省值:0(关闭)</span></span><br><span class="line"><span class="type">int</span> keepIdle = <span class="number">5</span>;       <span class="comment">//如果在5秒内没有任何数据交互,则进行探测,缺省值:7200(s)</span></span><br><span class="line"><span class="type">int</span> keepInterval = <span class="number">2</span>;   <span class="comment">//探测时发探测包的时间间隔为2秒,缺省值:75(s)</span></span><br><span class="line"><span class="type">int</span> keepCount = <span class="number">2</span>;      <span class="comment">//探测重试的次数,全部超时则认定连接失效,缺省值:9(次)</span></span><br><span class="line"><span class="built_in">setsockopt</span>(fd, SOL_SOCKET, SO_KEEPALIVE, (<span class="type">void</span> *)&amp;keepAlive, <span class="built_in">sizeof</span>(keepAlive));</span><br><span class="line"><span class="built_in">setsockopt</span>(fd, SOL_TCP, TCP_KEEPIDLE, (<span class="type">void</span> *)&amp;keepIdle, <span class="built_in">sizeof</span>(keepIdle));</span><br><span class="line"><span class="built_in">setsockopt</span>(fd, SOL_TCP, TCP_KEEPINTVL, (<span class="type">void</span> *)&amp;keepInterval, <span class="built_in">sizeof</span>(keepInterval));</span><br><span class="line"><span class="built_in">setsockopt</span>(fd, SOL_TCP, TCP_KEEPCNT, (<span class="type">void</span> *)&amp;keepCount, <span class="built_in">sizeof</span>(keepCount));</span><br></pre></td></tr></table></figure><ol start="94"><li> 在绘制无背景颜色只有边框颜色的圆形时候，可以用绘制360度的圆弧替代，效果完全一致。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QRect <span class="title">rect</span><span class="params">(-radius, -radius, radius * <span class="number">2</span>, radius * <span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="comment">//以下两种方法二选一,其实绘制360度的圆弧=绘制无背景的圆形</span></span><br><span class="line">painter-&gt;<span class="built_in">drawArc</span>(rect, <span class="number">0</span>, <span class="number">360</span> * <span class="number">16</span>);</span><br><span class="line">painter-&gt;<span class="built_in">drawEllipse</span>(rect);</span><br></pre></td></tr></table></figure><ol start="95"><li> Qt封装的 <code>QDateTime</code> 日期时间类非常强大，可以字符串和日期时间相互转换，也可以毫秒数和日期时间相互转换，还可以1970经过的秒数和日期时间相互转换等。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QDateTime dateTime;</span><br><span class="line">QString dateTime_str = dateTime.<span class="built_in">currentDateTime</span>().<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line"><span class="comment">//从字符串转换为毫秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.<span class="built_in">fromString</span>(<span class="string">&quot;2011-09-10 12:07:50:541&quot;</span>, <span class="string">&quot;yyyy-MM-dd hh:mm:ss:zzz&quot;</span>).<span class="built_in">toMSecsSinceEpoch</span>();</span><br><span class="line"><span class="comment">//从字符串转换为秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.<span class="built_in">fromString</span>(<span class="string">&quot;2011-09-10 12:07:50:541&quot;</span>, <span class="string">&quot;yyyy-MM-dd hh:mm:ss:zzz&quot;</span>).<span class="built_in">toTime_t</span>();</span><br><span class="line"><span class="comment">//从毫秒转换到年月日时分秒</span></span><br><span class="line">datetime.<span class="built_in">fromMSecsSinceEpoch</span>(<span class="number">1315193829218</span>).<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss:zzz&quot;</span>);</span><br><span class="line"><span class="comment">//从秒转换到年月日时分秒（若有zzz，则为000）</span></span><br><span class="line">datetime.<span class="built_in">fromTime_t</span>(<span class="number">1315193829</span>).<span class="built_in">toString</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss[:zzz]&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="96"><li> 如果是 dialog 窗体，需要在 exec 以后还能让其他代码继续执行，请在dialog窗体exec前增加一行代码，否则会阻塞窗体消息。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.<span class="built_in">setWindowModality</span>(Qt::WindowModal);</span><br><span class="line">dialog.<span class="built_in">exec</span>();</span><br></pre></td></tr></table></figure><ol start="97"><li> 在使用 <code>setItemWidget</code> 或者 <code>setCellWidget</code> 的过程中，有时候会发现设置的控件没有居中显示而是默认的左对齐，而且不会自动拉伸填充，对于追求完美的程序员来说，这个可不大好看，有个终极通用办法就是，将这个控件放到一个 widget 的布局中，然后将 widget 添加到 item 中，这样就完美解决了，而且这样可以组合多个控件产生复杂的控件。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实例化进度条控件</span></span><br><span class="line">QProgressBar *progress = <span class="keyword">new</span> QProgressBar;</span><br><span class="line"><span class="comment">//增加widget+布局巧妙实现居中</span></span><br><span class="line">QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">layout-&gt;<span class="built_in">setSpacing</span>(<span class="number">0</span>);</span><br><span class="line">layout-&gt;<span class="built_in">setMargin</span>(<span class="number">0</span>);</span><br><span class="line">layout-&gt;<span class="built_in">addWidget</span>(progress);</span><br><span class="line">widget-&gt;<span class="built_in">setLayout</span>(layout);</span><br><span class="line">ui-&gt;tableWidget-&gt;<span class="built_in">setCellWidget</span>(<span class="number">0</span>, <span class="number">0</span>, widget);</span><br></pre></td></tr></table></figure><ol start="98"><li> 很多时候需要在已知背景色的情况下，能够清晰的绘制文字，这个时候需要计算对应的文字颜色。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据背景色自动计算合适的前景色</span></span><br><span class="line"><span class="type">double</span> gray = (<span class="number">0.299</span> * color.<span class="built_in">red</span>() + <span class="number">0.587</span> * color.<span class="built_in">green</span>() + <span class="number">0.114</span> * color.<span class="built_in">blue</span>()) / <span class="number">255</span>;</span><br><span class="line">QColor textColor = gray &gt; <span class="number">0.5</span> ? Qt::black : Qt::white;</span><br></pre></td></tr></table></figure><ol start="99"><li> 对 QTableView 或者 QTableWidget 禁用列拖动。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> (QT_VERSION &lt;= QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setResizeMode</span>(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    ui-&gt;tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setSectionResizeMode</span>(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><ol start="100"><li> Qt中的 QColor 对颜色封装的很完美，支持各种转换，比如<code>rgb</code>、<code>hsb</code>、<code>cmyk</code>、<code>hsl</code>，对应的是toRgb、toHsv、toCmyk、toHsl，还支持透明度设置，颜色值还能转成16进制格式显示。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QColor <span class="title">color</span><span class="params">(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; color.<span class="built_in">name</span>() &lt;&lt; color.<span class="built_in">name</span>(QColor::HexArgb);</span><br><span class="line"><span class="comment">//输出 #ff0000 #64ff0000</span></span><br></pre></td></tr></table></figure><ol start="101"><li> <code>QVariant</code> 类型异常的强大，可以说是万能的类型，在进行配置文件的存储的时候，经常会用到 QVariant 的转换，QVariant 默认自带了 toString 、toFloat 等各种转换，但是还是不够，比如有时候需要从QVariant转到QColor，而却没有提供toColor的函数，这个时候就要用到万能办法。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variant.<span class="built_in">typeName</span>() == <span class="string">&quot;QColor&quot;</span>) &#123;</span><br><span class="line">    QColor color = variant.<span class="built_in">value</span>&lt;QColor&gt;();</span><br><span class="line">    QFont font = variant.<span class="built_in">value</span>&lt;QFont&gt;();</span><br><span class="line">    QString nodeValue = color.<span class="built_in">name</span>(QColor::HexArgb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="102"><li> Qt源码中内置了一些未公开的不能直接使用的黑科技，都藏在对应模块的<code>private</code>中，比如 gui-private widgets-private 等，比如 zip 文件解压类 QZipReader 、压缩类 QZipWrite r就在 gui-private 模块中，需要在 pro 中引入<code>QT += gui-private</code>才能使用。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;QtGui/private/qzipreader_p.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;QtGui/private/qzipwriter_p.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">QZipReader <span class="title">reader</span><span class="params">(dirPath)</span></span>;</span><br><span class="line"><span class="function">QString <span class="title">path</span><span class="params">(<span class="string">&quot;&quot;</span>)</span></span>;</span><br><span class="line"><span class="comment">//解压文件夹到当前目录</span></span><br><span class="line">reader.<span class="built_in">extractAll</span>(path);</span><br><span class="line"><span class="comment">//文件夹名称</span></span><br><span class="line">QZipReader::FileInfo fileInfo = reader.<span class="built_in">entryInfoAt</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//解压文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.<span class="built_in">open</span>(QIODevice::WriteOnly);</span><br><span class="line">file.<span class="built_in">write</span>(reader.<span class="built_in">fileData</span>(QString::<span class="built_in">fromLocal8Bit</span>(<span class="string">&quot;%1&quot;</span>).<span class="built_in">arg</span>(filePath)));</span><br><span class="line">file.<span class="built_in">close</span>();</span><br><span class="line">reader.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">QZipWriter *writer = <span class="keyword">new</span> <span class="built_in">QZipWriter</span>(dirPath);</span><br><span class="line"><span class="comment">//添加文件夹</span></span><br><span class="line">writer-&gt;<span class="built_in">addDirectory</span>(unCompress);</span><br><span class="line"><span class="comment">//添加文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.<span class="built_in">open</span>(QIODevice::ReadOnly);</span><br><span class="line">writer-&gt;<span class="built_in">addFile</span>(data, file.<span class="built_in">readAll</span>());</span><br><span class="line">file.<span class="built_in">close</span>();</span><br><span class="line">writer-&gt;<span class="built_in">close</span>();</span><br></pre></td></tr></table></figure><ol start="103"><li> 新版的 QTcpServer 类在64位版本的Qt下很可能不会进入 incomingConnection 函数，那是因为Qt5 对应的 incomingConnection 函数参数变了，由之前的 int 改成了 qintptr ，改成 qintptr 有个好处，在32位上自动是 quint32 而在64位上自动是 quint64 ，如果在Qt5 中继续写的参数是int 则在32位上没有问题在64位上才有问题，所以为了兼容 Qt4 和 Qt5 ，必须按照不一样的参数写。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">incomingConnection</span><span class="params">(qintptr handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">incomingConnection</span><span class="params">(<span class="type">int</span> handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><ol start="104"><li> QWebEngineView 控件由于使用了<code>opengl</code>，在某些电脑上可能由于 opengl 的驱动过低会导致花屏或者各种奇奇怪怪的问题，比如 showfullscreen 的情况下鼠标右键失效，需要在main函数启用软件 opengl 渲染。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,4,0))</span></span><br><span class="line">    <span class="comment">//下面两种方法都可以,Qt默认采用的是AA_UseDesktopOpenGL</span></span><br><span class="line">    QCoreApplication::<span class="built_in">setAttribute</span>(Qt::AA_UseOpenGLES);</span><br><span class="line">    <span class="comment">//QCoreApplication::setAttribute(Qt::AA_UseSoftwareOpenGL);</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br></pre></td></tr></table></figure><p>另外一个方法解决  全屏 + QWebEngineView 控件一起会产生右键菜单无法弹出的bug,需要上移一个像素</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QRect rect = qApp-&gt;<span class="built_in">desktop</span>()-&gt;<span class="built_in">geometry</span>();</span><br><span class="line">rect.<span class="built_in">setY</span>(<span class="number">-1</span>);</span><br><span class="line">rect.<span class="built_in">setHeight</span>(rect.<span class="built_in">height</span>());</span><br><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">setGeometry</span>(rect);</span><br></pre></td></tr></table></figure><ol start="105"><li> QStyle 内置了很多方法用处很大，比如精确获取滑动条鼠标按下处的值。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QStyle::<span class="built_in">sliderValueFromPosition</span>(<span class="built_in">minimum</span>(), <span class="built_in">maximum</span>(), event-&gt;<span class="built_in">x</span>(), <span class="built_in">width</span>());</span><br></pre></td></tr></table></figure><ol start="106"><li> 用 QFile 读写文件的时候，推荐用 <code>QTextStream</code> 文件流的方式来读写文件，速度快很多，基本上会有30%的提升，文件越大性能区别越大。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从文件加载英文属性与中文属性对照表</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;:/propertyname.txt&quot;</span>)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (file.<span class="built_in">open</span>(QFile::ReadOnly)) &#123;</span><br><span class="line">    <span class="comment">//QTextStream方法读取速度至少快30%</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0</span></span><br><span class="line">    <span class="keyword">while</span>(!file.<span class="built_in">atEnd</span>()) &#123;</span><br><span class="line">        QString line = file.<span class="built_in">readLine</span>();</span><br><span class="line">        <span class="built_in">appendName</span>(line);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (!in.<span class="built_in">atEnd</span>()) &#123;</span><br><span class="line">        QString line = in.<span class="built_in">readLine</span>();</span><br><span class="line">        <span class="built_in">appendName</span>(line);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="107"><li> 用 QFile.readAll() 读取 QSS 文件默认是<code>ANSI</code>格式，不支持 UTF8 ，如果在  QtCreator 中打开qss 文件来编辑保存，这样很可能导致 qss 加载以后没有效果。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">frmMain::initStyle</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//加载样式表</span></span><br><span class="line">    QString qss;</span><br><span class="line">    <span class="comment">//QFile file(&quot;:/qss/psblack.css&quot;);</span></span><br><span class="line">    <span class="comment">//QFile file(&quot;:/qss/flatwhite.css&quot;);</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;:/qss/lightblue.css&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (file.<span class="built_in">open</span>(QFile::ReadOnly)) &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1</span></span><br><span class="line">        <span class="comment">//用QTextStream读取样式文件不用区分文件编码 带bom也行</span></span><br><span class="line">        QStringList list;</span><br><span class="line">        <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="comment">//in.setCodec(&quot;utf-8&quot;);</span></span><br><span class="line">        <span class="keyword">while</span> (!in.<span class="built_in">atEnd</span>()) &#123;</span><br><span class="line">            QString line;</span><br><span class="line">            in &gt;&gt; line;</span><br><span class="line">            list &lt;&lt; line;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        qss = list.<span class="built_in">join</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">        <span class="comment">//用readAll读取默认支持的是ANSI格式,如果不小心用creator打开编辑过了很可能打不开</span></span><br><span class="line">        qss = <span class="built_in">QLatin1String</span>(file.<span class="built_in">readAll</span>());</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        QString paletteColor = qss.<span class="built_in">mid</span>(<span class="number">20</span>, <span class="number">7</span>);</span><br><span class="line">        qApp-&gt;<span class="built_in">setPalette</span>(<span class="built_in">QPalette</span>(<span class="built_in">QColor</span>(paletteColor)));</span><br><span class="line">        qApp-&gt;<span class="built_in">setStyleSheet</span>(qss);</span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="108"><li>  QString 内置了很多转换函数，比如可以调用 toDouble 转为 double 数据，但是当你转完并打印的时候你会发现精确少了，只剩下三位了，其实原始数据还是完整的精确度的，只是打印的时候优化成了三位，如果要保证完整的精确度，可以调用 <code>qSetRealNumberPrecision</code> 函数设置精确度位数即可。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QString s1, s2;</span><br><span class="line">s1 = <span class="string">&quot;666.5567124&quot;</span>;</span><br><span class="line">s2.<span class="built_in">setNum</span>(<span class="number">888.5632123</span>, <span class="string">&#x27;f&#x27;</span>, <span class="number">7</span>);</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">qSetRealNumberPrecision</span>(<span class="number">10</span>) &lt;&lt; s1.<span class="built_in">toDouble</span>() &lt;&lt; s2.<span class="built_in">toDouble</span>();</span><br></pre></td></tr></table></figure><ol start="109"><li> 用<code>QScriptValueIterator</code>解析数据的时候，会发现总是会多一个节点内容，并且内容为空，如果需要跳过则增加一行代码。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (it.<span class="built_in">hasNext</span>()) &#123;</span><br><span class="line">    it.<span class="built_in">next</span>();    </span><br><span class="line">    <span class="keyword">if</span> (it.<span class="built_in">flags</span>() &amp; QScriptValue::SkipInEnumeration)      </span><br><span class="line">       <span class="keyword">continue</span>;     </span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; it.<span class="built_in">name</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="110"><li> Qt 表格控件一些常用的设置封装，QTableWidget 继承自 QTableView ，所以下面这个函数支持传入 QTableWidget 。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">QUIHelper::initTableView</span><span class="params">(QTableView *tableView, <span class="type">int</span> rowHeight, <span class="type">bool</span> headVisible, <span class="type">bool</span> edit)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//奇数偶数行颜色交替</span></span><br><span class="line">    tableView-&gt;<span class="built_in">setAlternatingRowColors</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//垂直表头是否可见</span></span><br><span class="line">    tableView-&gt;<span class="built_in">verticalHeader</span>()-&gt;<span class="built_in">setVisible</span>(headVisible);</span><br><span class="line">    <span class="comment">//选中一行表头是否加粗</span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setHighlightSections</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//最后一行拉伸填充</span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setStretchLastSection</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//行标题最小宽度尺寸</span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setMinimumSectionSize</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//行标题最大高度</span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setMaximumHeight</span>(rowHeight);</span><br><span class="line">    <span class="comment">//默认行高</span></span><br><span class="line">    tableView-&gt;<span class="built_in">verticalHeader</span>()-&gt;<span class="built_in">setDefaultSectionSize</span>(rowHeight);</span><br><span class="line">    <span class="comment">//选中时一行整体选中</span></span><br><span class="line">    tableView-&gt;<span class="built_in">setSelectionBehavior</span>(QAbstractItemView::SelectRows);</span><br><span class="line">    <span class="comment">//只允许选择单个</span></span><br><span class="line">    tableView-&gt;<span class="built_in">setSelectionMode</span>(QAbstractItemView::SingleSelection);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//表头不可单击</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setSectionsClickable</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    tableView-&gt;<span class="built_in">horizontalHeader</span>()-&gt;<span class="built_in">setClickable</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标按下即进入编辑模式</span></span><br><span class="line">    <span class="keyword">if</span> (edit) &#123;</span><br><span class="line">        tableView-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::CurrentChanged | QAbstractItemView::DoubleClicked);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tableView-&gt;<span class="built_in">setEditTriggers</span>(QAbstractItemView::NoEditTriggers);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="111"><li> 在一些大的项目中，可能嵌套了很多子项目，有时候会遇到子项目依赖其他子项目的时候，比如一部分子项目用来生成动态库，一部分子项目依赖这个动态库进行编译，此时就需要子项目按照顺序编译。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE = subdirs</span><br><span class="line">#设置ordered参数以后会依次编译 demo designer examples</span><br><span class="line">CONFIG  += ordered</span><br><span class="line">SUBDIRS += demo</span><br><span class="line">SUBDIRS += designer</span><br><span class="line">SUBDIRS += examples</span><br></pre></td></tr></table></figure><ol start="112"><li> 很多时候用 QDialog 的时候会发现阻塞了消息，而有的时候我们希望是后台的一些消息继续运行不要终止，此时需要做个设置。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.<span class="built_in">setWindowModality</span>(Qt::WindowModal);</span><br></pre></td></tr></table></figure><ol start="113"><li>  在嵌入式 linux 上，如果设置了无边框窗体，而该窗体中又有文本框之类的，发现没法产生焦点进行输入，此时需要主动激活窗体才行。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这种方式设置的无边框窗体在嵌入式设备上无法产生焦点</span></span><br><span class="line"><span class="built_in">setWindowFlags</span>(Qt::WindowStaysOnTopHint | Qt::FramelessWindowHint | Qt::X11BypassWindowManagerHint);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要在show以后主动激活窗体</span></span><br><span class="line">w-&gt;<span class="built_in">show</span>();</span><br><span class="line">w-&gt;<span class="built_in">activateWindow</span>();</span><br></pre></td></tr></table></figure><ol start="114"><li> 在不同的平台上文件路径的斜杠也是不一样的，比如 linux 系统一般都是 <code>/</code> 斜杠，而在windows上都是 <code>\\</code> 两个反斜杠，Qt 本身程序内部无论在 win 还是 linux 都支持 <code>/</code> 斜杠的路径，但是一些第三方库的话可能需要转换成对应系统的路径，这就需要用到斜杠转换，Qt当然内置类方法。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QString path = <span class="string">&quot;C:/temp/test.txt&quot;</span>;</span><br><span class="line">path = QDir::<span class="built_in">toNativeSeparators</span>(path);</span><br><span class="line"><span class="comment">//输出 C:\\temp\\test.txt</span></span><br><span class="line"></span><br><span class="line">QString path = <span class="string">&quot;C:\\temp\\test.txt&quot;</span>;</span><br><span class="line">path = QDir::<span class="built_in">toNativeSeparators</span>(path);</span><br><span class="line"><span class="comment">//输出 C:/temp/test.txt</span></span><br></pre></td></tr></table></figure><h3 id="二、其他经验"><a href="#二、其他经验" class="headerlink" title="二、其他经验"></a>二、其他经验</h3><ol><li><p>Qt 界的中文乱码问题，版本众多导致的如何选择安装包问题，如何打包发布程序的问题，堪称 Qt 界的三座大山！</p></li><li><p>在Qt的学习过程中，学会查看对应类的头文件是一个好习惯，如果在该类的头文件没有找到对应的函数，可以去他的父类中找找，实在不行还有爷爷类，肯定能找到的。通过头文件你会发现很多函数接口其实 Qt 已经帮我们封装好了，有空还可以阅读下他的实现代码。</p></li><li><p>Qt 安装目录下的 Examples 目录下的例子，看完学完，月薪 20K 起步；Qt 常用类的头文件的函数看完学完使用一遍并加以融会贯通，月薪 30K 起步。</p></li><li><p>Qt在开发阶段不支持中文目录，切记，这是无数人可能犯的错误，在安装Qt集成开发环境以及编译器的时候，务必记得目录必须英文，否则很可能不正常，建议尽量用默认的安装位置。</p></li><li><p>如果出现崩溃和段错误，80%都是因为要么越界，要么未初始化，死扣这两点，80%的问题解决了。</p></li><li><p>Qt一共有几百个版本，关于如何选择Qt版本的问题，我一般保留四个版本，为了兼容 Qt4 用4.8.7，最后的支持XP的版本 5.7.0 ，最新的长期支持版本比如 5.12 ，最高的新版本比如5.14.2 。强烈不建议使用4.7以前和5.0到5.3之间的版本，太多bug和坑，稳定性和兼容性相比于之后的版本相当差，能换就换，不能换说服领导也要换。</p></li><li><p>Qt 和 msvc 编译器常见搭配是<code>Qt5.7+VS2013</code>、<code>Qt5.9+VS2015</code>、<code>Qt5.12+VS2017</code>，按照这些搭配来，基本上常用的模块都会有，比如 webengine 模块，如果选用的 Qt5.12+msvc2015，则很可能官方没有编译这个模块，只是编译了Qt5.12+msvc2017的。</p></li><li><p>终极秘籍：如果遇到问题搜索Qt方面找不到答案，试着将关键字用JAVA C# android打头，你会发现别有一番天地，其他人很可能做过！</p></li><li><p>新版本Qt安装包安装的时候需要填写注册信息，如果不想填写，先禁用网卡，在运行安装包，可以直接跳过这一步进行安装。</p></li><li><p>最后一条：珍爱生命，远离编程。祝大家头发浓密，睡眠良好，情绪稳定，财富自由！</p></li></ol><h3 id="三、学习资源推荐"><a href="#三、学习资源推荐" class="headerlink" title="三、学习资源推荐"></a>三、学习资源推荐</h3><table><thead><tr><th>名称</th><th>网址</th></tr></thead><tbody><tr><td>QtWidget开源demo集合</td><td><a href="https://gitee.com/feiyangqingyun/QWidgetDemo">https://gitee.com/feiyangqingyun/QWidgetDemo</a></td></tr><tr><td>QtQuick/Qml开源demo集合</td><td><a href="https://gitee.com/jaredtao/TaoQuick">https://gitee.com/jaredtao/TaoQuick</a></td></tr><tr><td>qtcn</td><td><a href="http://www.qtcn.org/">http://www.qtcn.org</a></td></tr><tr><td>豆子的空间</td><td><a href="https://www.devbean.net/">https://www.devbean.net</a></td></tr><tr><td>yafeilinux</td><td><a href="http://www.qter.org/">http://www.qter.org</a></td></tr><tr><td>一去二三里</td><td><a href="http://blog.csdn.net/liang19890820">http://blog.csdn.net/liang19890820</a></td></tr><tr><td>乌托邦2号</td><td><a href="http://blog.csdn.net/taiyang1987912">http://blog.csdn.net/taiyang1987912</a></td></tr><tr><td>foruok</td><td><a href="http://blog.csdn.net/foruok">http://blog.csdn.net/foruok</a></td></tr><tr><td>jason</td><td><a href="http://blog.csdn.net/wsj18808050">http://blog.csdn.net/wsj18808050</a></td></tr><tr><td>朝十晚八</td><td><a href="http://www.cnblogs.com/swarmbees">http://www.cnblogs.com/swarmbees</a></td></tr><tr><td>BIG_C_GOD</td><td><a href="http://blog.csdn.net/big_c_god">http://blog.csdn.net/big_c_god</a></td></tr><tr><td>公孙二狗</td><td><a href="https://qtdebug.com/qtbook">https://qtdebug.com/qtbook</a></td></tr><tr><td>雨田哥</td><td><a href="https://blog.csdn.net/ly305750665">https://blog.csdn.net/ly305750665</a></td></tr><tr><td>郑天佐</td><td><a href="https://blog.csdn.net/zhengtianzuo06">https://blog.csdn.net/zhengtianzuo06</a></td></tr><tr><td>寒山-居士</td><td><a href="https://blog.csdn.net/esonpo">https://blog.csdn.net/esonpo</a></td></tr><tr><td>feiyangqingyun</td><td><a href="https://blog.csdn.net/feiyangqingyun">https://blog.csdn.net/feiyangqingyun</a></td></tr><tr><td>前行中小猪</td><td><a href="http://blog.csdn.net/goforwardtostep">http://blog.csdn.net/goforwardtostep</a></td></tr><tr><td>涛哥的知乎专栏</td><td><a href="https://zhuanlan.zhihu.com/TaoQt">https://zhuanlan.zhihu.com/TaoQt</a></td></tr><tr><td>Qt君</td><td><a href="https://blog.csdn.net/nicai_xiaoqinxi">https://blog.csdn.net/nicai_xiaoqinxi</a></td></tr><tr><td>Qt老外视频教程</td><td><a href="http://space.bilibili.com/2592237/#!/index">http://space.bilibili.com/2592237/#!/index</a></td></tr><tr><td>Qt维基补充文档</td><td><a href="https://wiki.qt.io/Main">https://wiki.qt.io/Main</a></td></tr><tr><td>Qt源码查看网站</td><td><a href="https://code.woboq.org/qt5">https://code.woboq.org/qt5</a></td></tr><tr><td>Qt官方下载地址</td><td><a href="https://download.qt.io/">https://download.qt.io</a></td></tr><tr><td>Qt官方下载新地址</td><td><a href="https://download.qt.io/new_archive/qt/">https://download.qt.io/new_archive/qt/</a></td></tr><tr><td>Qt国内镜像下载地址</td><td><a href="https://mirrors.cloud.tencent.com/qt">https://mirrors.cloud.tencent.com/qt</a></td></tr><tr><td>Qt安装包下载地址</td><td><a href="http://qthub.com/download/">http://qthub.com/download/</a> (超过1000多个，由Qt君整理)</td></tr><tr><td>精美图表控件QWT</td><td><a href="http://qwt.sourceforge.net/">http://qwt.sourceforge.net/</a></td></tr><tr><td>精美图表控件QCustomPlot</td><td><a href="https://www.qcustomplot.com/">https://www.qcustomplot.com/</a></td></tr><tr><td>免费图标下载</td><td><a href="http://www.easyicon.net/">http://www.easyicon.net/</a></td></tr><tr><td>图形字体下载</td><td><a href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></td></tr><tr><td>漂亮界面网站</td><td><a href="https://www.ui.cn/">https://www.ui.cn/</a></td></tr></tbody></table><h3 id="四、其他"><a href="#四、其他" class="headerlink" title="四、其他"></a>四、其他</h3><ol><li>C++入门书籍推荐《C++ primer plus》，进阶书籍推荐《C++ primer》。</li><li>Qt入门书籍推荐霍亚飞的《Qt Creator快速入门》，Qt进阶书籍推荐官方的《C++ GUI Qt4编程》，qml书籍推荐《Qt5编程入门》。</li><li>强烈推荐程序员自我修养和规划系列书《大话程序员》《程序员的成长课》《解忧程序员》，受益匪浅，受益终生！</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;这段时间，学习量陡升。遇到的问题也是五花八门，越来越多，有的在搜索引擎可以找到答案，有的则需要痛苦地耗费很长时间才能寻到一丝解决方法，还有的直接就找不到答案。这也让我更加坚定地要将自己所学所遇的知识、问题，所踩过的坑都要记录下来，利己也利他。&lt;br&gt;            </summary>
      
    
    
    
    <category term="知识整理" scheme="https://blog.amoswu.top/categories/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
    
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="转载" scheme="https://blog.amoswu.top/tags/%E8%BD%AC%E8%BD%BD/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Qt 动态链接库</title>
    <link href="https://blog.amoswu.top/17b0.html"/>
    <id>https://blog.amoswu.top/17b0.html</id>
    <published>2020-09-01T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>近期，在学完 Qt 编程的一些基础知识后，我逐渐往更深层次进发。今天，要记录的是，Qt 框架中动态链接库相关的知识。</p><p>有动态链接库是就会有静态链接库，来都来了，肯定是要一次性都解决的。先来看看这两类链接库的区别。</p><p><strong>静态链接库</strong>（Static-link library）就是把要调用的函数或者过程链接到可执行文件中，成为可执行文件的一部分的库。换言之，函数和过程的代码就在主程序的 <code>.exe</code> 文件中，该文件包含了运行时所需的全部代码。当多个程序调用相同的函数是，内存中会存在这个函数的多个拷贝。在 Windows 操作系统中，静态链接库对应的后缀名为 <code>.lib</code>, 在 Linux 操作系统中，静态链接库对应的后缀名为 <code>.a</code> 。</p><p><strong>动态链接库</strong>（Dynamic-link library）是微软公司在 Windows 操作系统中实现共享库概念的一种实现方式，后被很多操作系统作为参考，从而使其有了更大的发展。在 Windows 操作系统中，静态链接库对应的后缀名为 <code>.dll</code> , 在 Linux 操作系统中，动态链接库对应的后缀名为 <code>.so</code>。</p><p>在 Windows 操作戏台中，所谓动态链接，就是把一些经常会共享的代码（静态链接的 OBJ 程序库）制作成 DLL 档，当可执行文件调用到 DLL 档内的函数时， Windows 操作系统才会把 DLL 档加载到内存中， DLL 档本身的结构就是可执行档，当程序有需求时函数才进行链接。一般情况下，如果一个应用使用了动态链接库， Win32 系统保证内存中只有DLL的一份复制品。</p><p>说完动态链接库与静态链接库的区别，不能光纸上谈兵，应该动手来个实例。不如就动手实现一个简易计算的动态库吧。</p><h2 id="编写动态库"><a href="#编写动态库" class="headerlink" title="编写动态库"></a>编写动态库</h2><div class="story post-story"><h4 id="1-建立库文件"><a href="#1-建立库文件" class="headerlink" title="1.建立库文件"></a>1.建立库文件</h4><p>首先打开 Qt Creator 的新建对话窗口，找到 <code>Library</code>，点击创建 <code>C++ Library</code>。<br><img src="https://img.wehuihua.cn/blog/20200902140112.png" class="lazyload" data-srcset="https://img.wehuihua.cn/blog/20200902140112.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200902140109533"></p><p>给定一个名字，然后点击下一步 ，在选择 Qt module 时，选择 <code>Core</code>模块。</p><p><img src="https://img.amoswu.top/post/s5He4.png" class="lazyload" data-srcset="https://img.amoswu.top/post/s5He4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200902140458089"></p><p>接着，勾选一个编译环境。</p><p><img src="https://img.amoswu.top/post/dQGvJ.png" class="lazyload" data-srcset="https://img.amoswu.top/post/dQGvJ.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200902140557133"></p><h4 id="2-编写库函数代码"><a href="#2-编写库函数代码" class="headerlink" title="2. 编写库函数代码"></a>2. 编写库函数代码</h4><p><code>compute.pro</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">QT -= gui</span><br><span class="line"></span><br><span class="line">TEMPLATE = lib</span><br><span class="line">DEFINES += COMPUTE_LIBRARY</span><br><span class="line"></span><br><span class="line">CONFIG += c++11</span><br><span class="line"></span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">    compute.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \</span><br><span class="line">    compute_global.h \</span><br><span class="line">    compute.h</span><br><span class="line"></span><br><span class="line">unix &#123;</span><br><span class="line">    target.path = /usr/lib</span><br><span class="line">&#125;</span><br><span class="line">!isEmpty(target.path): INSTALLS += target</span><br></pre></td></tr></table></figure><p><code>compute.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***************************************************</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @file       compute.h</span></span><br><span class="line"><span class="comment"> * @version    1.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author     AmosWu</span></span><br><span class="line"><span class="comment"> * @date       2020/09/02</span></span><br><span class="line"><span class="comment"> * @history    </span></span><br><span class="line"><span class="comment"> ***************************************************/</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> COMPUTE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COMPUTE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;compute_global.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">COMPUTE_EXPORT</span> Compute</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Compute</span>();</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">diff</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">prod</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">divi</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// COMPUTE_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>compute_global.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> COMPUTE_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COMPUTE_GLOBAL_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtCore/qglobal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(COMPUTE_LIBRARY)</span></span><br><span class="line"><span class="meta">#  <span class="keyword">define</span> COMPUTE_EXPORT Q_DECL_EXPORT</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#  <span class="keyword">define</span> COMPUTE_EXPORT Q_DECL_IMPORT</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// COMPUTE_GLOBAL_H</span></span></span><br></pre></td></tr></table></figure><p><code>compute.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***************************************************</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @file       compute.cpp</span></span><br><span class="line"><span class="comment"> * @version    1.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author     AmosWu</span></span><br><span class="line"><span class="comment"> * @date       2020/09/02</span></span><br><span class="line"><span class="comment"> * @history    </span></span><br><span class="line"><span class="comment"> ***************************************************/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;compute.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Compute::<span class="built_in">Compute</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Compute::sum</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Compute::diff</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Compute::prod</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Compute::divi</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> a / b;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">999.99</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在编写完上述代码后，我们调试一下，或者构建不运行，就会在对应文件夹看到已经生成  <code>.lib</code> 和 <code>.dll</code>等库文件了。</p><p> <img src="https://img.amoswu.top/post/AJWh1.png" class="lazyload" data-srcset="https://img.amoswu.top/post/AJWh1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200902145444525"></p></div><h2 id="调用动态库"><a href="#调用动态库" class="headerlink" title="调用动态库"></a>调用动态库</h2><div class="story post-story"><h4 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1.创建项目"></a>1.创建项目</h4><p><em>这里就不再赘述了了了了了了了了了了</em></p><h4 id="2-拷贝头文件"><a href="#2-拷贝头文件" class="headerlink" title="2.拷贝头文件"></a>2.拷贝头文件</h4><p>将头文件拷贝到应用工程的目录下，对于大型项目要单独建立文件夹，这里是一个小 Demo ，我就直接放到根目录下了。</p><p><img src="https://img.amoswu.top/post/fKgbY.png" class="lazyload" data-srcset="https://img.amoswu.top/post/fKgbY.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200910124324053"></p><h4 id="3-引入dll"><a href="#3-引入dll" class="headerlink" title="3. 引入dll"></a>3. 引入dll</h4><p><code>.pro</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIBS += ‪-LE:/Qt_code/build-compute-Desktop_Qt_5_14_0_MinGW_64_bit-Debug/compute.dll</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;compute.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">setWindowTitle</span>(<span class="built_in">QStringLiteral</span>(<span class="string">&quot;简易计算器&quot;</span>));</span><br><span class="line"></span><br><span class="line">    Compute cal;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Result:&quot;</span> &lt;&lt;  cal.<span class="built_in">sum</span>(<span class="number">2</span>, <span class="number">10</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-拷贝-dll-到编译好的程序-exe-同级目录下"><a href="#4-拷贝-dll-到编译好的程序-exe-同级目录下" class="headerlink" title="4.拷贝 .dll 到编译好的程序 .exe 同级目录下"></a>4.拷贝 .dll 到编译好的程序 .exe 同级目录下</h4><p><img src="https://img.amoswu.top/post/vQlri.png" class="lazyload" data-srcset="https://img.amoswu.top/post/vQlri.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200910124645704"></p><h4 id="5-调试运行"><a href="#5-调试运行" class="headerlink" title="5. 调试运行"></a>5. 调试运行</h4><p><img src="https://img.amoswu.top/post/sUeuM.png" class="lazyload" data-srcset="https://img.amoswu.top/post/sUeuM.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200910123826075"></p><p>此篇仅做动态链接库知识基础，还有更多高级应用，请移步搜索引擎~</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;近期，在学完 Qt 编程的一些基础知识后，我逐渐往更深层次进发。今天，要记录的是，Qt 框架中动态链接库相关的知识。&lt;/p&gt;
&lt;p&gt;有动态链接库是就会有静态链接库，来都来了，肯定是要一次性都解决的。先来看看这两类链接库的区别。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;静态链接库&lt;/s</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Qt 流读写XML</title>
    <link href="https://blog.amoswu.top/cbea.html"/>
    <id>https://blog.amoswu.top/cbea.html</id>
    <published>2020-08-30T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近在学习 Qt 读写XML文件时，思考了一个问题，除了DOM和SAX外，还有没有更快捷的读写XML的方法？经过一番面向搜索引擎编程，我还真发现了一种方法——流读写XML(Write and read by stream)。今天就借此文向大家分享一下这种方法。</p><p><strong>三种读写XML方式的对比</strong></p><table><thead><tr><th>DOM方式</th><th>SAX方式</th><th>流读写方式</th></tr></thead><tbody><tr><td>XML被存入内存</td><td>速度快，逐行扫描</td><td>速度快，一次性传入</td></tr><tr><td>消耗内存较多</td><td>操作复杂，很难修改</td><td>不支持修改和删除</td></tr><tr><td>频繁操作较为方便</td><td>可以随时停止解析，对大型文档友好</td><td>读写API分离</td></tr></tbody></table><p>看完对比，你是不是跃跃欲试了？下面我贴上我的练习代码，给你作为参考。</p><p><code>*.pro</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui xml</span><br><span class="line"></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">CONFIG += c++<span class="number">11</span></span><br><span class="line"></span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">    main.cpp \</span><br><span class="line">    widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \</span><br><span class="line">    widget.h</span><br><span class="line"></span><br><span class="line">FORMS += \</span><br><span class="line">    widget.ui</span><br><span class="line"></span><br><span class="line">qnx: target.path = /tmp/$$&#123;TARGET&#125;/bin</span><br><span class="line"><span class="keyword">else</span>: unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span><br><span class="line">!<span class="built_in">isEmpty</span>(target.path): INSTALLS += target</span><br></pre></td></tr></table></figure><p><code>widget.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="comment">/* Func : write_xml()</span></span><br><span class="line"><span class="comment">     * Feat : 将数据写入XML文件并将写入结果在控制台打印</span></span><br><span class="line"><span class="comment">     * Auth : AmosWu</span></span><br><span class="line"><span class="comment">     * Date : 2020/08/30</span></span><br><span class="line"><span class="comment">     * vers : 1.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">write_xml</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Func : read_xml()</span></span><br><span class="line"><span class="comment">     * Feat : 将数据从XML文件读取出来并在控制台打印</span></span><br><span class="line"><span class="comment">     * Auth : AmosWu</span></span><br><span class="line"><span class="comment">     * Date : 2020/08/30</span></span><br><span class="line"><span class="comment">     * vers : 1.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">read_xml</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QXmlStreamWriter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QXmlReader&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStringList&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>widget.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Name : widget.cpp</span></span><br><span class="line"><span class="comment"> * Date : 2020/08/30</span></span><br><span class="line"><span class="comment"> * Auth : Amos</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QXmlStreamWriter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStringList&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="type">int</span> resWrite = <span class="built_in">write_xml</span>();</span><br><span class="line">    <span class="keyword">if</span> (resWrite &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;ERRO : Write failed!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;INFO : Write succeed!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> resRead = <span class="built_in">read_xml</span>();</span><br><span class="line">    <span class="keyword">if</span>(resRead &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;ERRO : Read failed!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;INFO : Read succeed!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Widget::write_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QStringList urls_list;</span><br><span class="line">    QStringList name_list;</span><br><span class="line">    QStringList stockList;</span><br><span class="line">    urls_list &lt;&lt; <span class="string">&quot;https://cn.bing.com&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;https://google.com&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;https://baidu.com&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;https://sougou.com&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;https://mi.com&quot;</span>;</span><br><span class="line">    name_list &lt;&lt; <span class="string">&quot;Bing&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;Google&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;Baidu&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;Sougou&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;Xiaomi&quot;</span>;</span><br><span class="line">    stockList &lt;&lt; <span class="string">&quot;MSFT.US&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;GOOG.US&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;BIDU.US&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;SOGO.US&quot;</span> </span><br><span class="line">              &lt;&lt; <span class="string">&quot;01810.HK&quot;</span>;</span><br><span class="line">    <span class="comment">// url_list.append(&quot;https://cn.bing.com&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!file.<span class="built_in">open</span>(QFile::WriteOnly | QFile::Text))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">QString</span>(<span class="string">&quot;ERRO : Connot open file test.xml(%2)&quot;</span>)</span><br><span class="line">                        .<span class="built_in">arg</span>(file.<span class="built_in">errorString</span>());</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="function">QXmlStreamWriter <span class="title">stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    stream.<span class="built_in">setCodec</span>(<span class="string">&quot;UTF-8&quot;</span>);               <span class="comment">// XML编码</span></span><br><span class="line">    stream.<span class="built_in">setAutoFormatting</span>(<span class="literal">true</span>);         <span class="comment">// 自动格式化</span></span><br><span class="line">    stream.<span class="built_in">writeStartDocument</span>(<span class="string">&quot;1.0&quot;</span>, <span class="literal">true</span>); <span class="comment">// 开始文档（XML声明）</span></span><br><span class="line">    stream.<span class="built_in">writeStartElement</span>(<span class="string">&quot;compangy&quot;</span>);   <span class="comment">// 创建根节点</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; urls_list.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            stream.<span class="built_in">writeStartElement</span>(<span class="string">&quot;tech&quot;</span>);</span><br><span class="line">            stream.<span class="built_in">writeAttribute</span>(<span class="string">&quot;name&quot;</span>, name_list.<span class="built_in">at</span>(i));</span><br><span class="line">            stream.<span class="built_in">writeAttribute</span>(<span class="string">&quot;url&quot;</span>, urls_list.<span class="built_in">at</span>(i));</span><br><span class="line">            stream.<span class="built_in">writeTextElement</span>(<span class="string">&quot;stock_code&quot;</span>, stockList.<span class="built_in">at</span>(i));</span><br><span class="line">            stream.<span class="built_in">writeEndElement</span>();</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">QString</span>(<span class="string">&quot;[ %1-%2 ] write succeed!&quot;</span>)</span><br><span class="line">                        .<span class="built_in">arg</span>(name_list.<span class="built_in">at</span>(i))</span><br><span class="line">                        .<span class="built_in">arg</span>(urls_list.<span class="built_in">at</span>(i));</span><br><span class="line">        &#125;</span><br><span class="line">    stream.<span class="built_in">writeEndElement</span>();</span><br><span class="line">    stream.<span class="built_in">writeEndDocument</span>();</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Widget::read_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QString <span class="title">strFile</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(strFile)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::ReadOnly | QFile::Text))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">QString</span>(<span class="string">&quot;ERRO : Connot open file %1(%2)&quot;</span>)</span><br><span class="line">                        .<span class="built_in">arg</span>(strFile)</span><br><span class="line">                        .<span class="built_in">arg</span>(file.<span class="built_in">errorString</span>());</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果读取到文档结尾，并且没有出现错误</span></span><br><span class="line">    <span class="function">QXmlStreamReader <span class="title">reader</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line"></span><br><span class="line">    reader.<span class="built_in">readNext</span>(); <span class="comment">// 跳过根节点</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!reader.<span class="built_in">atEnd</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 读取下一个记号，它返回记号的类型</span></span><br><span class="line">            QXmlStreamReader::TokenType nType = reader.<span class="built_in">readNext</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 下面根据记号的类型来进行不同的输出</span></span><br><span class="line">            <span class="comment">// 读取文档的编码方式和版本号</span></span><br><span class="line">            <span class="keyword">if</span>(nType == QXmlStreamReader::StartDocument)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;DocEncoding = &quot;</span> </span><br><span class="line">                             &lt;&lt; reader.<span class="built_in">documentEncoding</span>() </span><br><span class="line">                             &lt;&lt; <span class="string">&quot;DocVersion = &quot;</span> </span><br><span class="line">                             &lt;&lt; reader.<span class="built_in">documentVersion</span>();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(reader.<span class="built_in">isStartElement</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(reader.<span class="built_in">name</span>() == <span class="string">&quot;tech&quot;</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;&lt;&quot;</span> &lt;&lt; reader.<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">                            </span><br><span class="line">                            <span class="keyword">if</span> (reader.<span class="built_in">attributes</span>().<span class="built_in">hasAttribute</span>(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">                                </span><br><span class="line">                                <span class="built_in">qDebug</span>() &lt;&lt; reader.<span class="built_in">attributes</span>()</span><br><span class="line">                                            .<span class="built_in">value</span>(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                            </span><br><span class="line">                            <span class="keyword">if</span> (reader.<span class="built_in">attributes</span>().<span class="built_in">hasAttribute</span>(<span class="string">&quot;url&quot;</span>))</span><br><span class="line">                                </span><br><span class="line">                                <span class="built_in">qDebug</span>() &lt;&lt; reader.<span class="built_in">attributes</span>()</span><br><span class="line">                                            .<span class="built_in">value</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">                            </span><br><span class="line">                            reader.<span class="built_in">readNext</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(reader.<span class="built_in">name</span>() == <span class="string">&quot;stock_code&quot;</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;&lt;&quot;</span> &lt;&lt; reader.<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">                            <span class="built_in">qDebug</span>() &lt;&lt; reader.<span class="built_in">readElementText</span>();</span><br><span class="line">                            reader.<span class="built_in">readNext</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            reader.<span class="built_in">readNext</span>();</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (nType == QXmlStreamReader::EndElement)</span><br><span class="line">                        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;&lt;/&quot;</span> &lt;&lt; reader.<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 打印字符</span></span><br><span class="line">                    <span class="keyword">if</span>(nType == QXmlStreamReader::Characters &amp;&amp; !reader.<span class="built_in">isWhitespace</span>())</span><br><span class="line">                        <span class="built_in">qDebug</span>() &lt;&lt; reader.<span class="built_in">text</span>();</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// 如果读取过程中出现错误，那么输出错误信息</span></span><br><span class="line">    <span class="keyword">if</span>(reader.<span class="built_in">hasError</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;ERRO : &quot;</span> &lt;&lt; reader.<span class="built_in">errorString</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>test.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">compangy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tech</span> <span class="attr">name</span>=<span class="string">&quot;Bing&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://cn.bing.com&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">stock_code</span>&gt;</span>MSFT.US<span class="tag">&lt;/<span class="name">stock_code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tech</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tech</span> <span class="attr">name</span>=<span class="string">&quot;Google&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://google.com&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">stock_code</span>&gt;</span>GOOG.US<span class="tag">&lt;/<span class="name">stock_code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tech</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tech</span> <span class="attr">name</span>=<span class="string">&quot;Baidu&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://baidu.com&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">stock_code</span>&gt;</span>BIDU.US<span class="tag">&lt;/<span class="name">stock_code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tech</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tech</span> <span class="attr">name</span>=<span class="string">&quot;Sougou&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://sougou.com&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">stock_code</span>&gt;</span>SOGO.US<span class="tag">&lt;/<span class="name">stock_code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tech</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tech</span> <span class="attr">name</span>=<span class="string">&quot;Xiaomi&quot;</span> <span class="attr">url</span>=<span class="string">&quot;https://mi.com&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">stock_code</span>&gt;</span>01810.HK<span class="tag">&lt;/<span class="name">stock_code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tech</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">compangy</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在学习这种读写方式时，我也踩了一些坑。</p><ol><li>XML有且只有一个根节点。</li><li>良好的方法封装有利于降低代码（模块）间的耦合；</li><li>错误信息输出、注释在新学习时必不可少；</li></ol><p>好了，本期的分享就到此为止了。如果对你有启发，欢迎转载~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近在学习 Qt 读写XML文件时，思考了一个问题，除了DOM和SAX外，还有没有更快捷的读写XML的方法？经过一番面向搜索引擎编程，我还真发现了一种方法——流读写XML(Write and read by stream)。今天就借此文向大家分享一下这种方法。&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Qt C++ MSVC 编译环境构建</title>
    <link href="https://blog.amoswu.top/b30a.html"/>
    <id>https://blog.amoswu.top/b30a.html</id>
    <published>2020-08-19T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>近期在Qt环境下编写C++代码时，我发现如果不安装 <code>Visual Stadio</code> 全家桶的话无法进行 <code>MSVC</code>编译。而我所面临的问题是，放在公司的这台笔记本存储空间只有<code>128GB</code>。对，你没有看错，是128G，而且是整个电脑。安装之前我忘记截图了，这里就po一张按照本文配置完后的磁盘截图。</p><p><img src="https://img.amoswu.top/post/20200820/hEbte.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/hEbte.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>当时，我就产生了一个想法，难道微软这么大的厂，不安装它的全家桶不至于让我们编译不了吧。在经过一番搜索之后，我发现了一个非常棒的解决方案。经过我一个多小时的测试，非常有效！！！</p><p>废话不多说了，上干货。</p><hr><table><thead><tr><th align="center">OS version</th><th align="center">Windows10 Pro 64bit</th></tr></thead><tbody><tr><td align="center">Qt version</td><td align="center">5.14.0</td></tr><tr><td align="center">Qt creator</td><td align="center">4.11.0</td></tr><tr><td align="center">MSVC version</td><td align="center">2017</td></tr></tbody></table><h3 id="一、原理解析"><a href="#一、原理解析" class="headerlink" title="一、原理解析"></a>一、原理解析</h3><p>我们都知道，如果你安装了<code>Visual Stadio</code>全家桶，在Qt Creator里可以自动检测到<code>MSVC</code>的编译环境。为什么Qt能自动检测出MSVC环境呢？经过一番研究和搜集，我发现，在安装<code>Visual Stadio</code>过程中，Visual Stadio自动对Qt的环境做了适配。</p><p>这种适配，主要是<strong>通过修改注册表中某一个项来实现的</strong>。大致过程是这样的，在安装完Visual Stadio后，它自动修改了注册表，当你再打开Qt Creator时，Qt Creator会自动去查找这个注册表是否有变化，如果发生了变化，就自动适配变化后的编译器，否则，就不做任何修改。</p><p>究竟是哪个注册表让这种神奇的现象发生的呢？</p><ol><li>Win 32bit环境下： <code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStuidio\SxS\VS7</code></li><li>Win 64bit环境下：<code>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStuidio\SxS\VS7</code></li></ol><p><img src="https://img.amoswu.top/post/20200820/c4Cx3.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/c4Cx3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200821195744303"></p><p>Qt Creator会遍历<code>SxS</code>文件夹下的每一个项来比对注册表的变化。</p><ul><li>如果键名（其实就是数字）大于 14（从 15 开始，即 msvc2017，那就把该键值（其实就是硬盘里的 vs 安装路径）后面拼接上 <code>/VC/Auxiliary/Build</code> 查看此处是不是有 <code>vcvarsall.bat</code> 文件。</li><li>否则（即键名小于等于 14），那就把该键值后面拼接上 <code>/VC7</code> 查看此处是不是有 <code>vcvarsall.bat</code> 文件。</li></ul><blockquote><p>上述的数值与MSVC版本的对应关系可以参考：</p><ol><li><a href="https://www.cnblogs.com/zjutzz/p/6013783.html">https://www.cnblogs.com/zjutzz/p/6013783.html</a></li><li><a href="https://docs.microsoft.com/zh-cn/visualstudio/releases/2019/release-notes">https://docs.microsoft.com/zh-cn/visualstudio/releases/2019/release-notes</a></li></ol></blockquote><p>正常情况下修改好这些注册表的键值，就能达到在Qt Creator使用MSVC编译代码的效果，除非你的电脑中找不到<code>vcvarsall.bat</code>文件。</p><h3 id="二、详细操作步骤"><a href="#二、详细操作步骤" class="headerlink" title="二、详细操作步骤"></a>二、详细操作步骤</h3><h4 id="1-前期准备"><a href="#1-前期准备" class="headerlink" title="1.前期准备"></a>1.前期准备</h4><h5 id="a-存储空间准备"><a href="#a-存储空间准备" class="headerlink" title="a.存储空间准备"></a>a.存储空间准备</h5><ul><li>安装好Qt Creator的前提下，至少预留<code>10GB</code>的磁盘空间。</li><li>没有安装Qt Creator的前提下，至少预留<code>20GB</code>的磁盘空间。</li></ul><h5 id="b-工具准备"><a href="#b-工具准备" class="headerlink" title="b.工具准备"></a>b.工具准备</h5><ul><li><code>Visual Stadio 2019 生成工具</code> <ul><li>下载地址：<a href="https://visualstudio.microsoft.com/zh-hans/downloads/">https://visualstudio.microsoft.com/zh-hans/downloads/</a></li></ul></li><li><code>qt-opensource-windows-x86-5.12.4.exe</code> （已安装请忽略）<ul><li>下载地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/qt/official_releases/qt/5.12/5.12.4/">https://mirrors.tuna.tsinghua.edu.cn/qt/official_releases/qt/5.12/5.12.4/</a></li></ul></li></ul><h4 id="2-安装工具"><a href="#2-安装工具" class="headerlink" title="2.安装工具"></a>2.安装工具</h4><p>篇幅所限，安装 Qt 的步骤在这里就省略了。</p><h5 id="Visual-Stadio-2019-生成工具的安装"><a href="#Visual-Stadio-2019-生成工具的安装" class="headerlink" title="Visual Stadio 2019 生成工具的安装"></a>Visual Stadio 2019 生成工具的安装</h5><ol><li>打开已经下载好的安装包，第一次打开需要下载一些包文件，下载速度视网速决定，请耐心等待。</li></ol><p><img src="https://img.amoswu.top/post/20200820/gzGNv.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/gzGNv.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200821202048835"></p><ol start="2"><li>进入界面后，只需勾选<code>C++生成工具</code>，在右侧的<code>安装详细信息</code>菜单中再继续勾选你需要的工具。</li></ol><blockquote><p>Tips：Qt 5.14 推荐采用 MSVC 2017，下图右侧也有 2017的可选项，但是该工具默认链接的是2019版，并且也能正常使用，所以就先不折腾了，保持默认，只勾图中左侧一个勾，右侧会自动勾选默认的几个选项。 然后就耐心等待联网下载和安装。</p></blockquote><p><img src="https://img.amoswu.top/post/20200820/vLFU6.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/vLFU6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200821202351645"></p><p>等安装完毕，就可以关闭这个页面了。</p><h5 id="3-增加Qt-Creator组件"><a href="#3-增加Qt-Creator组件" class="headerlink" title="3.增加Qt Creator组件"></a>3.增加Qt Creator组件</h5><p><em>如果你和我一样，在配置之前，已经安装完Qt Creator了，那请你继续看这一段。</em></p><ul><li> 打开Qt Creator安装目录</li></ul><p><img src="https://img.amoswu.top/post/20200820/mPhIX.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/mPhIX.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831164019946"></p><ul><li>打开<code>MaintenanceTool.exe</code></li></ul><p><img src="https://img.amoswu.top/post/20200820/tk4wf.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/tk4wf.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831164309640"></p><p><img src="https://img.amoswu.top/post/20200820/94w7x.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/94w7x.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831164338045"></p><ul><li>单击右下角<code>设置</code>，再单击<code>资料档案库</code>，添加<code>临时资料档案库</code>，地址是<code>http://mirrors.ustc.edu.cn/qtproject/online/qtsdkrepository/windows_x86/root/qt/</code></li></ul><p><img src="https://img.amoswu.top/post/20200820/lBLjT.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/lBLjT.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831164649634"></p><p><em>Ps : 这里有个大坑，必须说一下，下载元信息响应会很慢，稍等10分钟左右就可以了。</em></p><p><img src="https://img.amoswu.top/post/20200820/CEp6y.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/CEp6y.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831164932459"></p><ul><li>选择要添加的组件</li></ul><p><img src="https://img.amoswu.top/post/20200820/gANEV.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/gANEV.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831165236555"></p><h5 id="4-环境配置【重要！！！】"><a href="#4-环境配置【重要！！！】" class="headerlink" title="4.环境配置【重要！！！】"></a>4.环境配置【重要！！！】</h5><p>如果这时候你直接打开Qt Creator，你会发现编程器里面还是空的。别着急，要想让自动Qt Creator 检测刚刚安好的编译器，还有关键一步。</p><ul><li>关闭 Qt Creator；</li><li>按下 <code>Windows + R </code>在弹出的窗口输入<code>regedit</code>，打开注册表编辑器；</li></ul><p><img src="https://img.amoswu.top/post/20200820/6NoVJ.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/6NoVJ.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831170218746"></p><ul><li>打开后，在输入框粘贴下方的路径</li></ul><p><code>\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio</code></p><p><img src="https://img.amoswu.top/post/20200820/x2NdJ.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/x2NdJ.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831170314139"></p><ul><li>右击，新建 -&gt; 项 ，连续新建两项，注意<strong>层次关系和大小写。</strong> </li></ul><p><img src="https://img.amoswu.top/post/20200820/3Zc9X.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/3Zc9X.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="建好两项.png"></p><p>在 VS7 上新建字符串值，名称是16.0，值是 vs生成工具的安装目录下的一个子目录，具体看图中3处和横线处（仔细看图，我没写错），要保证横线处的路径下有红色箭头处的文件。</p><p><img src="https://img.amoswu.top/post/20200820/YqBas.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/YqBas.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="关键步骤.png"></p><p>至此，再打开 Qt Creator 会发现已经自动识别编译环境并且添加好了。</p><hr><p>当你兴奋地去新建一个测试程序时，你会发现一个新问题，这个编译环境不能单步调试。这是因为当前 Qt 无法调用 <code>cdb.exe</code>所致。下面我们手动为 Qt 与 cdb 工具建立链接。</p><h5 id="1-打开控制面板"><a href="#1-打开控制面板" class="headerlink" title="1. 打开控制面板"></a>1. 打开控制面板</h5><p><img src="https://img.amoswu.top/post/20200820/4eLsg.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/4eLsg.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831171453173"></p><p>依次找到 <code>程序 -&gt; 程序和功能</code> ，右击截图中的 Windows SDK ，选择 <code>更改</code>。</p><p><img src="https://img.amoswu.top/post/20200820/5qSkz.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/5qSkz.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831171633586"></p><p>选择 <code>Change</code></p><p><img src="https://img.amoswu.top/post/20200820/z8wMU.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/z8wMU.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831171751694"></p><p>勾选图中的选项。</p><p><img src="https://img.amoswu.top/post/20200820/udwQY.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/udwQY.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831171854682"></p><p>再次重启，Qt Creator ，你会发现 <code>Debugger</code>下拉框里已经探测到 cdb 了。</p><p><img src="https://img.amoswu.top/post/20200820/Dc1e6.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/Dc1e6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200831172232742"></p><blockquote><p>参考文章：</p><p><a href="https://hacpai.com/article/1592296047699#%E6%AD%A3%E7%A1%AE%E5%9C%A8-Windows-%E4%B8%8A%E9%85%8D%E7%BD%AE-MSVC-2019--%E4%BD%9C%E4%B8%BA-Qt-%E7%BC%96%E8%AF%91%E5%99%A8">正确在 Windows 上配置 MSVC(2019) 作为 Qt 编译器</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;近期在Qt环境下编写C++代码时，我发现如果不安装 &lt;code&gt;Visual Stadio&lt;/code&gt; 全家桶的话无法进行 &lt;code&gt;MSVC&lt;/code&gt;编译。而我所面临的问题是，放在公司的这台笔记本存储空间只有&lt;code&gt;128GB&lt;/code&gt;。对，你没有看错，是</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Qt C++ 对XML的增删改查</title>
    <link href="https://blog.amoswu.top/97ec.html"/>
    <id>https://blog.amoswu.top/97ec.html</id>
    <published>2020-08-13T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近，学习了Qt C++对XML的一系列操作。今天，把相关代码和注释贴在这里， 以备后续使用。</p><h3 id="什么是-XML"><a href="#什么是-XML" class="headerlink" title="什么是 XML"></a>什么是 XML</h3><blockquote><p>可扩展标记语言（英语：Extensible Markup Language，简称：XML）是一种标记语言。标记指计算机所能理解的信息符号，通过此种标记，计算机之间可以处理包含各种信息的文章等。</p><p>——from Wikipedia</p></blockquote><h3 id="Qt-如何操作-XML"><a href="#Qt-如何操作-XML" class="headerlink" title="Qt 如何操作 XML"></a>Qt 如何操作 XML</h3><h4 id="pro-文件"><a href="#pro-文件" class="headerlink" title=".pro 文件"></a>.pro 文件</h4><p>增加 <code>QT += xml</code>模块。</p><h4 id="cpp-文件"><a href="#cpp-文件" class="headerlink" title=".cpp 文件"></a>.cpp 文件</h4><p>头部 <code>#include &lt;QtXml&gt;</code></p><h5 id="写入-XML"><a href="#写入-XML" class="headerlink" title="写入 XML"></a>写入 XML</h5><p>源代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::write_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 打开或创建文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>; <span class="comment">//相对路径、绝对路径、资源路径都可以</span></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::WriteOnly | QFile::Truncate))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    QDomDocument doc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入XML头部</span></span><br><span class="line">    QDomProcessingInstruction instruction;<span class="comment">//添加处理命令</span></span><br><span class="line">    instruction = doc.<span class="built_in">createProcessingInstruction</span>(<span class="string">&quot;xml&quot;</span>, <span class="string">&quot;version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;&quot;</span>);</span><br><span class="line">    doc.<span class="built_in">appendChild</span>(instruction);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加根节点</span></span><br><span class="line">    QDomElement root = doc.<span class="built_in">createElement</span>(<span class="string">&quot;library&quot;</span>);</span><br><span class="line">    doc.<span class="built_in">appendChild</span>(root);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加第一个子节点及其元素</span></span><br><span class="line">    QDomElement book = doc.<span class="built_in">createElement</span>(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">    book.<span class="built_in">setAttribute</span>(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>); <span class="comment">// 方式一：创建属性  其中键值对的值可以是各种类型</span></span><br><span class="line">    QDomAttr time = doc.<span class="built_in">createAttribute</span>(<span class="string">&quot;time&quot;</span>);</span><br><span class="line">    time.<span class="built_in">setValue</span>(<span class="string">&quot;2020/08/11&quot;</span>); <span class="comment">// 方式二：创建属性  值必须是字符串</span></span><br><span class="line">    book.<span class="built_in">setAttributeNode</span>(time);</span><br><span class="line"></span><br><span class="line">    QDomElement title = doc.<span class="built_in">createElement</span>(<span class="string">&quot;title&quot;</span>); <span class="comment">// 创建子元素</span></span><br><span class="line">    QDomText text; <span class="comment">// 设置括号标签中间的值</span></span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;C++ primer&quot;</span>);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(title);</span><br><span class="line">    title.<span class="built_in">appendChild</span>(text);</span><br><span class="line"></span><br><span class="line">    QDomElement author = doc.<span class="built_in">createElement</span>(<span class="string">&quot;author&quot;</span>); <span class="comment">// 创建子元素</span></span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;Stanley Lippman&quot;</span>);</span><br><span class="line">    author.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(author);</span><br><span class="line">    root.<span class="built_in">appendChild</span>(book);</span><br><span class="line"></span><br><span class="line">    QDomElement price = doc.<span class="built_in">createElement</span>(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;$29.9&quot;</span>);</span><br><span class="line">    price.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(price);</span><br><span class="line">    root.<span class="built_in">appendChild</span>(book);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加第二个子节点及其子元素，部分变量只需重新赋值</span></span><br><span class="line">    book = doc.<span class="built_in">createElement</span>(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">    book.<span class="built_in">setAttribute</span>(<span class="string">&quot;id&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    time = doc.<span class="built_in">createAttribute</span>(<span class="string">&quot;time&quot;</span>);</span><br><span class="line">    time.<span class="built_in">setValue</span>(<span class="string">&quot;2020/08/10&quot;</span>);</span><br><span class="line">    book.<span class="built_in">setAttributeNode</span>(time);</span><br><span class="line">    title = doc.<span class="built_in">createElement</span>(<span class="string">&quot;title&quot;</span>);</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;Thinking in Java&quot;</span>);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(title);</span><br><span class="line">    title.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    author = doc.<span class="built_in">createElement</span>(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;Bruce Eckel&quot;</span>);</span><br><span class="line">    author.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(author);</span><br><span class="line">    root.<span class="built_in">appendChild</span>(book);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出到文件</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">out_stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    doc.<span class="built_in">save</span>(out_stream, <span class="number">4</span>); <span class="comment">// 缩进4格</span></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调试结果 <code>test.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">library</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">time</span>=<span class="string">&quot;2020/08/11&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>C++ primer<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Stanley Lippman<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>$29.9<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">time</span>=<span class="string">&quot;2020/08/10&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Thinking in Java<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Bruce Eckel<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">library</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="读取-XML"><a href="#读取-XML" class="headerlink" title="读取 XML"></a>读取 XML</h5><p>源代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::read_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 打开或创建文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>; <span class="comment">// 相对路径、绝对路径、资源路径</span></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::ReadOnly))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    QDomDocument doc;</span><br><span class="line">    <span class="keyword">if</span>(!doc.<span class="built_in">setContent</span>(&amp;file))</span><br><span class="line">        &#123;</span><br><span class="line">            file.<span class="built_in">close</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    QDomElement root = doc.<span class="built_in">documentElement</span>(); <span class="comment">// 返回根节点</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; root.<span class="built_in">nodeName</span>();</span><br><span class="line">    QDomNode node = root.<span class="built_in">firstChild</span>();</span><br><span class="line">    <span class="keyword">while</span>(!node.<span class="built_in">isNull</span>()) <span class="comment">// 如果节点不空</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(node.<span class="built_in">isElement</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="comment">// 转换为元素，注意元素和节点是两个数据结构</span></span><br><span class="line">                    QDomElement e = node.<span class="built_in">toElement</span>(); </span><br><span class="line">                <span class="comment">// 打印键值对，tagName和nodeName是一个东西</span></span><br><span class="line">                    <span class="built_in">qDebug</span>() &lt;&lt; e.<span class="built_in">tagName</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; e.<span class="built_in">attribute</span>(<span class="string">&quot;id&quot;</span>) &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; e.<span class="built_in">attribute</span>(<span class="string">&quot;time&quot;</span>); </span><br><span class="line">                    QDomNodeList list = e.<span class="built_in">childNodes</span>();</span><br><span class="line">                <span class="comment">// 遍历子元素，count和size都可以使用，可用于标签数计数</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; list.<span class="built_in">count</span>(); i++) </span><br><span class="line">                        &#123;</span><br><span class="line">                            QDomNode n = list.<span class="built_in">at</span>(i);</span><br><span class="line">                            <span class="keyword">if</span>(node.<span class="built_in">isElement</span>())</span><br><span class="line">                                &#123;</span><br><span class="line">                                    <span class="built_in">qDebug</span>() &lt;&lt; n.<span class="built_in">nodeName</span>() &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; n.<span class="built_in">toElement</span>().<span class="built_in">text</span>();</span><br><span class="line">                                &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            node = node.<span class="built_in">nextSibling</span>();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="增加-XML-内容"><a href="#增加-XML-内容" class="headerlink" title="增加 XML 内容"></a>增加 XML 内容</h5><p>源代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 增加XML内容</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::add_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 打开文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>; <span class="comment">// 相对路径、绝对路径、资源路径都可以</span></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::ReadOnly))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加一个以及子节点以及元素</span></span><br><span class="line">    QDomDocument doc;</span><br><span class="line">    <span class="keyword">if</span>(!doc.<span class="built_in">setContent</span>(&amp;file))</span><br><span class="line">        &#123;</span><br><span class="line">            file.<span class="built_in">close</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    QDomElement root = doc.<span class="built_in">documentElement</span>();</span><br><span class="line">    QDomElement book = doc.<span class="built_in">createElement</span>(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">    book.<span class="built_in">setAttribute</span>(<span class="string">&quot;id&quot;</span>, <span class="number">3</span>);</span><br><span class="line">    book.<span class="built_in">setAttribute</span>(<span class="string">&quot;time&quot;</span>, <span class="string">&quot;1999/09/09&quot;</span>);</span><br><span class="line">    QDomElement title = doc.<span class="built_in">createElement</span>(<span class="string">&quot;title&quot;</span>);</span><br><span class="line">    QDomText text;</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;Pride and Prejudice&quot;</span>);</span><br><span class="line">    title.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(title);</span><br><span class="line">    QDomElement author = doc.<span class="built_in">createElement</span>(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;Jane Austen&quot;</span>);</span><br><span class="line">    author.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(author);</span><br><span class="line">    QDomElement price = doc.<span class="built_in">createElement</span>(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">    text = doc.<span class="built_in">createTextNode</span>(<span class="string">&quot;$69.9&quot;</span>);</span><br><span class="line">    price.<span class="built_in">appendChild</span>(text);</span><br><span class="line">    book.<span class="built_in">appendChild</span>(price);</span><br><span class="line">    root.<span class="built_in">appendChild</span>(book);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::WriteOnly | QFile::Truncate))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 先读进来，再重写 ，如果不用truncate就是在后面追加内容</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出到文件</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">out_stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    doc.<span class="built_in">save</span>(out_stream, <span class="number">4</span>); <span class="comment">// 缩进4格</span></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="删除-XML-内容"><a href="#删除-XML-内容" class="headerlink" title="删除 XML 内容"></a>删除 XML 内容</h5><p>源代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除XML内容</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::remove_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 打开文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>; <span class="comment">// 相对路径、绝对路径、资源路径都可以</span></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::ReadOnly))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除一个一级子节点及其元素，外层节点删除内层节点与此相同</span></span><br><span class="line">    QDomDocument doc;</span><br><span class="line">    <span class="keyword">if</span>(!doc.<span class="built_in">setContent</span>(&amp;file))</span><br><span class="line">        &#123;</span><br><span class="line">            file.<span class="built_in">close</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    file.<span class="built_in">close</span>(); <span class="comment">// 一定要记得关闭，不然无法完成操作</span></span><br><span class="line"></span><br><span class="line">    QDomElement root = doc.<span class="built_in">documentElement</span>();</span><br><span class="line">    QDomNodeList list = doc.<span class="built_in">elementsByTagName</span>(<span class="string">&quot;book&quot;</span>); <span class="comment">// 由标签名定位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; list.<span class="built_in">count</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            QDomElement e = list.<span class="built_in">at</span>(i).<span class="built_in">toElement</span>();</span><br><span class="line">            <span class="keyword">if</span>(e.<span class="built_in">attribute</span>(<span class="string">&quot;time&quot;</span>) == <span class="string">&quot;2020/08/09&quot;</span>) <span class="comment">// 以属性名定位，类似于hash方式</span></span><br><span class="line">                &#123;</span><br><span class="line">                    root.<span class="built_in">removeChild</span>(list.<span class="built_in">at</span>(i)); <span class="comment">// 这里仅删除一个节点，可以加入break</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::WriteOnly | QFile::Truncate))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出到文件</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">out_stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    doc.<span class="built_in">save</span>(out_stream, <span class="number">4</span>);</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="更新-XML-内容"><a href="#更新-XML-内容" class="headerlink" title="更新 XML 内容"></a>更新 XML 内容</h5><p>源代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新XML内容</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::update_xml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 打开文件</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;test.xml&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::ReadOnly))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新一个标签项，如果知道XML的结构，直接定位到那个标签定点更新</span></span><br><span class="line">    <span class="comment">//或者用遍历的方法去匹配tagname或者attribute，value来更新</span></span><br><span class="line">    QDomDocument doc;</span><br><span class="line">    <span class="keyword">if</span>(!doc.<span class="built_in">setContent</span>(&amp;file))</span><br><span class="line">        &#123;</span><br><span class="line">            file.<span class="built_in">close</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    QDomElement root = doc.<span class="built_in">documentElement</span>();</span><br><span class="line">    QDomNodeList list = root.<span class="built_in">elementsByTagName</span>(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">    QDomNode node = list.<span class="built_in">at</span>(list.<span class="built_in">size</span>() - <span class="number">1</span>).<span class="built_in">firstChild</span>(); <span class="comment">// 定位到第三格以及子节点的子元素</span></span><br><span class="line">    QDomNode oldnode = node.<span class="built_in">firstChild</span>(); <span class="comment">// 标签之间的内容作为节点的子节点出现，当前是 How to learn Python</span></span><br><span class="line">    node.<span class="built_in">firstChild</span>().<span class="built_in">setNodeValue</span>(<span class="string">&quot;Update_success&quot;</span>);</span><br><span class="line">    QDomNode newnode = node.<span class="built_in">firstChild</span>();</span><br><span class="line">    node.<span class="built_in">replaceChild</span>(newnode, oldnode);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!file.<span class="built_in">open</span>(QFile::WriteOnly | QFile::Truncate))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// 输出到文件</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">out_stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    doc.<span class="built_in">save</span>(out_stream, <span class="number">4</span>); <span class="comment">// 缩进4格</span></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>今天的分享就到这里，后续我会继续更新我的Qt学习记录~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近，学习了Qt C++对XML的一系列操作。今天，把相关代码和注释贴在这里， 以备后续使用。&lt;/p&gt;
&lt;h3 id=&quot;什么是-XML&quot;&gt;&lt;a href=&quot;#什么是-XML&quot; class=&quot;headerlink&quot; title=&quot;什么是 XML&quot;&gt;&lt;/a&gt;什么是 XML&lt;/h</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
    <category term="教程" scheme="https://blog.amoswu.top/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Qt Creator 编辑器下的代码格式化</title>
    <link href="https://blog.amoswu.top/48d2.html"/>
    <id>https://blog.amoswu.top/48d2.html</id>
    <published>2020-08-10T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>对于习惯使用<code>VsCode</code>、<code>SublimeText</code>、<code>JetBrains 全家桶</code>等编译器的开发人员来说，一键格式化代码是必不可少的功能。最近，我在进行Qt C++开发时发现，Qt Creator默认没有一键格式化代码相关的配置。经过几小时的面向搜索引擎解决问题后，我发现了一个可行的解决方案，今天在这里分享给大家。</p><p>大致的思路是可以以简单描述为：配置<code>Beautifier</code>:arrow_right:下载<code>Artistic Style</code>:arrow_right:配置 <code>Artistic Style</code>:arrow_right:设置<code>快捷键</code>。</p><p>下面我详细展开每个步骤，一一讲解。</p><p><em>本文只针对Windows操作系统下的配置进行验证，其他操作系统请自行搜索相关教程。</em></p><h3 id="1-配置-Beautifier"><a href="#1-配置-Beautifier" class="headerlink" title="1.配置 Beautifier"></a>1.配置 Beautifier</h3><p>打开Qt Creator，依次点击菜单栏的<code>帮助</code>、<code>关于插件</code>。</p><p>展开<code>C++</code>选项卡，找到<code>Beautifier(experimental)</code>，勾选<code>Load</code>打开Beautifier。</p><p><img src="https://img.amoswu.top/post/20200820/C7E5w.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/C7E5w.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811112412501"></p><p>此时，系统会提示<code>重启</code>Qt Creator后生效，我们立刻重启编辑器。</p><p>重启后，我们需要检查是否已开启 Beautifier，依次点击菜单栏的<code>工具</code>、<code>选项</code>。</p><p>如下图所示，在左侧有Beautifier选项卡时，说明开启成功。</p><p><img src="http://img.wehuihua.cn/blog/20200811112754.png" class="lazyload" data-srcset="http://img.wehuihua.cn/blog/20200811112754.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811112751997"></p><h3 id="2-下载-Artistic-Style"><a href="#2-下载-Artistic-Style" class="headerlink" title="2.下载 Artistic Style"></a>2.下载 Artistic Style</h3><p>这里有两个下载源，</p><p>1）<a href="https://sourceforge.net/projects/astyle/files/">https://sourceforge.net/projects/astyle/files/</a> –来自官方（不推荐，下载速度较慢）</p><p>2）<a href="https://amos.lanzous.com/iXURDfi7zgb">https://amos.lanzous.com/iXURDfi7zgb</a> –本人上传（推荐，解压密码：<code>as2020</code>）</p><h3 id="3-配置-Artistic-Style"><a href="#3-配置-Artistic-Style" class="headerlink" title="3.配置 Artistic Style"></a>3.配置 Artistic Style</h3><p>下载完成并解压，将解压后的文件夹放到<code>非中文路径</code>下，接着打开上一张图片所示的<code>选项</code>窗口，点击<code>Beautifier</code>。</p><ul><li><p>点击<code>General</code>选项卡，可根据自己的需求决定是否勾选 <code>Enable auto format on file save</code>（当文件被保存时自动格式化）。</p></li><li><p>在<code>Tool</code>栏选择<code>Artistic Style</code>，下面两项：<code>Restrict to MIME Types</code>和 <code>Restrict to files contained in current project</code>可以根据自己的需要自由选择。</p></li><li><p>点击 <code>Artistic Style</code>选项卡，在 <code>Artistic Style command</code> 选项中，点击<code>浏览</code>选择打开刚刚下载并解压好的 Artistic Style文件夹，再打开<code>bin</code>文件夹，找到<code>AStyle.exe</code>,点击<code>打开</code>，看到显示字色变成白色，说明打开成功。</p></li><li><p>继续给AStyle增加格式化代码的配置，这里提供了四个选项，</p><ul><li><code>.astylerc defined in project files</code> 表示使用在项目文件 pro 中，定义 DISTFILES 中的任意 .astylerc 文件选项；</li><li><code>Use specific config file</code> 表示使用特定的某个配置选项文件；</li><li><code>Use file .astylerc or astylerc in HOME或APPDATA</code> 表示使用环境变量HOME（Linux）目录中的 .astylerc 选项文件，或者APPDATA（Windows）目录中的 astylerc 选项文件；</li><li><code>Use customized style</code> 表示使用用户自定义的选项配置（内容与astylerc文件相同）。</li></ul></li></ul><p>这里我选用的是第四个选项，自定义配置。这种配置方式相对简单，因为Artistic Style 本身提供了一些代码格式化的风格。</p><p><img src="https://img.amoswu.top/post/20200820/CfusK.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/CfusK.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811115754063"></p><p>依次点击<code>Add</code>、输入自定义的一个<code>名称</code>、输入<code>配置值</code>，我这里选用的是<code>GNU</code>风格，Artistic Style 自带了<code>15</code>种配置风格。</p><p>这里介绍几种常见的代码风格，更多的代码风格请参考官方<a href="http://astyle.sourceforge.net/astyle.html#_Brace_Style_Options">帮助文档</a>。</p><p><strong>allman风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (isBar)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">bar</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>java风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (isBar)&#123;</span><br><span class="line"><span class="built_in">bar</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>kr风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (isBar)&#123;</span><br><span class="line"><span class="built_in">bar</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>gnu风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isBar)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">bar</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>linux风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isFoo) &#123;</span><br><span class="line">                <span class="built_in">bar</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>google风格</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Foo</span><span class="params">(<span class="type">bool</span> isBar)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isBar) &#123;</span><br><span class="line">        <span class="built_in">bar</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-设置快捷键"><a href="#4-设置快捷键" class="headerlink" title="4.设置快捷键"></a>4.设置快捷键</h3><p>依次点击菜单栏<code>工具</code>、<code>环境</code>、<code>键盘</code>，找到<code>FormatFile</code>，然后点击<code>Record</code>录制自己的快捷键，最后点击<code>Appply</code>。</p><p><img src="https://img.amoswu.top/post/20200820/w7tjP.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/w7tjP.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811133917824"></p><p>到这儿，我们Qt 环境配置的教程就结束了，后续我会继续带来Qt学习的相关笔记、想法和其他干货~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;对于习惯使用&lt;code&gt;VsCode&lt;/code&gt;、&lt;code&gt;SublimeText&lt;/code&gt;、&lt;code&gt;JetBrains 全家桶&lt;/code&gt;等编译器的开发人员来说，一键格式化代码是必不可少的功能。最近，我在进行Qt C++开发时发现，Qt Creator默认没</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Qt C++ Windows10环境配置</title>
    <link href="https://blog.amoswu.top/584e.html"/>
    <id>https://blog.amoswu.top/584e.html</id>
    <published>2020-08-09T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>笔者2020年开始，从事了C++开发的相关工作，目前国内主流的C++开发工具多建立在可视化框架Qt的基础上，这一篇我们就来讲一讲Windows10 系统下如何快速搭建Qt for C++环境。</p></blockquote><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h2><div class="story post-story"><h3 id="1-C-简介"><a href="#1-C-简介" class="headerlink" title="1)C++简介"></a>1)C++简介</h3><p><code>C++</code>是一种被广泛使用的计算机程序设计语言。它是一种通用程序设计语言，支持多重编程模式，例如过程化程序设计、数据抽象、面向对象程序设计、泛型程序设计和设计模式等。</p><h3 id="2-Qt简介"><a href="#2-Qt简介" class="headerlink" title="2)Qt简介"></a>2)Qt简介</h3><p><code>Qt</code>是一个跨平台的C++应用程序开发框架。广泛用于开发GUI程序，这种情况下又被称为部件工具箱。也可用于开发非GUI程序，比如控制台工具和服务器。Qt被用于OPIE、Skype、VLC media player、Adobe Photoshop Elements、VirtualBox与Mathematica以及被Autodesk、欧洲空间局、梦工厂、Google、HP、KDE、卢卡斯影业、西门子公司、沃尔沃集团, 华特迪士尼动画制作公司、三星集团、飞利浦、Panasonic 所使用。</p><p><em>来自<a href="https://wikipedia.org/">维基百科</a>  ,<a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjtnYPcsJDrAhWXd94KHZsyAfIQFjACegQIDRAB&url=https://spectrum.ieee.org/static/interactive-the-top-programming-languages-2020&usg=AOvVaw1CkOZTN3lc6OliFKLNFOGS">IEEE Spectrum Programming Language 2020</a>。</em></p></div><h2 id="2-Qt下载"><a href="#2-Qt下载" class="headerlink" title="2. Qt下载"></a>2. Qt下载</h2><div class="story post-story"><p>目前Qt的同大多数框架一样，遵循两种版本推送方案，一种是稳定版，目前最新版本号为 5.15 ，另一种是预览版，目前最新版本号为 6.0 Snapshot。</p><p>Qt官网为 <a href="https://qt.io/">https://qt.io</a> 。</p><p><img src="https://img.amoswu.top/post/20200820/ZI1kW.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/ZI1kW.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="qt官网"></p><p>Qt有多种下载方式，这里只贴出笔者使用的一种方式——<a href="https://mirrors.tuna.tsinghua.edu.cn/qt/official_releases/qt/">清华大学开源软件镜像站</a> 。此镜像站提供Linux、MacOS、Windows下的三种安装包，满足大多数开发者的开发环境。</p><p><img src="https://img.amoswu.top/post/20200820/4NoKt.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/4NoKt.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="清华大学开源镜像站"></p></div><h2 id="3-安装"><a href="#3-安装" class="headerlink" title="3.安装"></a>3.安装</h2><div class="story post-story"><p>在准备好安装包后，我们就要进入正题——安装Qt并配置环境了。</p><p>1)双击运行下载好的 <code>qt-opensource-windows-x86-5.12.exe</code>。</p><p>2)选择<code>Next</code>，进行下一步。</p><p><img src="https://img.amoswu.top/post/20200820/hFEvI.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/hFEvI.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811104343120"></p><p>3)最新版会要求登录或注册一个<code>Qt账户</code>，这里的<code>5.12.0</code>版本支持跳过此步，最新版不支持，所以建议大家去注册一个。</p><p><img src="https://img.amoswu.top/post/20200820/UwLH3.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/UwLH3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811105003243"></p><p>4)继续点击<code>下一步</code>，再点击<code>下一步</code>，选择安装目录。</p><p><img src="https://img.amoswu.top/post/20200820/2Qgce.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/2Qgce.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811105129336"></p><p>5)再次点击<code>下一步</code>，进行Qt creator 设置</p><p><img src="http://img.wehuihua.cn/blog/20200811105331.png" class="lazyload" data-srcset="http://img.wehuihua.cn/blog/20200811105331.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811105329840"></p><p>选择显示的对应版本，我这里是<code>Qt 5.12.0</code>，勾选其中对应的<code>Mingw</code>，我这里的是<code>Mingw 7.3.0 64bit</code>。如果你还安装了<code>Visual Studio</code>开发环境，可以选择对应版本的<code>MSVC</code>。</p><p><img src="https://img.amoswu.top/post/20200820/rHSCY.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/rHSCY.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811105651044"></p><p>6)再往后就是无脑<code>下一步</code>啦，知道看到下面这个界面，就说明安装和配置都完成啦~</p><p><img src="https://img.amoswu.top/post/20200820/mZWCV.png" class="lazyload" data-srcset="https://img.amoswu.top/post/20200820/mZWCV.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20200811105811958"></p><p>安装完成后，可以在<code>开始菜单</code>和<code>桌面</code>看到<code>Qt Creator</code>图标，双击打开就可以编写Qt C++代码咯~ :smile:</p><p>本期教程就到这里，下一期我们一起讲讲 <code>Qt Creator 编辑器下的代码格式化</code>~</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;笔者2020年开始，从事了C++开发的相关工作，目前国内主流的C++开发工具多建立在可视化框架Qt的基础上，这一篇我们就来讲一讲Windows10 系统下如何快速搭建Qt for C++环境。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="2020" scheme="https://blog.amoswu.top/tags/2020/"/>
    
    <category term="Qt" scheme="https://blog.amoswu.top/tags/Qt/"/>
    
    <category term="C++" scheme="https://blog.amoswu.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>辉煌70载，与您同在</title>
    <link href="https://blog.amoswu.top/121.html"/>
    <id>https://blog.amoswu.top/121.html</id>
    <published>2019-09-30T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:16.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>爱祖国，首先要了解祖国；不了解，就说不上爱。</p><p>——任继愈（前国家图书馆馆长）</p></blockquote><p><img src="https://img.amoswu.top/bg/hl000.jpg" class="lazyload" data-srcset="https://img.amoswu.top/bg/hl000.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>70年，弹指一挥间。新中国在一代又一代的奋斗者接续奋斗下不断成长。我有幸成为奋斗者中的一员，在祖国母亲70华诞到来之际，我想借此文献上对祖国母亲的祝福！</p><p>如同上面这句名言所说，爱祖国就应该先了解祖国。我搜集了新中国成立70周年以来的一些老照片，特意把它们制作成图片，与你一起共同回顾伟大祖国的成长历程。</p><div><img alt="" src="https://img.amoswu.top/post/hl001.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl001.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /><img alt="" src="https://img.amoswu.top/post/hl002.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl002.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /><img alt="" src="https://img.amoswu.top/post/hl003.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl003.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /><img alt="" src="https://img.amoswu.top/post/hl004.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl004.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /><img alt="" src="https://img.amoswu.top/post/hl005.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl005.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /><img alt="" src="https://img.amoswu.top/post/hl006.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/hl006.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="margin: 0 auto;" /></div><p>网络上一直流行着一句话，“此生无悔入华夏，来生愿在种花家”。这也是新时代我们青年对伟大祖国表达的最深切的爱意。最近由陈凯歌等七位导演联合执导的电影《我和我的祖国》还没上映预售就突破了2亿元。“以小人物见证大时代，献礼新中国成立70周年”是这部影片的目标。电影上映前期，适逢电影主题曲《我和我的祖国》发行，还是那熟悉的旋律，还是那熟悉的歌词，不同的是歌曲背后的新故事。此歌曲的演唱者是华语乐坛著名的女歌手——<strong>王菲</strong>。王菲对歌曲的诠释也让这首经典旋律呈现出一种别样的自在、温暖、辽阔，营造出一种祥和的包容感。</p><p>歌曲25日在网易云音乐首发，短短五天的时间里，歌曲评论已超过<strong>8万条</strong>。我特意利用自己学到知识，抓取了这首歌9月25日-9月29日期间的<strong>3万多条</strong>热评数据，进行了整理分析，最终生成了如下的一张“<strong>词云热图</strong>”。</p><p><img src="https://img.amoswu.top/post/1Kk75.png" class="lazyload" data-srcset="https://img.amoswu.top/post/1Kk75.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><img src="https://img.amoswu.top/post/gqcy01.png" class="lazyload" data-srcset="https://img.amoswu.top/post/gqcy01.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>从图中热词的数目和字号大小，不难分辨，多数听过这首歌的网友都深深爱着祖国的这片热土，他们的声音也代表了今日中国14亿人民的心声。借此图，我也想深深的送上一句，“<strong>我的祖国，生日快乐！</strong>”</p><p>这盛世，如您所愿。我们生活的时代，是最好的时代，也是先烈们梦想中的时代。我相信，站在这通向伟大复兴的起点上，伟大祖国一定会越来越好！再一次，深深地<strong>祝福伟大祖国，繁荣富强！</strong></p><p>无论何时何地，我们都与祖国肩并肩。辉煌70载，与您同在！</p><blockquote><p>参考内容：</p><p>[1] 微信公众号“拾遗” - <a href="https://mp.weixin.qq.com/s/DenBVqF7xrpF1wLzSjk1Ig">70张老照片告诉你，什么是新中国</a></p><p>[2] 百度百科 - 成渝铁路、武汉长江大桥等词条</p><p>[3] 百度百科 - 我和我的祖国（2019年陈凯歌等执导电影）词条</p><p>[4]网站 - 网易、阿里巴巴、腾讯等各大企业官网</p><p>[5]网易云音乐 - 《王菲-我和我的祖国》</p></blockquote><p><em>部分图片来源于网络，侵权请联系删除</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;爱祖国，首先要了解祖国；不了解，就说不上爱。&lt;/p&gt;
&lt;p&gt;——任继愈（前国家图书馆馆长）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/bg/hl000.jpg&quot; class=&quot;laz</summary>
      
    
    
    
    <category term="特别博文" scheme="https://blog.amoswu.top/categories/%E7%89%B9%E5%88%AB%E5%8D%9A%E6%96%87/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="2019" scheme="https://blog.amoswu.top/tags/2019/"/>
    
    <category term="特别博文" scheme="https://blog.amoswu.top/tags/%E7%89%B9%E5%88%AB%E5%8D%9A%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>为什么“中台”这么火？</title>
    <link href="https://blog.amoswu.top/836c.html"/>
    <id>https://blog.amoswu.top/836c.html</id>
    <published>2019-08-31T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/DfCmB.png" class="lazyload" data-srcset="https://img.amoswu.top/post/DfCmB.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><h2 id="00-引言"><a href="#00-引言" class="headerlink" title="00.引言"></a>00.引言</h2><div class="story post-story"><p>从去年10月份以来，国内几大互联网公司相继进行了组织架构调整，这其中不乏有BAT（百度、阿里、腾讯）、海尔、滴滴、京东等公司，值得注意的是这一轮的组织架构调整各大公司都多出了一个名叫“中台”的架构。</p><p>在这样一个追求管理个性化的互联网时代，为什么国内各大互联网都要搭建一个或多个“中台”呢？说来原因有很多，我们不妨先从认识“中台”说起。</p></div><h2 id="01-谁发明了“中台”？"><a href="#01-谁发明了“中台”？" class="headerlink" title="01.谁发明了“中台”？"></a>01.谁发明了“中台”？</h2><div class="story post-story"><p>“中台”最早是由<strong>美军的作战体系</strong>演化而来的。美军在二战时期，以<strong>军</strong>来为单位作战；到了越南战争时期，以<strong>营</strong>为单位作战；再到中东战争的时候，则以7人或者11人的<strong>极小班排</strong>去作战，这是今天最灵活的军事组织，也是核心竞争力和打击能力最强的一个组织。而美军之所以能灵活作战，敢放这么小的团队到前方，是因为有非常强的<strong>导弹指挥系统</strong>，有非常强大的中台能力，能支持这样的小团队快速做判断，并且引领整个打击。</p><p><img src="https://img.amoswu.top/post/fqEY4.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/fqEY4.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p><strong>有着军事背景的“中台”又是怎样“跳槽”到互联网行业的呢？</strong></p><p>这就得说一说这家来自芬兰的游戏公司了，它的作品具有强大的生命力，它的全球累计用户规模已经超过10亿，它2015年时的估值就达到了52.5亿美元，它就是——<strong>Supercell</strong>。到目前为止，该公司已经开发和运营了包括《<strong>部落冲突</strong>》（Clash of Clans）、《<strong>海岛奇兵</strong>》（Clash Royale）在内的十余款超火爆游戏。这家公司的一年利润就有15亿美元，而这家公司的员工人数仅有不到200个人，公司里每一个开发游戏的小团队仅有6-7人。</p><p><img src="https://img.amoswu.top/post/hEWum.png" class="lazyload" data-srcset="https://img.amoswu.top/post/hEWum.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>读到这里，相信你已经猜到了。正是Supercell首先在互联网行业构建了“中台”。他们将游戏开发过程中公共和通用的游戏素材和算法整合起来，并积累了非常科学的研发工具和框架体系，构建了一个功能非常强大的中台。就这样，一套素材被用于多个项目的同时开发，“中台”架构就进入了人们的视野。</p><p><strong>“中台”又是如何被引入到国内的呢？</strong></p><p>那就得从阿里巴巴说起了。2015年，阿里巴巴董事局主席、阿里创始人马云带领阿里一行高管前往Supercell公司进行了考察，考察过程中他们了解到在Supercell公司5-7人组成的独立开发团队被命名为“<strong>Cell</strong>”（细胞），这些Cell的协作得益于背后强大的中台的支撑。</p><p>回国后，阿里巴巴集团于2015年年底正式启动了“<strong>中台战略</strong>”，构建符合IT时代的更具创新性、灵活性的“大中台、小前台”组织机制和业务机制，即作为前台的一线业务会更敏捷、更快速适应瞬息万变的市场，而中台将集合整个集团的运营数据能力、产品技术能力，对各前台业务形成强力支撑。</p><p><img src="https://img.amoswu.top/post/acYbB.png" class="lazyload" data-srcset="https://img.amoswu.top/post/acYbB.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>从“中台”的诞生，到“跳槽”再到“移民”，中台的前世就我们已经了解清楚了。接下来我们一起来聊聊——什么是“中台”？</p></div><h2 id="02-什么是“中台”？"><a href="#02-什么是“中台”？" class="headerlink" title="02.什么是“中台”？"></a>02.什么是“中台”？</h2><div class="story post-story"><p>迄今为止，“中台”（Middle Office）的定义有很多，我认为，下面两个定义是对“中台”的定义最佳的阐述。</p><h3 id="定义1来自-ThoughtWorks-高级咨询师-王建"><a href="#定义1来自-ThoughtWorks-高级咨询师-王建" class="headerlink" title="定义1来自 ThoughtWorks 高级咨询师 王建"></a>定义1来自 ThoughtWorks 高级咨询师 王建</h3><blockquote><p>中台是真正为前台而生的平台（可以是技术平台，业务能力甚至是组织机构），它存在的唯一目的就是更好的服务前台规模化创新，进而更好的响应服务引领用户，使企业真正做到自身能力与用户需求的持续对接。</p></blockquote><h3 id="定义2来自得到"><a href="#定义2来自得到" class="headerlink" title="定义2来自得到"></a>定义2来自得到</h3><blockquote><p>中台是一个能同时支撑多个业务，让业务之间的信息形成交互和增强的机制。</p></blockquote><p>怎么？是不是有点抽象？让我来举几个例子帮助你理解一下什么是“中台”。</p><ul><li>它可以是我们家用的“<strong>路由器</strong>”，我们在家要连接互联网，肯定离不开WiFi，而发射WiFi信号的路由器，在我们家庭上网的场景中充当的就是“中台”的角色。它即负责连接我们的联网设备，又负责与外网发生连接。</li><li>它也可以是维修工人的“<strong>工具箱</strong>”，在维修不同的机器时，都可以从工具箱中找出顺手的工具，从而避免“黑瞎子掰玉米”的现象。</li><li>它还可以是火遍全球的“<strong>老干妈</strong>”，吃面时加入它“调味”，烧菜时加入它“增香”，拌凉菜时加入它“提味”，这就是强大的“万能调料”。</li></ul><p>说完中台的概念，我们还需要了解一下，当下互联网产业中，“中台”有哪些常见类型？</p><ul><li>在有些人眼里：中台就是技术平台，像微服务开发框架、Devops 平台、PaaS 平台，容器云之类的，人们都叫它“<strong>技术中台</strong>”。</li><li>在有些人眼里：中台就是微服务业务平台，像最常见的什么用户中心，订单中心，各种微服务集散地，人们都叫它“<strong>业务中台</strong>”。</li><li>在有些人眼里：中台应该是组织的事情，在释放潜能：平台型组织的进化路线图 (豆瓣) 中就提出了平台型组织和组织中台的概念，这类组织中台在企业中主要起到投资评估与投后管理的作用，类似于企业内部资源调度中心和内部创新孵化组织，人们叫它“<strong>组织中台</strong>”。</li></ul></div><h2 id="03-为什么选择“中台”？"><a href="#03-为什么选择“中台”？" class="headerlink" title="03.为什么选择“中台”？"></a>03.为什么选择“中台”？</h2><div class="story post-story"><p>选择“中台”有很多原因，总结起来就是“<strong>实惠</strong>、<strong>精简</strong>、<strong>高效</strong>”。展开来说，“中台”具有以下优势：</p><blockquote><p><strong>服务重用</strong>：真正体现SOA理念的核心价值，松耦合的服务带来业务的复用；</p><p><strong>服务进化</strong>：随着新业务的不断接入，共享服务也需从仅提供单薄业务功能，不断的自我进化成更健壮更强大的服务，不断适应各种业务线，真正成为企业宝贵的IT资产；</p><p><strong>数据累积</strong>：各个业务的数据都沉淀在同一套中台服务，可以不断累积数据，最终发挥大数据威力；</p><p><strong>快速响应</strong>：更快的通过共享服务的组合响应新业务；</p><p><strong>降低成本</strong>：对于新业务，无需再投入新的重复的开发力量，减少人员成本；</p><p><strong>效能提升</strong>：开发人员更专注某一领域，开发更快，更易维护。</p></blockquote><p>众所周知，多数互联网企业的技术架构都是由“<strong>前台 + 后台</strong>”构成。而这种架构在大型项目以及多项目开发时存在很多问题，比如<strong>决策效率低下</strong>、<strong>“资源冗余、浪费频发”</strong>、<strong>“项目间与项目内协作能力较差”</strong>等等。这些问题在IT圈被多数从业者熟知的一个词就是“<strong>重造轮子</strong>”。</p><blockquote><p>重造轮子，（英语：Reinventing the wheel）是重新创造一个已有的或是早已被优化过的基本方法，此用语常出现在软件开发或其他工程领域中。</p></blockquote><p>搭建“中台”后，能有效解决上述问题，同时也完成了架构的“去中心化”，有效避免中心热点、雪崩等情况发生。而这其中“<strong>数据中台</strong>”的搭建，更加有益于大数据的发展，让数据高效、有序、合理地流通于各个业务之间，从而增强用户体验。</p><p>读到这里，你可能会不禁疑问，“中台”火归火，可是对于我自己这样一个个体来说又有什么意义呢？</p></div><h2 id="04-“中台”给我们的启示是什么？"><a href="#04-“中台”给我们的启示是什么？" class="headerlink" title="04.“中台”给我们的启示是什么？"></a>04.“中台”给我们的启示是什么？</h2><div class="story post-story"><p>我个人非常认同“中台“提供给我们的不仅仅是企业的架构调整，而是一种”<strong>思维方式</strong>“。一种可以从具体的事务中抽离成<strong>普适的经验</strong>的方法论。</p><p>拿我个人来说，我之前在学生组织工作时，为了协调多部门搞好一个活动，常常会有活动总结会议。这种会议的目的在于，大家可以坐在一起，把各部门遇到的问题及解决方案，抽象成一条或多条适用于其他活动的经验，以便于推动组织更好地向前发展。学生组织主办的活动也好，公司部门也罢，都可以是Supercell中的一个Cell，学会这种思维，会让我们积累更多更有益于自身和组织发展的经验，形成<strong>增强回路</strong>，从而推动人生的“<strong>飞轮</strong>”不断向前！</p><p>感谢你读到这里，祝你也能拥有“中台思维”！</p><blockquote><p>参考内容：</p><p>[1] InfoQ - <a href="https://www.infoq.cn/article/cG-DHodbHjRcv92W6tYh">白话中台战略（一）：中台是个什么鬼？</a></p><p>[2] 维基百科 - <a href="https://zh.wikipedia.org/wiki/%E9%87%8D%E9%80%A0%E8%BD%AE%E5%AD%90">“重造轮子”的词条</a></p><p>[3] 钟华 - 《企业IT架构转型之道 阿里巴巴中台战略思想与架构实战》</p><p>[4] CSDN - <a href="https://blog.csdn.net/BtB5e6Nsu1g511Eg5XEg/article/details/89312321">阿里中台(看图不说话)</a></p><p>[5] 邵恒头条 - 2019.06.19 互联网公司为什么都在搭建“中台”？</p><p>[6] 架构师技术联盟 - <a href="https://mp.weixin.qq.com/s?__biz=MzAxNzU3NjcxOA==&mid=2650719624&idx=1&sn=6fa8f576551b9a1e05962ed3834f49cc&chksm=83e903e9b49e8aff6d671b229e6ef996a3c6ae8da4e98fc61bc9d2d81553f14908a8cb6cc6a5&scene=21#wechat_redirect">关于中台，你可能不知道的那些事！</a></p><p>[7] 维基百科 - <a href="https://zh.wikipedia.org/wiki/Supercell_(%E6%B8%B8%E6%88%8F%E5%85%AC%E5%8F%B8)">“Supercell (游戏公司)”的词条</a></p><p>[8] Our story × Supercell - <a href="https://supercell.com/en/our-story/">Supercell 官网</a></p><p>[9] 知乎 - <a href="https://www.zhihu.com/question/57717433">互联网公司中所谓中台是怎么定义的？</a></p></blockquote><p>*<em>部分图片源于网络</em></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/DfCmB.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/DfCmB.png&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="2019" scheme="https://blog.amoswu.top/tags/2019/"/>
    
    <category term="新知识" scheme="https://blog.amoswu.top/tags/%E6%96%B0%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>什么是“沙盒创新”以及它背后的启示</title>
    <link href="https://blog.amoswu.top/80c1.html"/>
    <id>https://blog.amoswu.top/80c1.html</id>
    <published>2019-08-02T16:00:00.000Z</published>
    <updated>2026-01-30T07:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.amoswu.top/post/rkQ6a.jpg" class="lazyload" data-srcset="https://img.amoswu.top/post/rkQ6a.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>最近《邵恒头条》有一期栏目谈的是“以色列怎么做到‘沙盒创新’？”，收听过后，我大为触动。今天就和你聊一聊我从以色列”沙盒创新“背后得到的启示，以及我的一些思考。</p><h2 id="一、什么是“沙盒创新”？"><a href="#一、什么是“沙盒创新”？" class="headerlink" title="一、什么是“沙盒创新”？"></a>一、什么是“沙盒创新”？</h2><div class="story post-story"><p>首先来聊一聊什么是”沙盒创新“。如果你从未听说过这个词，单从字面意思上来理解，可以解释为”在某一不能动盒子内或者外进行的创新“。当然，如果你有计算机相关的知识，可能会知道”沙盒“是一个计算机术语，它是计算机安全领域的一种安全机制，它会为运行中的程序提供隔离环境。加上这一层，我们就可以给”沙盒创新“下一个准确的定义了。所谓的”沙盒创新“，就是<strong>盒子里装满了细沙，如果盒子不能动，产生的创新</strong>。换句话说，就是<strong>外部条件的限制，完全不能改变的情况下的创新</strong>。</p><p>我想，读到这里，你也一定会和我一样，产生了一个疑问——<strong>外部条件没法改变，从哪里还能产生创新呢？</strong>这个问题，同样也困扰了坐落于地中海东南岸及红海亚喀巴湾北岸的一个国家——以色列的人民。</p></div><h2 id="二、以色列的“沙盒创新”"><a href="#二、以色列的“沙盒创新”" class="headerlink" title="二、以色列的“沙盒创新”"></a>二、以色列的“沙盒创新”</h2><div class="story post-story"><p>一提到以色列，大多数人脑海中会浮现诸如“犹太人最多的国家”、“世界上人均年读书量最多的国家”、“发达国家”等等这样的标签。在开始介绍以色列的“沙盒创新”之前，请你和我一起先认识一下以色列这个国家。</p><p>以色列是一个位于西亚，坐落于地中海东南岸及红海亚喀巴湾北岸的主权国家。国土面积约为我国的<strong>0.2%**，人口总数约为900万（截止至2018年），人类发展指数</strong>0.903**，位列世界第22位（截止至2018年）。</p><blockquote><p>人类发展指数（英语：Human Development Index，缩写为HDI），是联合国开发计划署从1990年开始发布用以衡量各国社会经济发展程度的标准，并依此将各国划分为：极高、高、中、低共四组。只有被列入第一组“极高”的国家才有可能成为已开发国家。指数值根据出生时的平均寿命、受教育年限（包括平均受教育年限和预期受教育年限）、人均国民总收入计算出，在世界范围内可作为各国之间的比较。<br>分界标准：<br>极高：0.800以上<br>高：0.799<del>0.700之间<br>中：0.699</del>0.550之间<br>低：0.549以下</p><p>截止至2018年，中国大陆的人类发展指数为0.752，位列世界第86位。</p><p>—— 来自 维基百科“<a href="https://zh.wikipedia.org/wiki/%E4%BA%BA%E7%B1%BB%E5%8F%91%E5%B1%95%E6%8C%87%E6%95%B0">人类发展指数</a>”和“<a href="https://zh.wikipedia.org/wiki/%E4%BA%BA%E9%A1%9E%E7%99%BC%E5%B1%95%E6%8C%87%E6%95%B8%E5%88%97%E8%A1%A8">人类发展指数列表</a>”词条</p></blockquote><p>以色列为代议民主制国家，采用议会制、比例代表制和普遍选举制。总理为政府首脑，议会为立法机关。以色列为一发达国家，经济合作与发展组织成员国，<strong>2018年其名义国内生产总值排名世界第34</strong>。该国具有较高水平的劳动力，为<strong>全球教育程度最高的国家之一</strong>，其公民拥有高等教育学历的比例亦为世界最高之一。其生活水平为中东最高和亚洲第四高，其人口预期寿命亦居世界前列。</p><p>读完上面的介绍，是不是刷新了你对以色列这个国家的认识呢？</p><p>下面我们回到正题，聊一聊以色列的“沙盒创新”。在这个国土面积小的可怜的弹丸之地，有4000多家科技创业公司用他们的方式改变着我们每一个人的生活。是的，是改变我们每一个人的生活。</p><p>读到这里你可能不信，让我来给你举上几个例子。我们日常生活中的很多发明都源自于以色列，比如</p><ol><li>我们目前离不开的U盘，就是以色列人Amir Ban, Dov Moran 和 Oron Ogdan发明的，他们都来自以色列M-Systems公司；</li><li>还有今天中国大多数人都在用的即时通讯工具QQ，它脱胎于ICQ，ICQ是1996年由以色列Mirabillis公司发明的；</li><li>还有我们经常吃的圣女果，这种可爱的小西红柿的野生品种来自南美，目前人工种植的有三个品种，其中最主要的特别甜美的品种Tomaccio是在以色列希伯来大学教授Prof. Nahum Keidar 和 Prof. Chaim Rabinovitch领导下花了十二年时间杂交培育出来的。</li></ol><p>这些都是以色列发明创新的“冰山一角”，读到这里，相信你已经消除了“<strong>以色列是一个改变我们每一个人生活的国家</strong>”的疑问了吧。</p><p>这些发明和创新都离不开一个共同的密码，创新还有共同点？是的，这个密码究竟是什么呢？</p><p><strong>第一，有限制才有创新；</strong></p><p><strong>第二，创新有模式可循。</strong></p><p>这听起来是不是有一点反常识？我们经常会听到这样的抱怨，条件不允许、人才储备不够，我们不能创新，也就是限制太多，将创新扼杀在了摇篮里。但以色列SIT全球创新公司副总裁泰马尔·车路奇却说，“限制才能成为激发创新的动力”。正是种种的“限制”，逼着以色列人必须创新，因为“<strong>不创新就会死</strong>”。</p><p>今天被普及到全世界的滴灌技术，就是很好的例子。之所以会发明滴灌技术，就是因为以色列太缺水了，必须要让每一滴水都发挥出最大的作用。所以以色列人在灌溉设备上，用足了高科技，比如智能监控、防堵塞的药剂、充气系统、回收循环系统等等。他们生生把水的利用率，从传统的15%提升到了95%以上。</p><p>靠着滴灌技术，以色列不仅实现了农产品自给自足，还能出口欧洲国家。而且，滴灌技术还被推广到了全世界。所以你看，正是以色列的水资源限制，激发了农业技术的创新。</p><p>让人感到更反常识的是第二点，“创新有模式可循”，即以色列人认为创新是可以复制的。这听上去太不可思议了，我们平时所说的灵感啊、创新啊，都是灵光乍现才有的，怎么一下子就变得可能有现成的模式，而且还能复制了呢？</p><p>要解答这个问题，我们首先要明确我们所说的创新到底是什么，以色列人的定义是”<strong>新的、有价值的、可行的</strong>“这三个要素同时满足才构成创新。</p><p>紧接着你要思考，如果要实现这样的创新，我们需要打破什么？这也很明确，就是打破思维定势。</p><p>以色列人把思维定势梳理成三种最常见的类型，从小学就开始训练学生如何打破思维定势：</p><p>第一种是<strong>功能型的思维定势</strong>，就是习惯性把事物锁定为某种传统功能，比如墨镜，只有遮阳功能。但在未来，它也可能变成一个可穿戴的微型显示器。</p><p>第二种是<strong>结构型思维定势</strong>，也就是你认为，一个事物的结构就应该是你看到的那个样子。比如，最早的冰箱因为没有电，所以总是把大冰块置于顶部进行自上而下的冷气循环，这就导致最早的那些电冰箱的设计也总是冷冻室放在上面，冷藏室放在下面。但其实，我们显然用冷藏的功能更频繁，为了便利，应该放在上面嘛。</p><p>第三种是<strong>关系型思维定势</strong>，就是认为两个事物之间的关系是固定的。比如说，孩子看电视，你觉得影响学习，就不让他看。你认为，电视和学习之间，是势不两立的关系。但其实，你可以和孩子约定，每看一小时电视，就得读一小时书。这样，看电视和学习就变成了互相促进的关系。</p><p><strong>打破这样的思维定势，又要靠什么？</strong>泰马尔说，SIT就是一套帮我们打破思维定势的创新方法论。SIT是Systematic Inventive Thinking的缩写，意思是系统创新思维。</p><p>这套方法论讲究的是不做加法、不从外部要资源，也就是说，不去试图改变盒子本身。但是，<strong>你要从“盒子里面”的系统着手，聚焦于这个系统当中到底有哪些已有的资源，是否可以充分开掘其新的价值。</strong>这<strong>就是一种不抱怨、不抗拒的沙盒创新。</strong></p><p>SIT创新思维，总共包括五种核心工具。不过，我认为这里面最实用、最容易操作的工具，是<strong>减法工具</strong>。我来给你介绍一下。</p><p>简单来说，减法工具指的是，<strong>在一个系统里，减去最重要的部件，反而却发掘其他辅助部件的潜能</strong>。</p><p>举个简单的例子来说，洗衣液。洗衣液的功能，当然是把衣服洗干净，所以对洗衣液来说最核心的部件，就是去污成分了。那么，如果你把这部分拿走呢？不能去污，其实还有香气呀。所以，一个不能去污的洗衣液，可以当作衣服的清新剂。</p><p>这就很有用啊，因为现代人换衣服很频繁，每天穿一套不一样的，非常普遍。穿一次就洗吧，洗衣液的去污成分对衣服耗损很大。不洗吧，穿着又别扭。清新剂恰恰解决了这个问题。这个想法，以色列SIT公司在1996年就提出来了。四年之后，宝洁公司推出了一款叫Febreze的清新剂，创造了清洁市场的新品类。</p><p>这种减法工具就是以色列的系统创新思维的核心方法，是不是读完让人耳目一新呢？</p></div><h2 id="三、我的几点思考"><a href="#三、我的几点思考" class="headerlink" title="三、我的几点思考"></a>三、我的几点思考</h2><div class="story post-story"><p>在真正了解了什么是“沙盒创新”之后，我产生了几点思考，下面和你一起聊一聊。</p><h3 id="1-减少抱怨，多多行动。"><a href="#1-减少抱怨，多多行动。" class="headerlink" title="1.减少抱怨，多多行动。"></a>1.减少抱怨，多多行动。</h3><p>做事和创新在以色列人的角度，都是有规律可循的。找到这个规律的前提是“<strong>减少抱怨，多多行动</strong>”。正如我们在本文刚开始讨论的那样，以色列被我们熟识多发生在每年的“世界读书日”，这一天，多数商家和媒体都会宣传读书的重要性，这其中就必须要提到世界上最勤奋的以色列人的人均年读书本数。当代书画家范增曾经说过，“苍天没有给我什么独得之厚，我的每一步前进，都付出了通宵达旦的艰苦劳动和霜晨雨夜的冥思苦想”。所以，行动起来吧，中彩票的第一步是买一张彩票，对吗？</p><h3 id="2-学会做减法，轻装上阵。"><a href="#2-学会做减法，轻装上阵。" class="headerlink" title="2.学会做减法，轻装上阵。"></a>2.学会做减法，轻装上阵。</h3><p>生活在种系统复合环境下的我们，无论是事业、家庭还是个人，都在各自不同的系统中运行着。要想充分发掘这个系统的潜能唯有做好减法，轻装上阵，才会又不一样的风景呈现在我们面前。</p><h3 id="3-考虑事情多从整体出发，会有意想不到的收获。"><a href="#3-考虑事情多从整体出发，会有意想不到的收获。" class="headerlink" title="3.考虑事情多从整体出发，会有意想不到的收获。"></a>3.考虑事情多从整体出发，会有意想不到的收获。</h3><p>考虑事情多从整体出发，会有意想不到的收获。换一种方式讲，就是要有大局观。这好比这几个月以来，被美国举国家之力制裁的华为一样，要不是创始人任正非的远见与大局观，中国怕是又要出现一个“中兴”。整体性看待事物的重要性就不言而喻了。</p><h3 id="4-要不断打破思维定势，变得更加理性。"><a href="#4-要不断打破思维定势，变得更加理性。" class="headerlink" title="4.要不断打破思维定势，变得更加理性。"></a>4.要不断打破思维定势，变得更加理性。</h3><p>这一点思考也是我最近在学习得到课程《蔡钰·批判性思维15讲》时得到的一个共通的思考，正如课程中所说“你的知识面越广，你的思维局限和漏洞越少，你的思考就越自由”。而拥有多大的思考自由度，取决于你是否有更少地思维定势，或者说是否有批判性思维。所以，勇敢迈出那一步吧，打破那蛋壳一样的思维定势，看见不一样的世界。</p><p>以上，就是我对“什么是’沙盒创新‘以及它带给我的思考”的全部内容，感谢你读到这里，祝你也能做一个不断创新的人。</p><blockquote><p>参考内容：</p><p>[1] 邵恒头条 - 2018.8.1 以色列怎么做到“沙盒创新”？</p><p>[2] 百度百科 - “沙盒”的定义</p><p>[3] 维基百科 - “人类发展指数”、“人类发展指数列表”词条</p><p>[4] <a href="http://blog.sina.com.cn/s/blog_6211217f0102uxu9.html">十个影响我们日常生活的以色列发明</a> - 张平特拉维夫的新浪博客</p><p>[5] 得到课程《蔡钰·批判性思维15讲》</p></blockquote></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.amoswu.top/post/rkQ6a.jpg&quot; class=&quot;lazyload&quot; data-srcset=&quot;https://img.amoswu.top/post/rkQ6a.jpg&quot; srcset=&quot;data:image/</summary>
      
    
    
    
    <category term="新知" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/"/>
    
    <category term="笔记" scheme="https://blog.amoswu.top/categories/%E6%96%B0%E7%9F%A5/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="原创" scheme="https://blog.amoswu.top/tags/%E5%8E%9F%E5%88%9B/"/>
    
    <category term="随笔" scheme="https://blog.amoswu.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="2019" scheme="https://blog.amoswu.top/tags/2019/"/>
    
    <category term="新知识" scheme="https://blog.amoswu.top/tags/%E6%96%B0%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
</feed>
